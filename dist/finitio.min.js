!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports={name:"finitio",version:"1.3.1",description:"Finitio is a language for capturing information structure.",main:"index.js",author:"Louis Lambeau <louislambeau@gmail.com>",license:"MIT",repository:{type:"git",url:"https://github.com/llambeau/finitio.js"},keywords:["finitio","typing","system","json","serialization","validation"],analyze:!0,bin:{"finitio-js":"./bin/finitio-js"},scripts:{test:"grunt",build:"grunt compile",prepublish:"grunt test && grunt compile"},dependencies:{commander:"~2.9.0"},devDependencies:{"coffee-script":"~1.10.0",cucumber:"~0.9.4",underscore:"~1.8.3",shelljs:"~0.5.3",should:"~8.2.1",browserify:"~13.0.0",coffeeify:"~2.0.1",pegjs:"~0.9.0",grunt:"~0.4.5","grunt-cli":"~0.1.13","grunt-contrib-watch":"~0.6.1","grunt-browserify":"~4.0.1","grunt-coffeelint":"0.0.13","grunt-cucumber":"git://github.com/llambeau/grunt-cucumber-js.git#master","grunt-mocha-test":"~0.13.3","grunt-contrib-coffee":"~0.13.0","grunt-contrib-copy":"~0.8.2","grunt-contrib-clean":"~0.7.0","grunt-contrib-uglify":"~0.11.0","grunt-peg":"~2.0.0","grunt-contrib-jshint":"~0.12.0","grunt-fixtures2js":"~0.1.3","grunt-shell":"~1.1.2",mocha:"*",coffeelint:"*"}}},{}],2:[function(a,b,c){(function(){var c,d,e;c=a("./finitio/support/utils"),d=function(){function b(){}return b.VERSION=a("../package.json").version,b.CONFORMANCE="0.4",b.World={Finitio:b,JsTypes:{Finitio:b,Number:Number,String:String,Boolean:Boolean,Date:Date,Function:Function,RegExp:RegExp},importResolver:a("./finitio/resolver")},b.world=function(){var a,d,f,g;for(g=c.clone(b.World),d=0,f=arguments.length;d<f;d++)a=arguments[d],a&&e(g,a);return g},b.parse=function(a,b){return this.Parser.parse(a,b||{})},b.system=function(a,b){return"string"==typeof a&&(a=this.parse(a)),this.Meta.System.dress(a,this.world(b))},b.bundleFile=function(a,b){return new this.Bundler(this.world(b)).addFile(a).flush()},b.bundleSource=function(a,b){return new this.Bundler(this.world(b)).addSource(a).flush()},b}(),e=function(a,b){var d,e,f;e=[];for(d in b)f=b[d],"JsTypes"===d?e.push(a[d]=c.extend(a[d],f)):e.push(a[d]=f);return e},d.TypeError=a("./finitio/errors").TypeError,d.Utils=a("./finitio/support/utils"),d.Contracts=a("./finitio/contracts"),d.Attribute=a("./finitio/support/attribute"),d.Contract=a("./finitio/support/contract"),d.Heading=a("./finitio/support/heading"),d.Constraint=a("./finitio/support/constraint"),d.System=a("./finitio/system"),d.Parser=a("./finitio/parser"),d.Bundler=a("./finitio/bundler"),d.Type=a("./finitio/type"),d.TypeDef=a("./finitio/type/type_def"),d.TypeRef=a("./finitio/type/type_ref"),d.AdType=a("./finitio/type/ad_type"),d.AnyType=a("./finitio/type/any_type"),d.BuiltinType=a("./finitio/type/builtin_type"),d.RelationType=a("./finitio/type/relation_type"),d.SeqType=a("./finitio/type/seq_type"),d.SetType=a("./finitio/type/set_type"),d.StructType=a("./finitio/type/struct_type"),d.SubType=a("./finitio/type/sub_type"),d.TupleType=a("./finitio/type/tuple_type"),d.UnionType=a("./finitio/type/union_type"),d.Meta=a("./finitio/support/meta"),b.exports=d}).call(this)},{"../package.json":1,"./finitio/bundler":3,"./finitio/contracts":4,"./finitio/errors":10,"./finitio/parser":11,"./finitio/resolver":12,"./finitio/support/attribute":14,"./finitio/support/constraint":16,"./finitio/support/contract":17,"./finitio/support/heading":20,"./finitio/support/meta":23,"./finitio/support/utils":24,"./finitio/system":25,"./finitio/type":26,"./finitio/type/ad_type":27,"./finitio/type/any_type":28,"./finitio/type/builtin_type":29,"./finitio/type/relation_type":30,"./finitio/type/seq_type":31,"./finitio/type/set_type":32,"./finitio/type/struct_type":33,"./finitio/type/sub_type":34,"./finitio/type/tuple_type":35,"./finitio/type/type_def":36,"./finitio/type/type_ref":37,"./finitio/type/union_type":38}],3:[function(a,b,c){(function(){var c,d,e,f,g;f=a("./parser"),e=a("./support/meta"),c=a("./support/utils"),g=a("fs"),d=function(){function a(a){this.world=a,this.systems={}}var b;return b="module.exports = (function(){\n  var ss = JSONDATA;\n  var r = function(fallback){\n    return function(path, w, options){\n      var s = ss[path];\n      if (s){\n        if (options && options.raw){\n          return [ path, s ];\n        } else {\n          return w.Finitio.system(s, w);\n        }\n      } else if (fallback) {\n        return fallback(path, w, options);\n      } else {\n        throw new Error('Unable to resolve: `' + path + '`');\n      }\n    };\n  };\n  return function(w, options){\n    if (!w) { w = require('finit' + 'io').World; }\n    w = w.Finitio.world(w, {\n      importResolver: r(w.importResolver)\n    });\n    return w.importResolver('URL', w, options);\n  };\n})();",a.prototype.flush=function(){return b.replace(/^[ ]{4}/,"").replace(/JSONDATA/,JSON.stringify(this.systems)).replace(/URL/,this.world.sourceUrl)},a.prototype.addDirectory=function(a){throw new Error("Bundling directories is not supported")},a.prototype.addFile=function(a){var b;return g.lstatSync(a).isDirectory()?this.addDirectory(a):(b=g.readFileSync(a).toString(),this.addSource(b)),this},a.prototype.addSource=function(a){return this._bundle(this.world.Finitio.parse(a),this.world),this},a.prototype._bundle=function(a,b){var c,d,e,f,g,h,i;if(b.check&&b.Finitio.system(a,b),this.systems[b.sourceUrl]=a,a.imports){for(h=a.imports,i=[],c=0,e=h.length;c<e;c++)d=h[c],g=b.importResolver(d.from,b,{raw:!0}),d.from=g[0],f=b.Finitio.world(b,{sourceUrl:g[0]}),i.push(this._bundle(g[1],f));return i}},a}(),b.exports=d}).call(this)},{"./parser":11,"./support/meta":23,"./support/utils":24,fs:39}],4:[function(a,b,c){(function(){b.exports={Date:a("./contracts/date"),Time:a("./contracts/time"),Expression:a("./contracts/expression"),Function:a("./contracts/function"),JsType:a("./contracts/js_type")}}).call(this)},{"./contracts/date":5,"./contracts/expression":6,"./contracts/function":7,"./contracts/js_type":8,"./contracts/time":9}],5:[function(a,b,c){b.exports=function(){var a=function(a){var b=Object.prototype.toString;return"[object Date]"===b.call(a)&&!isNaN(a.getTime())};return{iso8601:{dress:function(b){var c=new Date(b);if(a(c))return c;throw new Error("Invalid Date string `"+b+"`")},undress:function(b){if(a(b)){var c=b.getFullYear().toString(),d=(b.getMonth()+1).toString(),e=b.getDate().toString();return c+"-"+(d[1]?d:"0"+d[0])+"-"+(e[1]?e:"0"+e[0])}throw new Error("Invalid Date `"+b+"`")}},milliseconds:{dress:function(b){var c=new Date(b);if(a(c))return c;throw new Error("Invalid Date milliseconds `"+b+"`")},undress:function(b){if(a(b))return b.getTime();throw new Error("Invalid Date `"+b+"`")}}}}()},{}],6:[function(a,b,c){b.exports=function(){return{defn:{dress:function(a){/^return/.test(a[a.length-1])||(a[a.length-1]="return "+a[a.length-1]);var b=Function.apply(Function,a);return b.defn=a,b},undress:function(a){if(!a.defn)throw new Error("No defn found: "+a.toString());return a.defn}}}}()},{}],7:[function(a,b,c){b.exports=function(){var b=a("../support/utils");return{reference:{dress:function(a,c){var d=a.split("."),e=b.reduce(d,c,function(b,c,d){if(void 0===b[c]||null===b[c])throw new Error(a+" is undefined");return b[c]});if("function"!=typeof e)throw new Error(a+" must resolve to a Function");var f=function(){return e.apply(this,arguments)};return f.nativeToString=function(){return a},f},undress:function(a){if(a.nativeToString)return a.nativeToString();throw new Error("Unimplemented")}}}}()},{"../support/utils":24}],8:[function(a,b,c){b.exports=function(){return{name:{dress:function(a,b){var c=null;if(c=b?new Function("world","return world."+a+";")(b):new Function("return "+a+";")())return c;throw msg="Unknown javascript type: `"+a+"` (",msg+=Object.keys(b).toString(),msg+=")",new Error(msg)},undress:function(a){throw new Error("Unimplemented")}}}}()},{}],9:[function(a,b,c){b.exports=function(){var a=function(a){var b=Object.prototype.toString;return"[object Date]"===b.call(a)&&!isNaN(a.getTime())};return{iso8601:{dress:function(b){var c=new Date(b);if(a(c))return c;throw new Error("Invalid Date string `"+b+"`")},undress:function(b){if(a(b))return b.toISOString();throw new Error("Invalid Date `"+s+"`")}},milliseconds:{dress:function(b){var c=new Date(b);if(a(c))return c;throw new Error("Invalid Date milliseconds `"+b+"`")},undress:function(b){if(a(b))return b.getTime();throw new Error("Invalid Date `"+b+"`")}}}}()},{}],10:[function(a,b,c){(function(){var c,d,e,f,g,h,i=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},j={}.hasOwnProperty;c=a("./support/utils"),d=function(a){function b(a){c.extend(this,a),this.message=g(this),b.__super__.constructor.call(this,this.message,this.rootCause)}return i(b,a),Object.defineProperty(b.prototype,"locatedMessage",{get:function(){return null!=this.location?"["+this.location+"] "+this.message:this.message}}),Object.defineProperty(b.prototype,"causes",{get:function(){return null!=this.causesCache?this.causesCache:this.causesCache=this.children&&f(this)}}),Object.defineProperty(b.prototype,"cause",{get:function(){return this.causes&&this.causes[0]}}),Object.defineProperty(b.prototype,"rootCauses",{get:function(){return null!=this.rootCausesCache?this.rootCausesCache:this.rootCausesCache=h(this,[])}}),Object.defineProperty(b.prototype,"rootCause",{get:function(){return this.rootCauses[this.rootCauses.length-1]}}),b.prototype.explain=function(){var a,b,c,d,e;if(e=this.locatedMessage+"\n",this.rootCauses)for(d=this.rootCauses,b=0,c=d.length;b<c;b++)a=d[b],e+="  "+a.locatedMessage+"\n";return e},b.prototype.explainTree=function(a){var b,c,d,e,f,g,h,i;for(i="",null==a&&(a=0),c=d=0,g=a;0<=g?d<g:d>g;c=0<=g?++d:--d)i+="  ";if(i+=this.locatedMessage+"\n",null!=this.causes)for(h=this.causes,e=0,f=h.length;e<f;e++)b=h[e],i+=b.explainTree(a+1);return i},b}(Error),g=function(a){var b,d,e,f;return e=a.error,e instanceof Array?(f=e,e=f[0],b=f[1],d=-1,e.replace(/\$\{([a-zA-Z]+)\}/g,function(e){return function(e){var f;return d+=1,f=e.slice(2,e.length-1),c.toString(a[f]||b[d])}}(this))):"string"==typeof e?e:a.toString()},f=function(a){return c.map(a.children,function(b){return b.location=e(a.location,b.location),b instanceof d?b:new d(b instanceof Error?{error:b.message,location:b.location}:b)})},h=function(a,b){return a.causes?c.each(a.causes,function(a){return h(a,b)}):b.push(a),b},e=function(a,b){return null==b?a:null==a?b:a+"/"+b},b.exports={TypeError:d}}).call(this)},{"./support/utils":24}],11:[function(a,b,c){b.exports=function(){"use strict";function a(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}function b(a,c,d,e){this.message=a,this.expected=c,this.found=d,this.location=e,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,b)}function c(a){function c(b){var c,d,e=od[b];if(e)return e;for(c=b-1;!od[c];)c--;for(e=od[c],e={line:e.line,column:e.column,seenCR:e.seenCR};c<b;)d=a.charAt(c),"\n"===d?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):"\r"===d||"\u2028"===d||"\u2029"===d?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1),c++;return od[b]=e,e}function d(a,b){var d=c(a),e=c(b);return{start:{offset:a,line:d.line,column:d.column},end:{offset:b,line:e.line,column:e.column}}}function e(a){md<pd||(md>pd&&(pd=md,qd=[]),qd.push(a))}function f(a,c,d,e){function f(a){var b=1;for(a.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});b<a.length;)a[b-1]===a[b]?a.splice(b,1):b++}function g(a,b){function c(a){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(a){return"\\x"+b(a)}).replace(/[\u0100-\u0FFF]/g,function(a){return"\\u0"+b(a)}).replace(/[\u1000-\uFFFF]/g,function(a){return"\\u"+b(a)})}var d,e,f,g=new Array(a.length);for(f=0;f<a.length;f++)g[f]=a[f].description;return d=a.length>1?g.slice(0,-1).join(", ")+" or "+g[a.length-1]:g[0],e=b?'"'+c(b)+'"':"end of input","Expected "+d+" but "+e+" found."}return null!==c&&f(c),new b(null!==a?a:g(c,d),c,d,e)}function g(){var a,b,c,d,e,f,g,i,k,l,n,o=65*md+0,p=sd[o];return p?(md=p.nextPos,p.result):(a=md,b=na(),b!==va?(c=h(),c!==va?(d=na(),d!==va?(e=j(),e!==va?(f=na(),f!==va?(g=O(),g===va&&(g=null),g!==va?(i=na(),i!==va?(k=m(),k===va&&(k=null),k!==va?(l=na(),l!==va?(n=qa(),n!==va?(nd=a,b=ya(c,e,g,k),a=b):(md=a,a=va)):(md=a,a=va)):(md=a,a=va)):(md=a,a=va)):(md=a,a=va)):(md=a,a=va)):(md=a,a=va)):(md=a,a=va)):(md=a,a=va)):(md=a,a=va),sd[o]={nextPos:md,result:a},a)}function h(){var a,b,c,d,e,f,g=65*md+1,h=sd[g];if(h)return md=h.nextPos,h.result;if(a=md,b=i(),b===va&&(b=null),b!==va){for(c=[],d=md,e=na(),e!==va?(f=i(),f!==va?(e=[e,f],d=e):(md=d,d=va)):(md=d,d=va);d!==va;)c.push(d),d=md,e=na(),e!==va?(f=i(),f!==va?(e=[e,f],d=e):(md=d,d=va)):(md=d,d=va);c!==va?(nd=a,b=za(b,c),a=b):(md=a,a=va)}else md=a,a=va;return sd[g]={nextPos:md,result:a},a}function i(){var b,c,d,f,g,h,i,j,k=65*md+2,l=sd[k];return l?(md=l.nextPos,l.result):(b=md,a.substr(md,7)===Aa?(c=Aa,md+=7):(c=va,0===rd&&e(Ba)),c!==va?(d=pa(),d!==va?(f=ia(),f!==va?(g=pa(),g!==va?(a.substr(md,2)===Ca?(h=Ca,md+=2):(h=va,0===rd&&e(Da)),h!==va?(i=pa(),i!==va?(j=fa(),j!==va?(nd=b,c=Ea(f,j),b=c):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va),b===va&&(b=md,a.substr(md,7)===Aa?(c=Aa,md+=7):(c=va,0===rd&&e(Ba)),c!==va?(d=pa(),d!==va?(f=ia(),f!==va?(nd=b,c=Fa(f),b=c):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)),sd[k]={nextPos:md,result:b},b)}function j(){var a,b,c,d,e,f,g=65*md+3,h=sd[g];if(h)return md=h.nextPos,h.result;if(a=md,b=k(),b===va&&(b=null),b!==va){for(c=[],d=md,e=na(),e!==va?(f=k(),f!==va?(e=[e,f],d=e):(md=d,d=va)):(md=d,d=va);d!==va;)c.push(d),d=md,e=na(),e!==va?(f=k(),f!==va?(e=[e,f],d=e):(md=d,d=va)):(md=d,d=va);c!==va?(nd=a,b=za(b,c),a=b):(md=a,a=va)}else md=a,a=va;return sd[g]={nextPos:md,result:a},a}function k(){var b,c,d,f,g,h,i,j=65*md+4,k=sd[j];return k?(md=k.nextPos,k.result):(b=md,c=O(),c===va&&(c=null),c!==va?(d=da(),d!==va?(f=na(),f!==va?(61===a.charCodeAt(md)?(g=Ga,md++):(g=va,0===rd&&e(Ha)),g!==va?(h=na(),h!==va?(i=m(),i!==va?(nd=b,c=Ia(c,d,i),b=c):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va),sd[j]={nextPos:md,result:b},b)}function l(){var a,b=65*md+5,c=sd[b];return c?(md=c.nextPos,c.result):(a=m(),sd[b]={nextPos:md,result:a},a)}function m(){var a,b,c,d,e,f,g,h=65*md+6,i=sd[h];if(i)return md=i.nextPos,i.result;if(a=md,b=O(),b===va&&(b=null),b!==va)if(c=n(),c!==va){if(d=[],e=md,f=ka(),f!==va?(g=n(),g!==va?(f=[f,g],e=f):(md=e,e=va)):(md=e,e=va),e!==va)for(;e!==va;)d.push(e),e=md,f=ka(),f!==va?(g=n(),g!==va?(f=[f,g],e=f):(md=e,e=va)):(md=e,e=va);else d=va;d!==va?(nd=a,b=Ja(b,c,d),a=b):(md=a,a=va)}else md=a,a=va;else md=a,a=va;return a===va&&(a=n()),sd[h]={nextPos:md,result:a},a}function n(){var a,b,c,d,e=65*md+7,f=sd[e];return f?(md=f.nextPos,f.result):(a=md,b=O(),b===va&&(b=null),b!==va?(c=s(),c!==va?(d=o(),d!==va?(nd=a,b=Ka(b,c,d),a=b):(md=a,a=va)):(md=a,a=va)):(md=a,a=va),a===va&&(a=s()),sd[e]={nextPos:md,result:a},a)}function o(){var b,c,d,f,g,h,i,j,k=65*md+8,l=sd[k];return l?(md=l.nextPos,l.result):(b=md,40===a.charCodeAt(md)?(c=La,md++):(c=va,0===rd&&e(Ma)),c!==va?(d=na(),d!==va?(f=_(),f!==va?(g=ka(),g!==va?(h=p(),h!==va?(i=na(),i!==va?(41===a.charCodeAt(md)?(j=Na,md++):(j=va,0===rd&&e(Oa)),j!==va?(nd=b,c=Pa(f,h),b=c):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va),b===va&&(b=md,c=na(),c!==va?(a.substr(md,2)===Qa?(d=Qa,md+=2):(d=va,0===rd&&e(Ra)),d!==va?(f=na(),f!==va?(g=T(),g!==va?(nd=b,c=Sa(g),b=c):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va),b===va&&(b=md,c=na(),c!==va?(a.substr(md,2)===Qa?(d=Qa,md+=2):(d=va,0===rd&&e(Ra)),d!==va?(f=na(),f!==va?(g=$(),g!==va?(nd=b,c=Ta(g),b=c):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va),b===va&&(b=md,c=na(),c!==va?(a.substr(md,2)===Qa?(d=Qa,md+=2):(d=va,0===rd&&e(Ra)),d!==va?(f=na(),f!==va?(g=S(),g!==va?(nd=b,c=Ua(g),b=c):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va),b===va&&(b=md,c=na(),c!==va?(a.substr(md,2)===Qa?(d=Qa,md+=2):(d=va,0===rd&&e(Ra)),d!==va?(f=na(),f!==va?(g=Z(),g!==va?(nd=b,c=Va(g),b=c):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va))))),sd[k]={nextPos:md,result:b},b)}function p(){var a,b,c,d,e,f,g=65*md+9,h=sd[g];if(h)return md=h.nextPos,h.result;if(a=md,b=q(),b!==va){for(c=[],d=md,e=ma(),e!==va?(f=q(),f!==va?(e=[e,f],d=e):(md=d,d=va)):(md=d,d=va);d!==va;)c.push(d),d=md,e=ma(),e!==va?(f=q(),f!==va?(e=[e,f],d=e):(md=d,d=va)):(md=d,d=va);c!==va?(d=ma(),d!==va?(nd=a,b=za(b,c),a=b):(md=a,a=va)):(md=a,a=va)}else md=a,a=va;return a===va&&(a=md,b=r(),b!==va&&(nd=a,b=Wa(b)),a=b),sd[g]={nextPos:md,result:a},a}function q(){var b,c,d,f,g,h,i=65*md+10,j=sd[i];return j?(md=j.nextPos,j.result):(b=md,c=O(),c===va&&(c=null),c!==va?(d=ba(),d!==va?(58===a.charCodeAt(md)?(f=Xa,md++):(f=va,0===rd&&e(Ya)),f!==va?(g=na(),g!==va?(h=L(),h!==va?(nd=b,c=Za(c,d,h),b=c):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va),sd[i]={nextPos:md,result:b},b)}function r(){var a,b,c=65*md+11,d=sd[c];return d?(md=d.nextPos,d.result):(a=md,b=L(),b!==va&&(nd=a,b=$a(b)),a=b,sd[c]={nextPos:md,result:a},a)}function s(){var a,b=65*md+12,c=sd[b];return c?(md=c.nextPos,c.result):(a=u(),a===va&&(a=t(),a===va&&(a=x())),sd[b]={nextPos:md,result:a},a)}function t(){var b,c,d,f,g,h,i,j=65*md+13,k=sd[j];return k?(md=k.nextPos,k.result):(b=md,c=O(),c===va&&(c=null),c!==va?(123===a.charCodeAt(md)?(d=_a,md++):(d=va,0===rd&&e(ab)),d!==va?(f=na(),f!==va?(g=v(),g!==va?(h=na(),h!==va?(125===a.charCodeAt(md)?(i=bb,md++):(i=va,0===rd&&e(cb)),i!==va?(nd=b,c=db(c,g),b=c):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va),sd[j]={nextPos:md,result:b},b)}function u(){var b,c,d,f,g,h,i,j=65*md+14,k=sd[j];return k?(md=k.nextPos,k.result):(b=md,c=O(),c===va&&(c=null),c!==va?(a.substr(md,2)===eb?(d=eb,md+=2):(d=va,0===rd&&e(fb)),d!==va?(f=na(),f!==va?(g=v(),g!==va?(h=na(),h!==va?(a.substr(md,2)===gb?(i=gb,md+=2):(i=va,0===rd&&e(hb)),i!==va?(nd=b,c=ib(c,g),b=c):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va),sd[j]={nextPos:md,result:b},b)}function v(){var b,c,d,f,g,h,i,j,k=65*md+15,l=sd[k];if(l)return md=l.nextPos,l.result;if(b=md,c=w(),c===va&&(c=null),c!==va){for(d=[],f=md,g=ma(),g!==va?(h=w(),h!==va?(g=[g,h],f=g):(md=f,f=va)):(md=f,f=va);f!==va;)d.push(f),f=md,g=ma(),g!==va?(h=w(),h!==va?(g=[g,h],f=g):(md=f,f=va)):(md=f,f=va);d!==va?(f=ma(),f!==va?(g=ja(),g!==va?(58===a.charCodeAt(md)?(h=Xa,md++):(h=va,0===rd&&e(Ya)),h!==va?(i=na(),i!==va?(j=m(),j!==va?(nd=b,c=jb(c,d,g,j),b=c):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)}else md=b,b=va;if(b===va)if(b=md,c=w(),c===va&&(c=null),c!==va){for(d=[],f=md,g=ma(),g!==va?(h=w(),h!==va?(g=[g,h],f=g):(md=f,f=va)):(md=f,f=va);f!==va;)d.push(f),f=md,g=ma(),g!==va?(h=w(),h!==va?(g=[g,h],f=g):(md=f,f=va)):(md=f,f=va);d!==va?(f=ma(),f!==va?(g=ja(),g===va&&(g=null),g!==va?(nd=b,c=kb(c,d,g),b=c):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)}else md=b,b=va;return sd[k]={nextPos:md,result:b},b}function w(){var b,c,d,f,g,h,i,j,k=65*md+16,l=sd[k];return l?(md=l.nextPos,l.result):(b=md,c=O(),c===va&&(c=null),c!==va?(d=ca(),d!==va?(f=na(),f!==va?(58===a.charCodeAt(md)?(g=Xa,md++):(g=va,0===rd&&e(Ya)),g!==va?(63===a.charCodeAt(md)?(h=lb,md++):(h=va,0===rd&&e(mb)),h===va&&(h=null),h!==va?(i=na(),i!==va?(j=m(),j!==va?(nd=b,c=nb(c,d,h,j),b=c):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va),sd[k]={nextPos:md,result:b},b)}function x(){var a,b=65*md+17,c=sd[b];return c?(md=c.nextPos,c.result):(a=y(),a===va&&(a=z(),a===va&&(a=A(),a===va&&(a=B()))),sd[b]={nextPos:md,result:a},a)}function y(){var b,c,d,f,g,h,i,j=65*md+18,k=sd[j];return k?(md=k.nextPos,k.result):(b=md,c=O(),c===va&&(c=null),c!==va?(123===a.charCodeAt(md)?(d=_a,md++):(d=va,0===rd&&e(ab)),d!==va?(f=na(),f!==va?(g=m(),g!==va?(h=na(),h!==va?(125===a.charCodeAt(md)?(i=bb,md++):(i=va,0===rd&&e(cb)),i!==va?(nd=b,c=ob(c,g),b=c):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va),sd[j]={nextPos:md,result:b},b)}function z(){var b,c,d,f,g,h,i,j=65*md+19,k=sd[j];return k?(md=k.nextPos,k.result):(b=md,c=O(),c===va&&(c=null),c!==va?(91===a.charCodeAt(md)?(d=pb,md++):(d=va,0===rd&&e(qb)),d!==va?(f=na(),f!==va?(g=m(),g!==va?(h=na(),h!==va?(93===a.charCodeAt(md)?(i=rb,md++):(i=va,0===rd&&e(sb)),i!==va?(nd=b,c=tb(c,g),b=c):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va),sd[j]={nextPos:md,result:b},b)}function A(){var b,c,d,f,g,h,i,j,k=65*md+20,l=sd[k];if(l)return md=l.nextPos,l.result;if(b=md,c=O(),c===va&&(c=null),c!==va)if(60===a.charCodeAt(md)?(d=ub,md++):(d=va,0===rd&&e(vb)),d!==va)if(f=m(),f!==va){for(g=[],h=md,i=ma(),i!==va?(j=m(),j!==va?(i=[i,j],h=i):(md=h,h=va)):(md=h,h=va);h!==va;)g.push(h),h=md,i=ma(),i!==va?(j=m(),j!==va?(i=[i,j],h=i):(md=h,h=va)):(md=h,h=va);g!==va?(h=ma(),h!==va?(62===a.charCodeAt(md)?(i=wb,md++):(i=va,0===rd&&e(xb)),i!==va?(nd=b,c=yb(c,f,g),b=c):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)}else md=b,b=va;else md=b,b=va;else md=b,b=va;return sd[k]={nextPos:md,result:b},b}function B(){var a,b=65*md+21,c=sd[b];return c?(md=c.nextPos,c.result):(a=C(),a===va&&(a=I(),a===va&&(a=H(),a===va&&(a=J()))),sd[b]={nextPos:md,result:a},a)}function C(){var a,b,c,d,e=65*md+22,f=sd[e];return f?(md=f.nextPos,f.result):(a=md,b=D(),b===va&&(b=null),b!==va?(c=na(),c!==va?(d=E(),d!==va?(nd=a,b=zb(b,d),a=b):(md=a,a=va)):(md=a,a=va)):(md=a,a=va),sd[e]={nextPos:md,result:a},a)}function D(){var b,c,d,f,g,h=65*md+23,i=sd[h];return i?(md=i.nextPos,i.result):(b=md,c=O(),c===va&&(c=null),c!==va?(d=md,46===a.charCodeAt(md)?(f=Ab,md++):(f=va,0===rd&&e(Bb)),f!==va?(g=ha(),g!==va?(f=[f,g],d=f):(md=d,d=va)):(md=d,d=va),d!==va?(nd=b,c=Cb(c,d),b=c):(md=b,b=va)):(md=b,b=va),sd[h]={nextPos:md,result:b},b)}function E(){var a,b,c,d,e,f,g=65*md+24,h=sd[g];if(h)return md=h.nextPos,h.result;if(a=md,b=F(),b!==va){for(c=[],d=md,e=ma(),e!==va?(f=F(),f!==va?(e=[e,f],d=e):(md=d,d=va)):(md=d,d=va);d!==va;)c.push(d),d=md,e=ma(),e!==va?(f=F(),f!==va?(e=[e,f],d=e):(md=d,d=va)):(md=d,d=va);c!==va?(d=ma(),d!==va?(nd=a,b=za(b,c),a=b):(md=a,a=va)):(md=a,a=va)}else md=a,a=va;return sd[g]={nextPos:md,result:a},a}function F(){var b,c,d,f,g,h,i,j,k=65*md+25,l=sd[k];return l?(md=l.nextPos,l.result):(b=md,c=G(),c!==va?(d=na(),d!==va?(92===a.charCodeAt(md)?(f=Db,md++):(f=va,0===rd&&e(Eb)),f!==va?(g=K(),g!==va?(h=na(),h!==va?(92===a.charCodeAt(md)?(i=Db,md++):(i=va,0===rd&&e(Eb)),i!==va?(j=K(),j!==va?(nd=b,c=Fb(c,g,j),b=c):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va),b===va&&(b=md,c=G(),c!==va?(d=na(),d!==va?(46===a.charCodeAt(md)?(f=Ab,md++):(f=va,0===rd&&e(Bb)),f!==va?(g=ha(),g!==va?(nd=b,c=Gb(c,g),b=c):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va),b===va&&(b=G())),sd[k]={nextPos:md,result:b},b)}function G(){var b,c,d,f,g,h,i,j=65*md+26,k=sd[j];return k?(md=k.nextPos,k.result):(b=md,c=O(),c===va&&(c=null),c!==va?(60===a.charCodeAt(md)?(d=ub,md++):(d=va,0===rd&&e(vb)),d!==va?(f=aa(),f!==va?(62===a.charCodeAt(md)?(g=wb,md++):(g=va,0===rd&&e(xb)),g!==va?(h=na(),h!==va?(i=m(),i!==va?(nd=b,c=Hb(c,f,i),b=c):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va),sd[j]={nextPos:md,result:b},b)}function H(){var b,c,d,f=65*md+27,g=sd[f];return g?(md=g.nextPos,g.result):(b=md,c=O(),c===va&&(c=null),c!==va?(46===a.charCodeAt(md)?(d=Ab,md++):(d=va,0===rd&&e(Bb)),d!==va?(nd=b,c=Ib(c),b=c):(md=b,b=va)):(md=b,b=va),sd[f]={nextPos:md,result:b},b)}function I(){var b,c,d,f,g=65*md+28,h=sd[g];return h?(md=h.nextPos,h.result):(b=md,c=O(),c===va&&(c=null),c!==va?(46===a.charCodeAt(md)?(d=Ab,md++):(d=va,0===rd&&e(Bb)),d!==va?(f=ha(),f!==va?(nd=b,c=Jb(c,f),b=c):(md=b,b=va)):(md=b,b=va)):(md=b,b=va),sd[g]={nextPos:md,result:b},b)}function J(){var a,b,c=65*md+29,d=sd[c];return d?(md=d.nextPos,d.result):(a=md,b=ga(),b!==va&&(nd=a,b=Kb(b)),a=b,sd[c]={nextPos:md,result:a},a)}function K(){var b,c,d,f,g,h,i,j,k,l,m=65*md+30,n=sd[m];return n?(md=n.nextPos,n.result):(b=md,40===a.charCodeAt(md)?(c=La,md++):(c=va,0===rd&&e(Ma)),c!==va?(d=na(),d!==va?(f=_(),f!==va?(g=na(),g!==va?(124===a.charCodeAt(md)?(h=Lb,md++):(h=va,0===rd&&e(Mb)),h!==va?(i=na(),i!==va?(j=L(),j!==va?(k=na(),k!==va?(41===a.charCodeAt(md)?(l=Na,md++):(l=va,0===rd&&e(Oa)),l!==va?(nd=b,c=Nb(f,j),b=c):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va),sd[m]={nextPos:md,result:b},b)}function L(){var b,c,d,e=65*md+31,f=sd[e];if(f)return md=f.nextPos,f.result;if(b=md,c=[],d=M(),d===va&&(d=N()),d!==va)for(;d!==va;)c.push(d),d=M(),d===va&&(d=N());else c=va;return b=c!==va?a.substring(b,md):c,sd[e]={nextPos:md,result:b},b}function M(){var b,c,d,f,g,h=65*md+32,i=sd[h];return i?(md=i.nextPos,i.result):(b=md,a.substr(md,2)===Ob?(c=Ob,md+=2):(c=va,0===rd&&e(Pb)),c===va&&(c=md,40===a.charCodeAt(md)?(d=La,md++):(d=va,0===rd&&e(Ma)),d!==va?(f=L(),f!==va?(41===a.charCodeAt(md)?(g=Na,md++):(g=va,0===rd&&e(Oa)),g!==va?(d=[d,f,g],c=d):(md=c,c=va)):(md=c,c=va)):(md=c,c=va)),b=c!==va?a.substring(b,md):c,sd[h]={nextPos:md,result:b},b)}function N(){var b,c,d,f,g,h=65*md+33,i=sd[h];if(i)return md=i.nextPos,i.result;if(b=md,c=[],d=md,f=md,rd++,Qb.test(a.charAt(md))?(g=a.charAt(md),md++):(g=va,0===rd&&e(Rb)),rd--,g===va?f=void 0:(md=f,f=va),f!==va?(a.length>md?(g=a.charAt(md),md++):(g=va,0===rd&&e(Sb)),g!==va?(f=[f,g],d=f):(md=d,d=va)):(md=d,d=va),d!==va)for(;d!==va;)c.push(d),d=md,f=md,rd++,Qb.test(a.charAt(md))?(g=a.charAt(md),md++):(g=va,0===rd&&e(Rb)),rd--,g===va?f=void 0:(md=f,f=va),f!==va?(a.length>md?(g=a.charAt(md),md++):(g=va,0===rd&&e(Sb)),g!==va?(f=[f,g],d=f):(md=d,d=va)):(md=d,d=va);else c=va;return b=c!==va?a.substring(b,md):c,sd[h]={nextPos:md,result:b},b}function O(){var b,c,d,f,g,h,i,j,k=65*md+34,l=sd[k];if(l)return md=l.nextPos,l.result;if(b=md,a.substr(md,2)===Tb?(c=Tb,md+=2):(c=va,0===rd&&e(Ub)),c!==va)if(d=na(),d!==va)if(f=P(),f!==va){for(g=[],h=md,i=ma(),i!==va?(j=P(),j!==va?(i=[i,j],h=i):(md=h,h=va)):(md=h,h=va);h!==va;)g.push(h),h=md,i=ma(),i!==va?(j=P(),j!==va?(i=[i,j],h=i):(md=h,h=va)):(md=h,h=va);g!==va?(h=na(),h!==va?(a.substr(md,2)===Vb?(i=Vb,md+=2):(i=va,0===rd&&e(Wb)),i!==va?(j=na(),j!==va?(nd=b,c=Xb(f,g),b=c):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)}else md=b,b=va;else md=b,b=va;else md=b,b=va;if(b===va)if(b=md,a.substr(md,2)===Tb?(c=Tb,md+=2):(c=va,0===rd&&e(Ub)),c!==va){if(d=md,f=[],g=md,h=md,rd++,a.substr(md,2)===Vb?(i=Vb,md+=2):(i=va,0===rd&&e(Wb)),rd--,i===va?h=void 0:(md=h,h=va),h!==va?(a.length>md?(i=a.charAt(md),md++):(i=va,0===rd&&e(Sb)),i!==va?(h=[h,i],g=h):(md=g,g=va)):(md=g,g=va),g!==va)for(;g!==va;)f.push(g),g=md,h=md,rd++,a.substr(md,2)===Vb?(i=Vb,md+=2):(i=va,0===rd&&e(Wb)),rd--,i===va?h=void 0:(md=h,h=va),h!==va?(a.length>md?(i=a.charAt(md),md++):(i=va,0===rd&&e(Sb)),i!==va?(h=[h,i],g=h):(md=g,g=va)):(md=g,g=va);else f=va;d=f!==va?a.substring(d,md):f,d!==va?(a.substr(md,2)===Vb?(f=Vb,md+=2):(f=va,0===rd&&e(Wb)),f!==va?(g=na(),g!==va?(nd=b,c=Yb(d),b=c):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)}else md=b,b=va;return sd[k]={nextPos:md,result:b},b}function P(){var b,c,d,f,g,h,i=65*md+35,j=sd[i];return j?(md=j.nextPos,j.result):(b=md,c=ca(),c!==va?(d=pa(),d===va&&(d=null),d!==va?(58===a.charCodeAt(md)?(f=Xa,md++):(f=va,0===rd&&e(Ya)),f!==va?(g=pa(),g===va&&(g=null),g!==va?(h=Q(),h!==va?(nd=b,c=Zb(c,h),b=c):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)):(md=b,b=va),sd[i]={nextPos:md,result:b},b)}function Q(){var a,b=65*md+36,c=sd[b];return c?(md=c.nextPos,c.result):(a=R(),a===va&&(a=S(),a===va&&(a=W(),a===va&&(a=V(),a===va&&(a=X(),a===va&&(a=Y(),a===va&&(a=Z(),a===va&&(a=$(),a===va&&(a=T())))))))),sd[b]={nextPos:md,result:a},a)}function R(){var b,c,d,f,g,h,i,j,k=65*md+37,l=sd[k];if(l)return md=l.nextPos,l.result;if(b=md,c=md,d=md,$b.test(a.charAt(md))?(f=a.charAt(md),md++):(f=va,0===rd&&e(_b)),f!==va){for(g=[],h=md,ac.test(a.charAt(md))?(i=a.charAt(md),md++):(i=va,0===rd&&e(bc)),i!==va?($b.test(a.charAt(md))?(j=a.charAt(md),md++):(j=va,0===rd&&e(_b)),j!==va?(i=[i,j],h=i):(md=h,h=va)):(md=h,h=va),h===va&&(h=md,i=md,rd++,$b.test(a.charAt(md))?(j=a.charAt(md),md++):(j=va,0===rd&&e(_b)),rd--,j===va?i=void 0:(md=i,i=va),i!==va?(a.length>md?(j=a.charAt(md),md++):(j=va,0===rd&&e(Sb)),j!==va?(i=[i,j],h=i):(md=h,h=va)):(md=h,h=va));h!==va;)g.push(h),h=md,ac.test(a.charAt(md))?(i=a.charAt(md),md++):(i=va,0===rd&&e(bc)),i!==va?($b.test(a.charAt(md))?(j=a.charAt(md),md++):(j=va,0===rd&&e(_b)),j!==va?(i=[i,j],h=i):(md=h,h=va)):(md=h,h=va),h===va&&(h=md,i=md,rd++,$b.test(a.charAt(md))?(j=a.charAt(md),md++):(j=va,0===rd&&e(_b)),rd--,j===va?i=void 0:(md=i,i=va),i!==va?(a.length>md?(j=a.charAt(md),md++):(j=va,0===rd&&e(Sb)),j!==va?(i=[i,j],h=i):(md=h,h=va)):(md=h,h=va));g!==va?($b.test(a.charAt(md))?(h=a.charAt(md),md++):(h=va,0===rd&&e(_b)),h!==va?(f=[f,g,h],d=f):(md=d,d=va)):(md=d,d=va)}else md=d,d=va;return c=d!==va?a.substring(c,md):d,c!==va&&(nd=b,c=cc(c)),b=c,sd[k]={nextPos:md,result:b},b}function S(){var b,c,d,f,g=65*md+38,h=sd[g];return h?(md=h.nextPos,h.result):(b=md,c=V(),c!==va?(a.substr(md,2)===dc?(d=dc,md+=2):(d=va,0===rd&&e(ec)),d!==va?(f=V(),f!==va?(nd=b,c=fc(c,f),b=c):(md=b,b=va)):(md=b,b=va)):(md=b,b=va),b===va&&(b=md,c=V(),c!==va?(a.substr(md,3)===gc?(d=gc,md+=3):(d=va,0===rd&&e(hc)),d!==va?(f=V(),f!==va?(nd=b,c=ic(c,f),b=c):(md=b,b=va)):(md=b,b=va)):(md=b,b=va),b===va&&(b=md,c=V(),c!==va?(a.substr(md,2)===dc?(d=dc,md+=2):(d=va,0===rd&&e(ec)),d!==va?(f=na(),f!==va?(nd=b,c=jc(c),b=c):(md=b,b=va)):(md=b,b=va)):(md=b,b=va))),sd[g]={nextPos:md,result:b},b)}function T(){var b,c,d,f,g=65*md+39,h=sd[g];return h?(md=h.nextPos,h.result):(b=md,38===a.charCodeAt(md)?(c=kc,md++):(c=va,0===rd&&e(lc)),c!==va?(d=md,f=U(),d=f!==va?a.substring(d,md):f,d!==va?(nd=b,c=mc(d),b=c):(md=b,b=va)):(md=b,b=va),sd[g]={nextPos:md,result:b},b)}function U(){var b,c,d,f,g,h,i,j,k,l=65*md+40,m=sd[l];if(m)return md=m.nextPos,m.result;if(b=md,c=md,d=md,nc.test(a.charAt(md))?(f=a.charAt(md),md++):(f=va,0===rd&&e(oc)),f!==va){for(g=[],pc.test(a.charAt(md))?(h=a.charAt(md),md++):(h=va,0===rd&&e(qc));h!==va;)g.push(h),pc.test(a.charAt(md))?(h=a.charAt(md),md++):(h=va,0===rd&&e(qc));if(g!==va){for(h=[],i=md,46===a.charCodeAt(md)?(j=Ab,md++):(j=va,0===rd&&e(Bb)),j!==va?(k=U(),k!==va?(j=[j,k],i=j):(md=i,i=va)):(md=i,i=va);i!==va;)h.push(i),i=md,46===a.charCodeAt(md)?(j=Ab,md++):(j=va,0===rd&&e(Bb)),j!==va?(k=U(),k!==va?(j=[j,k],i=j):(md=i,i=va)):(md=i,i=va);h!==va?(f=[f,g,h],d=f):(md=d,d=va)}else md=d,d=va}else md=d,d=va;return c=d!==va?a.substring(c,md):d,c!==va&&(nd=b,c=rc(c)),b=c,sd[l]={nextPos:md,result:b},b}function V(){var b,c,d,f,g,h,i=65*md+41,j=sd[i];if(j)return md=j.nextPos,j.result;if(b=md,c=md,d=md,sc.test(a.charAt(md))?(f=a.charAt(md),md++):(f=va,0===rd&&e(tc)),f!==va){for(g=[],uc.test(a.charAt(md))?(h=a.charAt(md),md++):(h=va,0===rd&&e(vc));h!==va;)g.push(h),uc.test(a.charAt(md))?(h=a.charAt(md),md++):(h=va,0===rd&&e(vc));g!==va?(f=[f,g],d=f):(md=d,d=va)}else md=d,d=va;return d===va&&(wc.test(a.charAt(md))?(d=a.charAt(md),md++):(d=va,0===rd&&e(xc)),d===va&&(d=md,yc.test(a.charAt(md))?(f=a.charAt(md),md++):(f=va,0===rd&&e(zc)),f!==va?(g=V(),g!==va?(f=[f,g],d=f):(md=d,d=va)):(md=d,d=va))),c=d!==va?a.substring(c,md):d,c!==va&&(nd=b,
c=Ac(c)),b=c,sd[i]={nextPos:md,result:b},b}function W(){var b,c,d,f,g,h,i,j=65*md+42,k=sd[j];if(k)return md=k.nextPos,k.result;if(b=md,c=md,d=md,f=V(),f===va&&(f=null),f!==va)if(46===a.charCodeAt(md)?(g=Ab,md++):(g=va,0===rd&&e(Bb)),g!==va){if(h=[],uc.test(a.charAt(md))?(i=a.charAt(md),md++):(i=va,0===rd&&e(vc)),i!==va)for(;i!==va;)h.push(i),uc.test(a.charAt(md))?(i=a.charAt(md),md++):(i=va,0===rd&&e(vc));else h=va;h!==va?(f=[f,g,h],d=f):(md=d,d=va)}else md=d,d=va;else md=d,d=va;return c=d!==va?a.substring(c,md):d,c!==va&&(nd=b,c=Bc(c)),b=c,sd[j]={nextPos:md,result:b},b}function X(){var b,c,d=65*md+43,f=sd[d];return f?(md=f.nextPos,f.result):(b=md,a.substr(md,4)===Cc?(c=Cc,md+=4):(c=va,0===rd&&e(Dc)),c!==va&&(nd=b,c=Ec()),b=c,b===va&&(b=md,a.substr(md,5)===Fc?(c=Fc,md+=5):(c=va,0===rd&&e(Gc)),c!==va&&(nd=b,c=Hc()),b=c),sd[d]={nextPos:md,result:b},b)}function Y(){var b,c,d,f,g,h,i,j,k=65*md+44,l=sd[k];if(l)return md=l.nextPos,l.result;if(b=md,91===a.charCodeAt(md)?(c=pb,md++):(c=va,0===rd&&e(qb)),c!==va)if(d=na(),d!==va)if(f=Q(),f!==va){for(g=[],h=md,i=ma(),i!==va?(j=Q(),j!==va?(i=[i,j],h=i):(md=h,h=va)):(md=h,h=va);h!==va;)g.push(h),h=md,i=ma(),i!==va?(j=Q(),j!==va?(i=[i,j],h=i):(md=h,h=va)):(md=h,h=va);g!==va?(h=na(),h!==va?(93===a.charCodeAt(md)?(i=rb,md++):(i=va,0===rd&&e(sb)),i!==va?(nd=b,c=za(f,g),b=c):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)}else md=b,b=va;else md=b,b=va;else md=b,b=va;return b===va&&(b=md,91===a.charCodeAt(md)?(c=pb,md++):(c=va,0===rd&&e(qb)),c!==va?(d=na(),d!==va?(93===a.charCodeAt(md)?(f=rb,md++):(f=va,0===rd&&e(sb)),f!==va?(nd=b,c=Ic(),b=c):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)),sd[k]={nextPos:md,result:b},b}function Z(){var b,c,d,f,g,h,i,j,k=65*md+45,l=sd[k];if(l)return md=l.nextPos,l.result;if(b=md,123===a.charCodeAt(md)?(c=_a,md++):(c=va,0===rd&&e(ab)),c!==va)if(d=na(),d!==va)if(f=Q(),f!==va){for(g=[],h=md,i=ma(),i!==va?(j=Q(),j!==va?(i=[i,j],h=i):(md=h,h=va)):(md=h,h=va);h!==va;)g.push(h),h=md,i=ma(),i!==va?(j=Q(),j!==va?(i=[i,j],h=i):(md=h,h=va)):(md=h,h=va);g!==va?(h=na(),h!==va?(125===a.charCodeAt(md)?(i=bb,md++):(i=va,0===rd&&e(cb)),i!==va?(nd=b,c=za(f,g),b=c):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)}else md=b,b=va;else md=b,b=va;else md=b,b=va;return b===va&&(b=md,123===a.charCodeAt(md)?(c=_a,md++):(c=va,0===rd&&e(ab)),c!==va?(d=na(),d!==va?(125===a.charCodeAt(md)?(f=bb,md++):(f=va,0===rd&&e(cb)),f!==va?(nd=b,c=Ic(),b=c):(md=b,b=va)):(md=b,b=va)):(md=b,b=va)),sd[k]={nextPos:md,result:b},b}function $(){var b,c,d,f,g,h=65*md+46,i=sd[h];if(i)return md=i.nextPos,i.result;if(b=md,47===a.charCodeAt(md)?(c=Jc,md++):(c=va,0===rd&&e(Kc)),c!==va){if(d=md,f=[],Lc.test(a.charAt(md))?(g=a.charAt(md),md++):(g=va,0===rd&&e(Mc)),g!==va)for(;g!==va;)f.push(g),Lc.test(a.charAt(md))?(g=a.charAt(md),md++):(g=va,0===rd&&e(Mc));else f=va;d=f!==va?a.substring(d,md):f,d!==va?(47===a.charCodeAt(md)?(f=Jc,md++):(f=va,0===rd&&e(Kc)),f!==va?(nd=b,c=Nc(d),b=c):(md=b,b=va)):(md=b,b=va)}else md=b,b=va;return sd[h]={nextPos:md,result:b},b}function _(){var b,c,d,f=65*md+47,g=sd[f];if(g)return md=g.nextPos,g.result;if(b=md,c=[],Oc.test(a.charAt(md))?(d=a.charAt(md),md++):(d=va,0===rd&&e(Pc)),d!==va)for(;d!==va;)c.push(d),Oc.test(a.charAt(md))?(d=a.charAt(md),md++):(d=va,0===rd&&e(Pc));else c=va;return b=c!==va?a.substring(b,md):c,sd[f]={nextPos:md,result:b},b}function aa(){var b,c,d,f,g,h=65*md+48,i=sd[h];if(i)return md=i.nextPos,i.result;if(b=md,c=md,Oc.test(a.charAt(md))?(d=a.charAt(md),md++):(d=va,0===rd&&e(Pc)),d!==va){for(f=[],Qc.test(a.charAt(md))?(g=a.charAt(md),md++):(g=va,0===rd&&e(Rc));g!==va;)f.push(g),Qc.test(a.charAt(md))?(g=a.charAt(md),md++):(g=va,0===rd&&e(Rc));f!==va?(d=[d,f],c=d):(md=c,c=va)}else md=c,c=va;return b=c!==va?a.substring(b,md):c,sd[h]={nextPos:md,result:b},b}function ba(){var b,c,d,f,g,h=65*md+49,i=sd[h];if(i)return md=i.nextPos,i.result;if(b=md,c=md,Oc.test(a.charAt(md))?(d=a.charAt(md),md++):(d=va,0===rd&&e(Pc)),d!==va){for(f=[],Sc.test(a.charAt(md))?(g=a.charAt(md),md++):(g=va,0===rd&&e(Tc));g!==va;)f.push(g),Sc.test(a.charAt(md))?(g=a.charAt(md),md++):(g=va,0===rd&&e(Tc));f!==va?(d=[d,f],c=d):(md=c,c=va)}else md=c,c=va;return b=c!==va?a.substring(b,md):c,sd[h]={nextPos:md,result:b},b}function ca(){var b,c,d,f,g,h=65*md+50,i=sd[h];if(i)return md=i.nextPos,i.result;if(b=md,c=md,Uc.test(a.charAt(md))?(d=a.charAt(md),md++):(d=va,0===rd&&e(Vc)),d!==va){for(f=[],Wc.test(a.charAt(md))?(g=a.charAt(md),md++):(g=va,0===rd&&e(Xc));g!==va;)f.push(g),Wc.test(a.charAt(md))?(g=a.charAt(md),md++):(g=va,0===rd&&e(Xc));f!==va?(d=[d,f],c=d):(md=c,c=va)}else md=c,c=va;return b=c!==va?a.substring(b,md):c,sd[h]={nextPos:md,result:b},b}function da(){var b,c,d,f,g,h,i,j,k=65*md+51,l=sd[k];if(l)return md=l.nextPos,l.result;if(b=md,c=md,d=md,f=fa(),f!==va?(46===a.charCodeAt(md)?(g=Ab,md++):(g=va,0===rd&&e(Bb)),g!==va?(f=[f,g],d=f):(md=d,d=va)):(md=d,d=va),d===va&&(d=null),d!==va)if(f=ea(),f!==va){for(g=[],h=md,46===a.charCodeAt(md)?(i=Ab,md++):(i=va,0===rd&&e(Bb)),i!==va?(j=ea(),j!==va?(i=[i,j],h=i):(md=h,h=va)):(md=h,h=va);h!==va;)g.push(h),h=md,46===a.charCodeAt(md)?(i=Ab,md++):(i=va,0===rd&&e(Bb)),i!==va?(j=ea(),j!==va?(i=[i,j],h=i):(md=h,h=va)):(md=h,h=va);g!==va?(d=[d,f,g],c=d):(md=c,c=va)}else md=c,c=va;else md=c,c=va;return b=c!==va?a.substring(b,md):c,sd[k]={nextPos:md,result:b},b}function ea(){var b,c,d,f,g,h=65*md+52,i=sd[h];if(i)return md=i.nextPos,i.result;if(b=md,c=md,Yc.test(a.charAt(md))?(d=a.charAt(md),md++):(d=va,0===rd&&e(Zc)),d!==va){for(f=[],$c.test(a.charAt(md))?(g=a.charAt(md),md++):(g=va,0===rd&&e(_c));g!==va;)f.push(g),$c.test(a.charAt(md))?(g=a.charAt(md),md++):(g=va,0===rd&&e(_c));f!==va?(d=[d,f],c=d):(md=c,c=va)}else md=c,c=va;return b=c!==va?a.substring(b,md):c,sd[h]={nextPos:md,result:b},b}function fa(){var b,c,d,f,g,h=65*md+53,i=sd[h];if(i)return md=i.nextPos,i.result;if(b=md,c=md,Oc.test(a.charAt(md))?(d=a.charAt(md),md++):(d=va,0===rd&&e(Pc)),d!==va){for(f=[],Qc.test(a.charAt(md))?(g=a.charAt(md),md++):(g=va,0===rd&&e(Rc));g!==va;)f.push(g),Qc.test(a.charAt(md))?(g=a.charAt(md),md++):(g=va,0===rd&&e(Rc));f!==va?(d=[d,f],c=d):(md=c,c=va)}else md=c,c=va;return b=c!==va?a.substring(b,md):c,sd[h]={nextPos:md,result:b},b}function ga(){var b,c,d,f,g,h,i,j,k=65*md+54,l=sd[k];if(l)return md=l.nextPos,l.result;if(b=md,c=md,d=da(),d!==va){if(f=[],g=md,47===a.charCodeAt(md)?(h=Jc,md++):(h=va,0===rd&&e(Kc)),h!==va){if(i=[],Wc.test(a.charAt(md))?(j=a.charAt(md),md++):(j=va,0===rd&&e(Xc)),j!==va)for(;j!==va;)i.push(j),Wc.test(a.charAt(md))?(j=a.charAt(md),md++):(j=va,0===rd&&e(Xc));else i=va;i!==va?(h=[h,i],g=h):(md=g,g=va)}else md=g,g=va;for(;g!==va;)if(f.push(g),g=md,47===a.charCodeAt(md)?(h=Jc,md++):(h=va,0===rd&&e(Kc)),h!==va){if(i=[],Wc.test(a.charAt(md))?(j=a.charAt(md),md++):(j=va,0===rd&&e(Xc)),j!==va)for(;j!==va;)i.push(j),Wc.test(a.charAt(md))?(j=a.charAt(md),md++):(j=va,0===rd&&e(Xc));else i=va;i!==va?(h=[h,i],g=h):(md=g,g=va)}else md=g,g=va;f!==va?(d=[d,f],c=d):(md=c,c=va)}else md=c,c=va;return b=c!==va?a.substring(b,md):c,sd[k]={nextPos:md,result:b},b}function ha(){var b,c,d,f=65*md+55,g=sd[f];if(g)return md=g.nextPos,g.result;if(b=md,c=[],ad.test(a.charAt(md))?(d=a.charAt(md),md++):(d=va,0===rd&&e(bd)),d!==va)for(;d!==va;)c.push(d),ad.test(a.charAt(md))?(d=a.charAt(md),md++):(d=va,0===rd&&e(bd));else c=va;return b=c!==va?a.substring(b,md):c,sd[f]={nextPos:md,result:b},b}function ia(){var b,c,d,f,g,h=65*md+56,i=sd[h];if(i)return md=i.nextPos,i.result;if(b=md,c=[],d=md,f=md,rd++,cd.test(a.charAt(md))?(g=a.charAt(md),md++):(g=va,0===rd&&e(dd)),rd--,g===va?f=void 0:(md=f,f=va),f!==va?(a.length>md?(g=a.charAt(md),md++):(g=va,0===rd&&e(Sb)),g!==va?(f=[f,g],d=f):(md=d,d=va)):(md=d,d=va),d!==va)for(;d!==va;)c.push(d),d=md,f=md,rd++,cd.test(a.charAt(md))?(g=a.charAt(md),md++):(g=va,0===rd&&e(dd)),rd--,g===va?f=void 0:(md=f,f=va),f!==va?(a.length>md?(g=a.charAt(md),md++):(g=va,0===rd&&e(Sb)),g!==va?(f=[f,g],d=f):(md=d,d=va)):(md=d,d=va);else c=va;return b=c!==va?a.substring(b,md):c,sd[h]={nextPos:md,result:b},b}function ja(){var b,c,d,f,g,h=65*md+57,i=sd[h];return i?(md=i.nextPos,i.result):(b=md,c=md,d=na(),d!==va?(a.substr(md,3)===gc?(f=gc,md+=3):(f=va,0===rd&&e(hc)),f!==va?(g=na(),g!==va?(d=[d,f,g],c=d):(md=c,c=va)):(md=c,c=va)):(md=c,c=va),b=c!==va?a.substring(b,md):c,sd[h]={nextPos:md,result:b},b)}function ka(){var b,c,d,f,g,h=65*md+58,i=sd[h];return i?(md=i.nextPos,i.result):(b=md,c=md,d=na(),d!==va?(124===a.charCodeAt(md)?(f=Lb,md++):(f=va,0===rd&&e(Mb)),f!==va?(g=na(),g!==va?(d=[d,f,g],c=d):(md=c,c=va)):(md=c,c=va)):(md=c,c=va),b=c!==va?a.substring(b,md):c,sd[h]={nextPos:md,result:b},b)}function la(){var b,c,d,f,g,h=65*md+59,i=sd[h];return i?(md=i.nextPos,i.result):(b=md,c=md,d=na(),d!==va?(44===a.charCodeAt(md)?(f=ed,md++):(f=va,0===rd&&e(fd)),f!==va?(g=na(),g!==va?(d=[d,f,g],c=d):(md=c,c=va)):(md=c,c=va)):(md=c,c=va),b=c!==va?a.substring(b,md):c,sd[h]={nextPos:md,result:b},b)}function ma(){var b,c,d=65*md+60,e=sd[d];return e?(md=e.nextPos,e.result):(b=md,c=la(),c===va&&(c=na()),b=c!==va?a.substring(b,md):c,sd[d]={nextPos:md,result:b},b)}function na(){var b,c,d,e=65*md+61,f=sd[e];if(f)return md=f.nextPos,f.result;for(b=md,c=[],d=pa(),d===va&&(d=oa());d!==va;)c.push(d),d=pa(),d===va&&(d=oa());return b=c!==va?a.substring(b,md):c,sd[e]={nextPos:md,result:b},b}function oa(){var b,c,d,f,g,h,i,j=65*md+62,k=sd[j];if(k)return md=k.nextPos,k.result;if(b=md,c=md,35===a.charCodeAt(md)?(d=gd,md++):(d=va,0===rd&&e(hd)),d!==va){for(f=[],g=md,h=md,rd++,id.test(a.charAt(md))?(i=a.charAt(md),md++):(i=va,0===rd&&e(jd)),rd--,i===va?h=void 0:(md=h,h=va),h!==va?(a.length>md?(i=a.charAt(md),md++):(i=va,0===rd&&e(Sb)),i!==va?(h=[h,i],g=h):(md=g,g=va)):(md=g,g=va);g!==va;)f.push(g),g=md,h=md,rd++,id.test(a.charAt(md))?(i=a.charAt(md),md++):(i=va,0===rd&&e(jd)),rd--,i===va?h=void 0:(md=h,h=va),h!==va?(a.length>md?(i=a.charAt(md),md++):(i=va,0===rd&&e(Sb)),i!==va?(h=[h,i],g=h):(md=g,g=va)):(md=g,g=va);f!==va?(id.test(a.charAt(md))?(g=a.charAt(md),md++):(g=va,0===rd&&e(jd)),g===va&&(g=null),g!==va?(d=[d,f,g],c=d):(md=c,c=va)):(md=c,c=va)}else md=c,c=va;return b=c!==va?a.substring(b,md):c,sd[j]={nextPos:md,result:b},b}function pa(){var b,c,d,f=65*md+63,g=sd[f];if(g)return md=g.nextPos,g.result;if(b=md,c=[],kd.test(a.charAt(md))?(d=a.charAt(md),md++):(d=va,0===rd&&e(ld)),d!==va)for(;d!==va;)c.push(d),kd.test(a.charAt(md))?(d=a.charAt(md),md++):(d=va,0===rd&&e(ld));else c=va;return b=c!==va?a.substring(b,md):c,sd[f]={nextPos:md,result:b},b}function qa(){var b,c,d,f=65*md+64,g=sd[f];return g?(md=g.nextPos,g.result):(b=md,c=md,rd++,a.length>md?(d=a.charAt(md),md++):(d=va,0===rd&&e(Sb)),rd--,d===va?c=void 0:(md=c,c=va),b=c!==va?a.substring(b,md):c,sd[f]={nextPos:md,result:b},b)}function ra(a,b){for(var c=a?[a]:[],d=0;d<b.length;d++)c[d+1]=b[d][b[d].length-1];return c}function sa(a,b){return b&&(a.metadata=b),a}var ta,ua=arguments.length>1?arguments[1]:{},va={},wa={system:g,type:l,heading:v,attribute:w,contract:F,constraint:o,literal:Q,metadata:O,lambda_expr:K,type_def:k,import_def:i},xa=g,ya=function(a,b,c,d){var e={types:b};return a&&a.length>0&&(e.imports=a),d&&(d={name:"Main",type:d},c&&(d.metadata=c),e.types.push(d)),e},za=function(a,b){return ra(a,b)},Aa="@import",Ba={type:"literal",value:"@import",description:'"@import"'},Ca="as",Da={type:"literal",value:"as",description:'"as"'},Ea=function(a,b){return{qualifier:b,from:a}},Fa=function(a){return{from:a}},Ga="=",Ha={type:"literal",value:"=",description:'"="'},Ia=function(a,b,c){return sa({name:b,type:c},a)},Ja=function(a,b,c){var d=ra(b,c);return{union:sa({candidates:d})}},Ka=function(a,b,c){return{sub:sa({superType:b,constraints:c},a)}},La="(",Ma={type:"literal",value:"(",description:'"("'},Na=")",Oa={type:"literal",value:")",description:'")"'},Pa=function(a,b){for(var c=0;c<b.length;c++)b[c]["native"]=[a,b[c]["native"]];return b},Qa="::",Ra={type:"literal",value:"::",description:'"::"'},Sa=function(a){return[{"native":a}]},Ta=function(a){return[{regexp:a}]},Ua=function(a){return[{range:a}]},Va=function(a){return[{set:a}]},Wa=function(a){return[a]},Xa=":",Ya={type:"literal",value:":",description:'":"'},Za=function(a,b,c){return sa({name:b,"native":c.trim()},a)},$a=function(a){return{"native":a.trim()}},_a="{",ab={type:"literal",value:"{",description:'"{"'},bb="}",cb={type:"literal",value:"}",description:'"}"'},db=function(a,b){return{tuple:sa({heading:b},a)}},eb="{{",fb={type:"literal",value:"{{",description:'"{{"'},gb="}}",hb={type:"literal",value:"}}",description:'"}}"'},ib=function(a,b){return{relation:sa({heading:b},a)}},jb=function(a,b,c,d){var e=ra(a,b),f={attributes:e};return f.options={allowExtra:d},f},kb=function(a,b,c){var d=ra(a,b),e={attributes:d};return c&&(e.options={allowExtra:{any:{}}}),e},lb="?",mb={type:"literal",value:"?",description:'"?"'},nb=function(a,b,c,d){var e={name:b,type:d};return c&&(e.required=!1),sa(e,a)},ob=function(a,b){return{set:sa({elmType:b},a)}},pb="[",qb={type:"literal",value:"[",description:'"["'},rb="]",sb={type:"literal",value:"]",description:'"]"'},tb=function(a,b){return{seq:sa({elmType:b},a)}},ub="<",vb={type:"literal",value:"<",description:'"<"'},wb=">",xb={type:"literal",value:">",description:'">"'},yb=function(a,b,c){var d=ra(b,c);return{struct:sa({componentTypes:d},a)}},zb=function(a,b){a||(a={});for(var c,d=[],e=0;e<b.length;e++)c=b[e],c.external||c.explicit||(a.jsType?c.internal=a.jsType:c.identity={}),d[e]=c;return a.contracts=d,{adt:a}},Ab=".",Bb={type:"literal",value:".",description:'"."'},Cb=function(a,b){var c={};return b&&(c.jsType=b[1]),sa(c,a)},Db="\\",Eb={type:"literal",value:"\\",description:'"\\\\"'},Fb=function(a,b,c){return a.explicit={dress:b,undress:c},a},Gb=function(a,b){return a.external=b,a},Hb=function(a,b,c){return sa({name:b,infoType:c},a)},Ib=function(a){return{any:sa({},a)}},Jb=function(a,b){return{builtin:sa({jsType:b},a)}},Kb=function(a){return{ref:{typeName:a}}},Lb="|",Mb={type:"literal",value:"|",description:'"|"'},Nb=function(a,b){return[a.trim(),b.trim()]},Ob="()",Pb={type:"literal",value:"()",description:'"()"'},Qb=/^[(,)]/,Rb={type:"class",value:"[(,)]",description:"[(,)]"},Sb={type:"any",description:"any character"},Tb="/-",Ub={type:"literal",value:"/-",description:'"/-"'},Vb="-/",Wb={type:"literal",value:"-/",description:'"-/"'},Xb=function(a,b){for(var c=ra(a,b),d={},e=0;e<c.length;e++)d[c[e][0]]=c[e][1];return d},Yb=function(a){return{description:a.toString().trim()}},Zb=function(a,b){return[a,b]},$b=/^["]/,_b={type:"class",value:'["]',description:'["]'},ac=/^[\\]/,bc={type:"class",value:"[\\\\]",description:"[\\\\]"},cc=function(a){return a.substring(1,a.length-1).replace(/\\"/,'"')},dc="..",ec={type:"literal",value:"..",description:'".."'},fc=function(a,b){return{min:a,min_inclusive:!0,max:b,max_inclusive:!0}},gc="...",hc={type:"literal",value:"...",description:'"..."'},ic=function(a,b){return{min:a,min_inclusive:!0,max:b,max_inclusive:!1}},jc=function(a){return{min:a,min_inclusive:!0}},kc="&",lc={type:"literal",value:"&",description:'"&"'},mc=function(a){return a},nc=/^[a-zA-Z_$]/,oc={type:"class",value:"[a-zA-Z_$]",description:"[a-zA-Z_$]"},pc=/^[a-zA-Z0-9_$]/,qc={type:"class",value:"[a-zA-Z0-9_$]",description:"[a-zA-Z0-9_$]"},rc=function(a){return a},sc=/^[1-9]/,tc={type:"class",value:"[1-9]",description:"[1-9]"},uc=/^[0-9]/,vc={type:"class",value:"[0-9]",description:"[0-9]"},wc=/^[0]/,xc={type:"class",value:"[0]",description:"[0]"},yc=/^[\-]/,zc={type:"class",value:"[-]",description:"[-]"},Ac=function(a){return parseInt(a)},Bc=function(a){return parseFloat(a)},Cc="true",Dc={type:"literal",value:"true",description:'"true"'},Ec=function(){return!0},Fc="false",Gc={type:"literal",value:"false",description:'"false"'},Hc=function(){return!1},Ic=function(){return[]},Jc="/",Kc={type:"literal",value:"/",description:'"/"'},Lc=/^[^\/]/,Mc={type:"class",value:"[^/]",description:"[^/]"},Nc=function(a){return a},Oc=/^[a-z]/,Pc={type:"class",value:"[a-z]",description:"[a-z]"},Qc=/^[a-z0-9]/,Rc={type:"class",value:"[a-z0-9]",description:"[a-z0-9]"},Sc=/^[a-zA-Z_]/,Tc={type:"class",value:"[a-zA-Z_]",description:"[a-zA-Z_]"},Uc=/^[a-z$_]/,Vc={type:"class",value:"[a-z$_]",description:"[a-z$_]"},Wc=/^[a-zA-Z0-9_]/,Xc={type:"class",value:"[a-zA-Z0-9_]",description:"[a-zA-Z0-9_]"},Yc=/^[A-Z]/,Zc={type:"class",value:"[A-Z]",description:"[A-Z]"},$c=/^[a-zA-Z]/,_c={type:"class",value:"[a-zA-Z]",description:"[a-zA-Z]"},ad=/^[a-zA-Z0-9:.]/,bd={type:"class",value:"[a-zA-Z0-9:.]",description:"[a-zA-Z0-9:.]"},cd=/^[ \n\t]/,dd={type:"class",value:"[ \\n\\t]",description:"[ \\n\\t]"},ed=",",fd={type:"literal",value:",",description:'","'},gd="#",hd={type:"literal",value:"#",description:'"#"'},id=/^[\n]/,jd={type:"class",value:"[\\n]",description:"[\\n]"},kd=/^[ \t\n]/,ld={type:"class",value:"[ \\t\\n]",description:"[ \\t\\n]"},md=0,nd=0,od=[{line:1,column:1,seenCR:!1}],pd=0,qd=[],rd=0,sd={};if("startRule"in ua){if(!(ua.startRule in wa))throw new Error("Can't start parsing from rule \""+ua.startRule+'".');xa=wa[ua.startRule]}if(ta=xa(),ta!==va&&md===a.length)return ta;throw ta!==va&&md<a.length&&e({type:"end",description:"end of input"}),f(null,qd,pd<a.length?a.charAt(pd):null,pd<a.length?d(pd,pd+1):d(pd,pd))}return a(b,Error),{SyntaxError:b,parse:c}}()},{}],12:[function(a,b,c){(function(c){b.exports=function(){var b=(a("./stdlib/data"),function(a,b){return function(c,d){for(var e=0;e<a.length;e++)if(!a[e](c,d))return null;return b(c,d)}}),d=function(a,b,c){try{var f=a+(b||"");return e.statSync(f),[f,b||f.match(/(\.[a-z]{3,4})$/)[1]]}catch(g){if(0==c.length)throw new Error("No such file: `"+a+"`");return d(a,c[0],c.slice(1))}},e=a("fs"),f=b([function(a){return!!e}],function(a,b){var c=a.match(/^file:\/\/(.*?)$/);if(!c)return null;var f=d(c[1],null,[".fio",".json"]),g=f[0],h=f[1],i=e.readFileSync(g).toString(),j=null;switch(h){case".fio":j=b.Finitio.parse(i);break;case".json":j=JSON.parse(i);break;default:throw new Error("Unrecognized extension: `"+h+"`")}return[a,j]}),g=b([],function(a,b){var c=a.match(/^(\.\/)|^(\.\.\/)/);if(!c)return null;var d=b.sourceUrl;if(!d)throw new Error("Unable to resolve relative path: `"+a+"`");return d=d.replace(/\/[^\/]+$/,""),c[2]&&(d=d.replace(/\/[^\/]+$/,"")),d=d+"/"+a.slice(c[0].length),b.importResolver(d,b,{raw:!0})}),h=b([function(a){return!!c}],function(b,c){var d=b.match(/^finitio\/(.*)$/);if(!d)return null;var e=d[1];try{return a("./stdlib/"+e)(c,{raw:!0})}catch(f){throw new Error("No such stdlib system: `"+b+"`",f)}}),i=function(a,b,c){for(var d,e,f=Object.keys(i),g=0;g<f.length;g++)if(d=i[f[g]],e=d(a,b)){if(c&&c.raw)return e;var h=b.Finitio.world(b,{sourceUrl:e[0]});return b.Finitio.system(e[1],h)}throw new Error("Unable to resolve: `"+a+"`")};return i.File=f,i.StdLib=h,i.Relative=g,i}()}).call(this,"/build/src/finitio")},{"./stdlib/data":13,fs:39}],13:[function(a,b,c){b.exports=function(){var b={"http://finitio.io/0.4/stdlib/data":{types:[{name:"Any",type:{any:{}},metadata:{description:"Recognizes everything"}},{name:"Nil",type:{sub:{superType:{any:{}},constraints:[{"native":["v","v === null"]}]}},metadata:{description:"Recognizes JavaScript's null"}},{name:"Boolean",type:{builtin:{jsType:"Boolean"}},metadata:{description:"Recognizes true and false"}},{name:"True",type:{sub:{superType:{builtin:{jsType:"Boolean"}},constraints:[{"native":["b","b === true"]}]}},metadata:{description:"Only true"}},{name:"False",type:{sub:{superType:{builtin:{jsType:"Boolean"}},constraints:[{"native":["b","b === false"]}]}},metadata:{description:"Only false"}},{name:"Numeric",type:{builtin:{jsType:"Number"}},metadata:{description:"Recognizes any number"}},{name:"Real",type:{sub:{superType:{builtin:{jsType:"Number"}},constraints:[{"native":["n","(n===0.0) || !(n % 1 === 0)"]}]}},metadata:{description:"Recognizes only real numbers"}},{name:"Integer",type:{sub:{superType:{builtin:{jsType:"Number"}},constraints:[{"native":["n","n % 1 === 0"]}]}},metadata:{description:"Recognizes only integer numbers"}},{name:"String",type:{builtin:{jsType:"String"}},metadata:{description:"Recognizes every string"}},{name:"Date",type:{adt:{jsType:"Date",contracts:[{name:"iso8601",infoType:{builtin:{jsType:"String"}},external:"Finitio.Contracts.Date.iso8601"},{name:"milliseconds",infoType:{builtin:{jsType:"Number"}},external:"Finitio.Contracts.Date.milliseconds"}]}},metadata:{description:"Recognizes valid dates"}},{name:"Time",type:{adt:{jsType:"Date",contracts:[{name:"iso8601",infoType:{builtin:{jsType:"String"}},external:"Finitio.Contracts.Time.iso8601"},{name:"milliseconds",infoType:{builtin:{jsType:"Number"}},external:"Finitio.Contracts.Time.milliseconds"}]}},metadata:{description:"Recognizes valid times"}}]}},c=function(a){return function(c,d,e){var f=b[c];if(f)return e&&e.raw?[c,f]:d.Finitio.system(f,d);if(a)return a(c,d,e);throw new Error("Unable to resolve: `"+c+"`")}};return function(b,d){return b||(b=a("finitio").World),b=b.Finitio.world(b,{importResolver:c(b.importResolver)}),b.importResolver("http://finitio.io/0.4/stdlib/data",b,d)}}()},{}],14:[function(a,b,c){(function(){var c,d,e,f;c=a("./utils"),e=a("./ic").ObjectType,f=a("../type"),d=function(){function a(a,b,d,e){this.name=a,this.type=b,this.required=d,this.metadata=e,"string"!=typeof this.name&&c.argumentError("String expected for attribute name, got:",this.name),this.type instanceof f||c.argumentError("Type expected for attribute domain, got:",this.type),null==this.required&&(this.required=!0),"boolean"!=typeof this.required&&c.argumentError("Boolean expected for required, got:",this.required)}return e(a,["name","type","required","metadata"]),a.prototype.fetchType=function(){return this.type},a.prototype.fetchOn=function(a,b){if("object"!=typeof a&&c.argumentError("Object expected, got:",a),null==a[this.name]){if(null!=b)return b();throw new Error("Key `"+this.name+"` not found")}return a[this.name]},a.prototype.isSuperAttributeOf=function(a){return this===a||this.name===a.name&&(!this.required||a.required)&&this.type.isSuperTypeOf(a.type)},a.prototype.equals=function(b){return this===b||b instanceof a&&this.name===b.name&&this.required===b.required&&this.type.equals(b.type)},a.prototype.low=function(){return new a(this.name,this.type.low(),this.required)},a.prototype.resolveProxies=function(a){return this.type.resolveProxies(a)},a.prototype.toString=function(){return this.required?this.name+" : "+this.type:this.name+" :? "+this.type},a}(),b.exports=d}).call(this)},{"../type":26,"./ic":21,"./utils":24}],15:[function(a,b,c){(function(){var c,d,e,f=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},g={}.hasOwnProperty;c=a("./utils"),e=a("../type"),d=function(a){function b(a,d,f){this.elmType=a,this.name=d,this.metadata=f,this.elmType instanceof e||c.argumentError("Finitio.Type expected, got:",this.elmType),b.__super__.constructor.call(this,this.name,this.metadata)}return f(b,a),b.prototype._equals=function(a){return this===a||a instanceof this.constructor&&this.elmType.equals(a.elmType)||b.__super__._equals.apply(this,arguments)},b.prototype._isSuperTypeOf=function(a){return this===a||a instanceof this.constructor&&this.elmType.isSuperTypeOf(a.elmType)||b.__super__._isSuperTypeOf.apply(this,arguments)},b.prototype._undress=function(a,b){var d,e;return d=this.elmType,e=b.elmType,e.isSuperTypeOf(d)?a:c.map(a,function(a){return d.undress(a,e)})},b}(e),b.exports=d}).call(this)},{"../type":26,"./utils":24}],16:[function(a,b,c){(function(){var c,d,e,f=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},g={}.hasOwnProperty;c=a("./utils"),d=a("./ic").AbstractType,e=function(){function a(a,b,d){this.name=a,this["native"]=b,this.metadata=d,null!=this.name&&"string"!=typeof this.name&&c.argumentError("String expected for constraint name, got: ",this.name)}return a.prototype.isAnonymous=function(){return null==this.name},a.prototype.accept=function(a){throw new Error("Constraint is an abstract class")},a.prototype.equals=function(b){return this===b||b instanceof a&&this["native"]===b["native"]},a.prototype.toString=function(){var a;return a=this.nativeToString(),this.isAnonymous()||(a=this.name+": "+a),a},a.prototype.nativeToString=function(){return this["native"].toString()},a}(),e.Native=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.kind="native",b.prototype.accept=function(a){return this["native"](a)},b.prototype.nativeToString=function(){return this["native"].finitioSourceCode||"..."},b}(e),e.Regexp=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.kind="regexp",b.prototype.accept=function(a){return this["native"].test(a)},b}(e),e.Range=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.kind="range",b.prototype.accept=function(a){return(this["native"].min_inclusive?a>=this["native"].min:a>this["native"].min)&&(void 0===this["native"].max||(this["native"].max_inclusive?a<=this["native"].max:a<this["native"].max))},b.prototype.equals=function(a){return this===a||a instanceof e.Range&&(this["native"].min===a["native"].min&&this["native"].min_inclusive===a["native"].min_inclusive&&(void 0===this["native"].max&&void 0===a["native"].max||this["native"].max===a["native"].max&&this["native"].max_inclusive===a["native"].max_inclusive))},b.prototype.nativeToString=function(){return this["native"].max?this["native"].max_inclusive?this["native"].min+".."+this["native"].max:this["native"].min+"..."+this["native"].max:this["native"].min+".."},b}(e),e.Set=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.kind="set",b.prototype.accept=function(a){return c.contains(this["native"],a)},b.prototype.equals=function(a){return this===a||a instanceof e.Set&&(this["native"].length===a["native"].length&&0===c.difference(this["native"],a["native"]).length)},b.prototype.nativeToString=function(){return"{ "+this["native"].join(" ")+" }"},b}(e),d(e,[e.Native,e.Regexp,e.Range,e.Set],["name","native","metadata"],1),b.exports=e}).call(this)},{"./ic":21,"./utils":24}],17:[function(a,b,c){(function(){var c,d,e,f,g=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},h={}.hasOwnProperty;d=a("./ic").AbstractType,c=a("./utils"),f=a("../type"),e=function(){function a(a,b,d,e){this.name=a,this.infoType=b,this["native"]=d,this.metadata=e,c.isString(this.name)||c.argumentError("String expected, got:",this.name),this.infoType instanceof f||c.argumentError("Finitio.Type expected, got:",this.infoType)}return a.prototype.fetchType=function(){return this.infoType},a.prototype.resolveProxies=function(a){return this.infoType.resolveProxies(a)},a.prototype.toString=function(){return"<"+this.name+"> "+this.infoType.toString()},a}(),e.Explicit=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.kind="explicit",b.prototype.dress=function(a,b){return this["native"].dress(a,b)},b.prototype.undress=function(a,b){return this["native"].undress(a)},b}(e),e.External=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.kind="external",b.prototype.dress=function(a,b){return this["native"].dress(a,b)},b.prototype.undress=function(a,b){return this["native"].undress(a)},b}(e),e.Internal=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.kind="internal",b.prototype.dress=function(a,b){return this["native"][this.name](a,b)},b.prototype.undress=function(a,b){return a["to"+c.capitalize(this.name)]()},b}(e),e.Identity=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.kind="identity",b.prototype.dress=function(a,b){return a},b.prototype.undress=function(a,b){return a},b}(e),d(e,[e.Explicit,e.External,e.Internal,e.Identity],["name","infoType","native","metadata"],2),b.exports=e}).call(this)},{"../type":26,"./ic":21,"./utils":24}],18:[function(a,b,c){(function(){var a,c;a=function(){function a(a,b,c){this.world=a,this.result=b,this.error=c}return a.prototype.success=function(b){return new a(this.world,b,(void 0))},a.prototype.failure=function(b,c,d){return c={error:c},null!=d&&(c.children=d),new a(this.world,(void 0),c)},a.prototype.find=function(a,b,d){var e,f,g,h,i,j;for(e=[],g=h=0,j=a.length;0<=j?h<j:h>j;g=0<=j?++h:--h){if(f=a[g],i=b(f,g),i.isSuccess())return i;null==i.error.location&&c(i.error,f,g),e.push(i.error)}return d(e)},a.prototype.refine=function(a,b,d,e){var f,g,h,i,j,k;if(a.isSuccess()){for(f=[],h=i=0,k=b.length;(0<=k?i<k:i>k)&&(g=b[h],j=d(a,g,h),!j.isFailure()||(null==j.error.location&&c(j.error,g,h),f.push(j.error),!this.isFailfast()));h=0<=k?++i:--i);return 0===f.length?a:e(f)}return e([a.error])},a.prototype.map=function(a,b,c){var d,e,f;return e=[],f=this.success(e),d=function(a,c,d){var f;return f=b(c,d),f.onSuccess(function(a){return e.push(a),f})},this.refine(f,a,d,c)},a.prototype.isFailfast=function(){return this.world&&this.world.failfast},a.prototype.isSuccess=function(){return void 0===this.error},a.prototype.isFailure=function(){return!this.isSuccess()},a.prototype.onSuccess=function(a){return this.isSuccess()?a(this.result):this},a.prototype.onFailure=function(a){return this.isSuccess()?this:a(this.error)},a}(),c=function(a,b,c){var d;return d=b.name,null==d&&(d=c),a.location=d},b.exports=a}).call(this)},{}],19:[function(a,b,c){(function(){var c;c=a("./utils"),b.exports=function(a,b,d,e){return null==d&&(d=b.slice(0,b.length-1)),null==e&&(e=function(a){return this[b][a]}),a.prototype.fetch=function(a,b){var c;if(c=e.bind(this)(a),null!=c)return c;if(null!=b)return b(this,a);throw new Error("No such "+d+" `"+a+"`")},a.prototype.fetchPath=function(a,b){var e;if(e=c.inject(a.split("/"),this,function(a,b){return a&&a.fetch&&a.fetch(b,function(){return null})}),null!=e)return e;if(null!=b)return b();throw new Error("No such "+d+" `"+a+"`")}}}).call(this)},{"./utils":24}],20:[function(a,b,c){(function(){var c,d,e,f,g,h;h=a("./ic").ObjectType,c=a("./utils"),f=a("./fetchable"),e=a("./attribute"),d=a("../type/any_type"),g=function(){function a(a,d){var f;this.attributes=a,this.options=d,c.isArray(this.attributes)&&c.every(this.attributes,function(a){return a instanceof e})||c.argumentError("Array of Attribute expected"),f={},c.each(this.attributes,function(a){return function(a){return null!=f[a.name]&&c.argumentError("Attribute names must be unique"),f[a.name]=a}}(this)),null==this.options&&(this.options={}),c.isObject(this.options)||c.argumentError("Hash of options expected"),this.options=c.extend({},b,this.options)}var b,g;return h(a,["attributes","options"]),f(a,"attributes","attribute",function(a){return this.getAttr(a)}),b={allowExtra:!1},a.prototype.getAttr=function(a){return c.find(this.attributes,function(b){return b.name===a})},a.prototype.size=function(){return this.attributes.length},a.prototype.isEmpty=function(){return 0===this.size()},a.prototype.allowExtra=function(a){return!!this.options.allowExtra&&(null==a||this.getExtraType()._isSuperTypeOf(a))},a.prototype.allowExtraValue=function(a){return!!this.allowExtra()&&(null==a||this.getExtraType().include(a))},a.prototype.getExtraType=function(){return this.options.allowExtra},a.prototype.multi=function(){return this.allowExtra()||c.any(this.attributes,function(a){return!a.required})},a.prototype.each=function(a){return c.each(this.attributes,a)},a.prototype.toString=function(){var a,b;return b=c.map(this.attributes,function(a){return a.toString()}).join(", "),this.allowExtra()&&(a=this.options.allowExtra,this.isEmpty()||(b+=", "),b+="...",a instanceof d||(b+=": "+a.toString())),b},a.prototype.names=function(){return c.map(this.attributes,function(a){return a.name;
})},a.prototype.isSuperHeadingOf=function(b){var d,e,f,h;return this===b||b instanceof a&&(f=c.triSplit(g(this),g(b)),h=f[0],d=f[1],e=f[2],!!c.every(h,function(a){return a[0].isSuperAttributeOf(a[1])})&&(!!c.every(d,function(a){return!a.required})&&(!!(!b.allowExtra()||this.allowExtra()&&this.allowExtra(b.options.allowExtra))&&(this.allowExtra()||c.isEmpty(e)))))},a.prototype.equals=function(b){return this===b||b instanceof a&&this.attributesEquals(b)&&this.optionsEquals(b)},a.prototype.attributesEquals=function(a){return this.attributes.length===a.attributes.length&&c.every(this.attributes,function(b){return b.equals(a.getAttr(b.name))})},a.prototype.optionsEquals=function(a){return c.size(this.options)===c.size(a.options)&&c.every(this.options,function(b,c){return b===a.options[c]})},a.prototype.low=function(){var b,d;return b=c.map(this.attributes,function(a){return a.low()}),d=this.options,new a(b,d)},g=function(a){var b;return b={},c.each(a.attributes,function(a){return b[a.name]=a}),b},a.prototype.resolveProxies=function(a){if(c.each(this.attributes,function(b){return b.resolveProxies(a)}),this.options.allowExtra)return this.options.allowExtra.resolveProxies(a)},a}(),b.exports=g}).call(this)},{"../type/any_type":28,"./attribute":14,"./fetchable":19,"./ic":21,"./utils":24}],21:[function(a,b,c){b.exports=function(){function b(a,b){var c=function(){};c.prototype=a.prototype;var d=new c,e=a.apply(d,b);return Object(e)===e?e:d}var c=a("./utils"),d={};return d.AbstractType=function(a,d,e,f){a.info=function(g){var h=c.find(d,function(a){return!!g[a.prototype.kind]});if(h){for(var i=[],j=0;j<e.length;j++){var k=j==f?h.prototype.kind:e[j],l=g[k];l&&(i[j]=l)}return b(h,i)}dump=JSON.stringify(g),c.argumentError("Unrecognized "+a.name+" info: ",dump)},a.prototype.toInfo=function(){for(var a={},b=0;b<e.length;b++){var c=b==f?this.kind:e[b],d=this[e[b]];void 0!=d&&(a[c]=d)}return a}},d.ObjectType=function(a,c,d){a.info=function(e,f){for(var g=[],h=0;h<c.length;h++){var i=e[c[h]];void 0!=i&&(g[h]=i)}var j=b(a,g);return d&&d(j,f),j},a.prototype.toInfo=function(){for(var a={},b=0;b<c.length;b++){var d=c[b],e=this[d];void 0!=e&&(a[d]=e)}return a}},d.TypeType=function(a,b,c){a.prototype.generator=b,d.ObjectType(a,c)},d}()},{"./utils":24}],22:[function(a,b,c){(function(){var c,d;d=a("../support/ic").ObjectType,c=function(){function a(a,b){this.from=a,this.qualifier=b}return d(a,["from","qualifier"],function(a,b){return a.system=b.importResolver(a.from,b)}),a}(),b.exports=c}).call(this)},{"../support/ic":21}],23:[function(a,b,c){b.exports=function(){var b=(a("../support/utils"),a("../support/attribute")),c=a("../support/heading"),d=a("../support/contract"),e=a("../support/constraint"),f=a("../support/import"),g=a("../contracts"),h=a("../type"),i=a("../type/ad_type"),j=a("../type/builtin_type"),l=a("../type/tuple_type"),m=a("../type/relation_type"),n=a("../type/union_type"),o=a("../type/seq_type"),p=a("../type/set_type"),q=a("../type/any_type"),r=a("../type/struct_type"),s=a("../type/sub_type"),t=a("../type/type_ref"),u=a("../type/type_def"),v=a("../system"),w={},x={Js:w};w.Object=j.info({jsType:Object}),w.String=j.info({jsType:String}),w.Boolean=j.info({jsType:Boolean}),w.Number=j.info({jsType:Number}),w.Array=j.info({jsType:Array}),w.Type=i.info({jsType:Function,contracts:[d.info({name:"jsTypeName",infoType:w.String,explicit:{dress:function(a,b){return g.JsType.name.dress(a,b.JsTypes)},undress:g.JsType.name.undress}})]}),w.Empty=s.info({superType:q.info({}),constraints:[e.info({name:"default","native":function(a){if(null===a||void 0===a)return!1;for(k in a)return!1;return!0}})]}),w.FunctionDefn=o.info({elmType:w.String}),w.Function=i.info({jsType:Function,contracts:[d.info({name:"defn",infoType:w.FunctionDefn,external:g.Expression.defn}),d.info({name:"reference",infoType:w.String,external:g.Function.reference})]}),w.RegExp=i.info({jsType:RegExp,contracts:[d.info({name:"src",infoType:w.String,explicit:{dress:function(a){return new RegExp(a)},undress:function(a){return a.source}}})]});var y=b.info({name:"metadata",type:w.Object,required:!1}),z=function(a,b,c,e){return i.info({jsType:b,contracts:[d.info({name:e,infoType:c,internal:b})]})},A=function(a,b,d){d.push(y);var e=l.info({heading:c.info({attributes:d})}),f=z(a,b,e,"info");return f},B=[j.info({jsType:h})];x.Type=z("Type",h,n.info({candidates:B}),"factor"),x.Types=o.info({elmType:x.Type});var C=function(a,d,e){var f=l.info({heading:c.info({attributes:e.concat([y])})}),g=z(a,d,f,"info"),h=l.info({heading:c.info({attributes:[b.info({name:a.toLowerCase(),type:g})]})});return B.push(h),g};x.Attribute=A("Attribute",b,[b.info({name:"name",type:w.String}),b.info({name:"type",type:x.Type}),b.info({name:"required",type:w.Boolean,required:!1})]),x.Attributes=o.info({elmType:x.Attribute}),x.AllowExtraOption=i.info({jsType:h,contracts:[d.info({name:"any",infoType:w.Boolean,explicit:{dress:function(a,b){return a===!0&&new q},undress:function(a,b){throw new Error("`undress` not implemented")}}}),d.info({name:"static",infoType:n.info({candidates:B}),explicit:{dress:function(a,b){return x.Type.dress(a,b)},undress:function(a,b){throw new Error("`undress` not implemented")}}})]}),x.BackwardCompatibleAllowExtraOption=n.info({candidates:[x.Type,w.Boolean],name:"BackwardCompatibleAllowExtraOption"}),x.HeadingOptions=l.info({heading:c.info({attributes:[b.info({name:"allowExtra",type:x.AllowExtraOption})]})}),x.Heading=A("Heading",c,[b.info({name:"attributes",type:x.Attributes}),b.info({name:"options",type:x.HeadingOptions,required:!1})]),x.Contract=n.info({candidates:[],name:"Contract"}),x.Contracts=o.info({elmType:x.Contract});var D=function(a,c,e){var f=A(a,d,e.concat([b.info({name:"name",type:w.String}),b.info({name:"infoType",type:x.Type})]));return x.Contract.candidates.push(f),f};x.Contract.Explicit=D("Explicit",d.Explicit,[b.info({name:"explicit",type:l.info({heading:c.info({attributes:[b.info({name:"dress",type:w.Function}),b.info({name:"undress",type:w.Function})]})})})]),x.Contract.Internal=D("Internal",d.Internal,[b.info({name:"internal",type:w.Type})]),x.Contract.External=D("External",d.External,[b.info({name:"external",type:w.Type})]),x.Contract.Identity=D("Identity",d.Identity,[b.info({name:"identity",type:w.Empty})]),x.Constraint=n.info({candidates:[],name:"Constraint"}),x.Constraints=o.info({elmType:x.Constraint});var E=function(a,c,d){var f=A(a,e,d.concat([b.info({name:"name",type:w.String,required:!1})]));return x.Constraint.candidates.push(f),f};x.Constraint.Native=E("Native",e.Native,[b.info({name:"native",type:w.Function})]),x.Constraint.Regexp=E("RegExp",e.Regexp,[b.info({name:"regexp",type:w.RegExp})]),x.Range=n.info({candidates:[l.info({heading:c.info({attributes:[b.info({name:"min",type:w.Number}),b.info({name:"min_inclusive",type:w.Boolean}),b.info({name:"max",type:w.Number}),b.info({name:"max_inclusive",type:w.Boolean})]})}),l.info({heading:c.info({attributes:[b.info({name:"min",type:w.Number}),b.info({name:"min_inclusive",type:w.Boolean})]})})],name:"Range"}),x.Constraint.Range=E("Range",e.Range,[b.info({name:"range",type:x.Range})]),x.Constraint.Set=E("Set",e.Set,[b.info({name:"set",type:w.Array})]),x.AnyType=C("Any",q,[]),x.AdType=C("Adt",i,[b.info({name:"jsType",type:w.Type,required:!1}),b.info({name:"contracts",type:x.Contracts})]),x.BuiltinType=C("Builtin",j,[b.info({name:"jsType",type:w.Type})]),x.SubType=C("Sub",s,[b.info({name:"superType",type:x.Type}),b.info({name:"constraints",type:x.Constraints})]),x.RelationType=C("Relation",m,[b.info({name:"heading",type:x.Heading})]),x.TupleType=C("Tuple",l,[b.info({name:"heading",type:x.Heading})]),x.SeqType=C("Seq",o,[b.info({name:"elmType",type:x.Type})]),x.SetType=C("Set",p,[b.info({name:"elmType",type:x.Type})]),x.StructType=C("Struct",r,[b.info({name:"componentTypes",type:x.Types})]),x.UnionType=C("Union",n,[b.info({name:"candidates",type:x.Types})]),x.TypeRef=C("Ref",t,[b.info({name:"typeName",type:w.String})]),x.TypeDef=A("TypeDef",u,[b.info({name:"name",type:w.String}),b.info({name:"type",type:x.Type})]),x.TypeDefs=o.info({elmType:x.TypeDef});var F=[b.info({name:"types",type:x.TypeDefs})];return x.System=A("System",v,F),x.Systems=o.info({elmType:x.System}),x.Import=A("Import",f,[b.info({name:"qualifier",type:w.String,required:!1}),b.info({name:"from",type:w.String})]),x.Imports=o.info({elmType:x.Import}),F.push(b.info({name:"imports",type:x.Imports,required:!1})),x}()},{"../contracts":4,"../support/attribute":14,"../support/constraint":16,"../support/contract":17,"../support/heading":20,"../support/import":22,"../support/utils":24,"../system":25,"../type":26,"../type/ad_type":27,"../type/any_type":28,"../type/builtin_type":29,"../type/relation_type":30,"../type/seq_type":31,"../type/set_type":32,"../type/struct_type":33,"../type/sub_type":34,"../type/tuple_type":35,"../type/type_def":36,"../type/type_ref":37,"../type/union_type":38}],24:[function(a,b,c){b.exports=function(){var b={};return b.isArray=function(a){return Array.isArray?Array.isArray(a):"[object Array]"==toString.call(a)},b.isBrowser=function(){return"object"==typeof window},b.isObject=function(a){return Object(a)===a},b.isString=function(a){return"[object String]"==Object.prototype.toString.call(a)},b.isFunction=function(a){return"[object Function]"==Object.prototype.toString.call(a)},b.deepClone=function(a){if(null!==a&&void 0!==a||b.argumentError("Object expected, got",a),b.isObject(a)){if(a instanceof Function)return a;if(b.isArray(a))return a.slice();var c={};return b.each(a,function(a,d){c[d]=b.deepClone(a)}),c}return a},b.clone=function(a){return null!==a&&void 0!==a||b.argumentError("Object expected, got",a),b.isObject(a)?b.isArray(a)?a.slice():b.extend({},a):a},b.extend=function(a){var c=Array.prototype.slice.call(arguments,1);return b.each(c,function(b){if(b)for(var c in b)a[c]=b[c]}),a},b.triSplit=function(a,c){var d=null,e={},f={},g={},h=null;d=b.keys(a);for(var i=0;i<d.length;i++)h=d[i],void 0===c[h]?f[h]=a[h]:e[h]=[a[h],c[h]];for(d=b.keys(c),i=0;i<d.length;i++)h=d[i],void 0===e[h]&&(g[h]=c[h]);return[e,f,g]},b.zip=function(a){b.isArray(a)||b.argumentError("Array expected, got",a);var c=Array.prototype.slice.call(arguments,1);b.each(c,function(c){b.isArray(c)||b.argumentError("Array expected, got",c),b.size(c)!==b.size(a)&&b.argumentError("Source(s) and destination Arrays must have same size")});var d=b.map(a,function(a,d){var e=[];return e.push(a),b.each(c,function(a){e.push(a[d])}),e});return d},b.difference=function(a,c){return b.isArray(a)||b.argumentError("Array expected, got",a),b.isArray(c)||b.argumentError("Array expected, got",c),b.filter(a,function(a){return!b.contains(c,a)})},b.uniq=function(a,c){b.isArray(a)||b.argumentError("Array expected, got",a),"undefined"==typeof c&&(c=!1);for(var d=[],e=[],f=0,g=a.length;f<g;f++){var h=a[f];(c?f&&e===h:b.contains(e,h))||(c?e=h:e.push(h),d.push(a[f]))}return d},b.inject=function(a,c,d){a instanceof Array||b.argumentError("Array expected, got",a),res=c;for(var e=0;e<a.length;e++)res=d(res,a[e]);return res},b.isEnumerable=function(a){return!(void 0===a||null===a||a instanceof RegExp||a instanceof Date||"boolean"==typeof a)},b.each=function(a,c){if(null===c)throw new Error("Function expected, got null");if(void 0===c&&(c=function(){}),!b.isEnumerable(a))throw new Error("Enumerable (Array, Object, String) expected, got "+a);if("string"==typeof a)return b.each(a.split(""),c);if(a instanceof Array)for(var d=0;d<a.length;d++)c(a[d],d);else for(var e in a)a.hasOwnProperty(e)&&c(a[e],e)},b.every=function(a,c){null!==c&&void 0!==c||b.argumentError("Function expected, got",c);try{b.each(a,function(a,b){var d=c(a,b);if(d!==!0)throw"fail"})}catch(d){if("fail"!==d)throw d;return!1}return!0},b.find=function(a,c){null!==c&&void 0!==c||b.argumentError("Function expected, got",c);try{b.each(a,function(a,b){var d=c(a,b);if(d)throw{found:a}})}catch(d){if("undefined"==typeof d.found)throw d;return d.found}return null},b.any=function(a,c){null!==c&&void 0!==c||b.argumentError("Function expected, got",c);try{b.each(a,function(a,b){var d=c(a,b);if(d===!0)throw"gotcha"})}catch(d){if("gotcha"!==d)throw d;return!0}return!1},b.filter=function(a,c){null!==c&&void 0!==c||b.argumentError("Function expected, got",c);var d=[];return b.each(a,function(a){c(a)&&d.push(a)}),d},b.reject=function(a,c){null!==c&&void 0!==c||b.argumentError("Function expected, got",c);var d=[];return b.each(a,function(a){c(a)||d.push(a)}),d},b.map=function(a,c){null!==c&&void 0!==c||b.argumentError("Function expected, got",c);var d=[];return b.each(a,function(a,b){d.push(c(a,b))}),d},b.reduce=function(a,c,d){return null!==d&&void 0!==d||b.argumentError("Function expected, got",d),b.each(a,function(b,e){c=d(c,b,e,a)}),c},b.values=function(a){if(a instanceof Array)return a;var c=[];return b.each(a,function(a){c.push(a)}),c},b.keys=function(a){var c=[];return b.each(a,function(a,b){c.push(b)}),c},b.size=function(a){var c=b.values(a);return c.length},b.isEmpty=function(a){return 0===b.size(a)},b.contains=b.include=function(a,c){b.isEnumerable(a)||b.argumentError("Enumerable (Array, Object, String) expected, got",a);var d=Array.prototype.indexOf;if(d&&a.indexOf===d)return a.indexOf(c)!==-1;var e=b.find(a,function(a){return a===c});return null!==e},b.capitalize=function(a){if("string"!=typeof a&&b.argumentError("String expected, got",a),""===a.trim())return a;var c=a,d=null,e=null;if(c.indexOf("_")!==-1){for(d=c.split("_"),e=0;e<d.length;e++)d[e]=b.capitalize(d[e]);c=d.join("")}if(c.indexOf(" ")!==-1){for(d=c.split(" "),e=0;e<d.length;e++)d[e]=b.capitalize(d[e]);c=d.join("")}return c=c[0].toUpperCase()+c.slice(1)},b.toString=function(a){if(void 0===a)return"undefined";if(null===a)return"null";var b=a.toString();return"[object Object]"==b&&(b=JSON.stringify(a)),b.length>30&&(b=b.substring(0,30)+"..."),a instanceof Array&&(b="["+b+"]"),b},b.argumentError=function(){var a="",c=function(a){return null===a?"null":void 0===a?"undefined":a.toString()};throw b.each(arguments,function(b){0!==a.length&&(a+=" "),a+=c(b)}),new Error(a)},b.notImplemented=function(a,b){throw new Error(a.constructor.name+"#"+b)},b.dressError=function(b){var c=a("../errors").TypeError;throw new c(b)},b.undressError=function(a,b,c){throw new Error(a,b,c)},b}()},{"../errors":10}],25:[function(a,b,c){(function(){var c,d,e,f,g;e=a("./support/ic").ObjectType,c=a("./support/utils"),d=a("./support/fetchable"),g=a("./type"),f=function(){function b(a,b){this.imports=a,this.types=b,null==this.imports&&(this.imports=[]),null==this.types&&(this.types=[]),c.each(this.types,function(a){return function(b){return a[b.name]=b.trueOne()}}(this))}return e(b,["imports","types"],function(a){return c.each(a.types,function(b){return b.resolveProxies(a)})}),b.REF_RGX=/^(?:([a-z][a-z0-9]*)\.)?(.*?)$/,d(b,"types","type",function(a){return c.find(this.types,function(b){return b.name===a})}),b.prototype.resolve=function(a,d){var e,f;return e=a.match(b.REF_RGX),e[1]?this._resolveQualified(e,d):(f=c.filter(this.imports,function(a){return!a.qualifier}),this._resolveImported([{system:this}].concat(f),a,d))},b.prototype.dress=function(a,b){if(!this.Main)throw new Error("No main on System");return this.Main.dress(a,b)},b.prototype.undress=function(a,b){if(!this.Main)throw new Error("No main on System");return this.Main.undress(a,this.Main.low())},b.prototype.clone=function(){return new b(c.clone(this.imports),c.clone(this.types))},b.prototype.subsystem=function(b,c){var d,e;return d=a("../finitio"),"string"==typeof b&&(b=d.parse(b)),e={types:[].concat(this.types,b.types).filter(Boolean),imports:[].concat(this.imports,b.imports).filter(Boolean)},d.Meta.System.dress(e,d.world(c))},b.prototype._resolveQualified=function(a,b){var d,e;return null==b&&(b=this._onResolveFailure(a[0])),d=c.find(this.imports,function(b){return b.qualifier===a[1]}),(e=d&&d.system)?this._resolveSingle(e,a[2],b):this._onResolveFailure(a[0])()},b.prototype._resolveImported=function(a,b,c){return null==c&&(c=this._onResolveFailure(b)),a[0].system.fetchPath(b,function(d){return function(){return a.length>1?d._resolveImported(a.slice(1),b,c):c()}}(this))},b.prototype._resolveSingle=function(a,b,c){return a.fetchPath(b,c)},b.prototype._onResolveFailure=function(a){return function(){throw new Error("No such type `"+a+"`")}},b}(),b.exports=f}).call(this)},{"../finitio":2,"./support/fetchable":19,"./support/ic":21,"./support/utils":24,"./type":26}],26:[function(a,b,c){(function(){var c,d,e;c=a("./support/utils"),d=a("./support/dress_monad"),e=function(){function a(a){this.metadata=a}return a.factor=function(a){return a[Object.keys(a)[0]]},a.prototype.toFactor=function(){var a;return a={},a[this.generator]=this,a},a.prototype.include=function(a){return this._include(a)},a.prototype._include=function(a){return c.notImplemented(this,"include")},a.prototype.dress=function(a,b){var e;return e=this.mDress(a,new d(b)),e.isSuccess()?e.result:c.dressError(e.error)},a.prototype.mDress=function(a,b){return this._mDress(a,b)},a.prototype._mDress=function(a,b){return c.notImplemented(this,"_mDress")},a.prototype.undress=function(a,b){return this._undress(a,b.trueOne())},a.prototype._undress=function(a,b){return b.isSuperTypeOf(this)?a:b.include(a)?a:c.undressError("Unable to undress `"+a+"` from "+this+" to `"+b+"`")},a.prototype.isSuperTypeOf=function(a){return this._isSuperTypeOf(a.trueOne())},a.prototype._isSuperTypeOf=function(a){return this.equals(a)||a._isSubTypeOf(this)},a.prototype._isSubTypeOf=function(a){return!1},a.prototype.fetchType=function(){return this},a.prototype.isFake=function(){return!1},a.prototype.trueOne=function(){return this},a.prototype.equals=function(b){return b instanceof a&&this._equals(b.trueOne())},a.prototype._equals=function(a){return this===a},a}(),b.exports=e}).call(this)},{"./support/dress_monad":18,"./support/utils":24}],27:[function(a,b,c){(function(){var c,d,e,f,g,h,i=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},j={}.hasOwnProperty;h=a("../support/ic").TypeType,c=a("../support/utils"),f=a("../support/fetchable"),e=a("../support/contract"),g=a("../type"),d=function(a){function b(a,d,f){this.jsType=a,this.contracts=d,this.metadata=f,!this.jsType||this.jsType instanceof Function||c.argumentError("Constructor (function) expected, got:",this.jsType),c.isArray(this.contracts)||c.argumentError("[Contract] expected, got:",this.contracts),c.every(this.contracts,function(a){return a instanceof e})||c.argumentError("[Contract] expected, got:",this.contracts),b.__super__.constructor.call(this,this.metadata)}return i(b,a),h(b,"adt",["jsType","contracts","metadata"]),f(b,"contracts","contract",function(a){return c.find(this.contracts,function(b){return b.name===a})}),b.prototype.contractNames=function(){return c.map(this.contracts,function(a){return a.name})},b.prototype._include=function(a){return a.constructor===this.jsType},b.prototype._mDress=function(a,b){var c,d;return this.jsType&&a instanceof this.jsType?b.success(a):(c=function(c){var d;return d=c.infoType.mDress(a,b),d.onSuccess(function(a){return function(d){var e;try{return b.success(c.dress(d,b.world))}catch(f){return e=f,b.failure(a,"Dresser failed: "+e.message,[e])}}}(this))},d=function(c){return function(d){var e;return e=[c.jsType&&c.jsType.name||"value",a],b.failure(c,["Invalid ${typeName}: `${value}`",e],d)}}(this),b.find(this.contracts,c,d))},b.prototype._undress=function(a,d){var e;return this.jsType?(e=null,e=1===c.size(this.contracts)?this.contracts[0]:c.find(this.contracts,function(a){return a.infoType.isSuperTypeOf(d)}),null!=e?e.infoType.undress(e.undress(a),d):b.__super__._undress.apply(this,arguments)):a},b.prototype.low=function(){return this.contracts[0].infoType.low()},b.prototype.resolveProxies=function(a){return c.each(this.contracts,function(b){return b.resolveProxies(a)})},b.prototype.toString=function(){return c.map(this.contracts,function(a){return a.toString()}).join(", ")},b}(g),b.exports=d}).call(this)},{"../support/contract":17,"../support/fetchable":19,"../support/ic":21,"../support/utils":24,"../type":26}],28:[function(a,b,c){(function(){var c,d,e,f=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},g={}.hasOwnProperty;e=a("../support/ic").TypeType,d=a("../type"),c=function(a){function b(a){this.metadata=a,b.__super__.constructor.call(this,this.metadata)}return f(b,a),e(b,"any",["metadata"]),b.prototype._mDress=function(a,b){return b.success(a)},b.prototype._include=function(a){return!0},b.prototype._isSuperTypeOf=function(a){return!0},b.prototype._equals=function(a){return a instanceof b||b.__super__._equals.apply(this,arguments)},b.prototype.low=function(){return this},b.prototype.resolveProxies=function(a){},b.prototype.toString=function(){return"."},b}(d),b.exports=c}).call(this)},{"../support/ic":21,"../type":26}],29:[function(a,b,c){(function(){var c,d,e,f=function(a,b){return function(){return a.apply(b,arguments)}},g=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},h={}.hasOwnProperty;e=a("../support/ic").TypeType,d=a("../type"),c=function(a){function b(a,c){this.jsType=a,this.metadata=c,this._equals=f(this._equals,this),b.__super__.constructor.call(this,this.metadata)}return g(b,a),e(b,"builtin",["jsType","metadata"]),b.prototype._mDress=function(a,b){var c;return this.include(a)?b.success(a):(c=[this.jsType.name,a],b.failure(this,["Invalid ${typeName}: `${value}`",c]))},b.prototype._include=function(a){return a instanceof this.jsType||null!=a&&a.constructor===this.jsType},b.prototype._equals=function(a){return this===a||a instanceof b&&a.jsType===this.jsType||b.__super__._equals.apply(this,arguments)},b.prototype.low=function(){return this},b.prototype.toString=function(){return"."+this.jsType.name.toString()},b.prototype.resolveProxies=function(a){},b}(d),b.exports=c}).call(this)},{"../support/ic":21,"../type":26}],30:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j=function(a,b){function c(){this.constructor=a}for(var d in b)k.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},k={}.hasOwnProperty;i=a("../support/ic").TypeType,h=a("../type"),d=a("../support/collection_type"),g=a("../type/tuple_type"),e=a("../support/heading"),c=a("../support/utils"),f=function(a){function b(a,d){this.heading=a,this.metadata=d,b.__super__.constructor.call(this,this.metadata),this.heading instanceof e||c.argumentError("Heading expected, got:",this.heading)}return j(b,a),i(b,"relation",["heading","metadata"]),b.prototype.fetch=function(){return this.heading.fetch.apply(this.heading,arguments)},b.prototype.tupleType=function(){return null!=this.tupleTypeCache?this.tupleTypeCache:this.tupleTypeCache=new g(this.heading)},b.prototype._include=function(a){return a instanceof Array&&c.every(a,function(a){return function(b){return a.tupleType().include(b)}}(this))},b.prototype._mDress=function(a,b){var c,d,e,f;return a instanceof Array?(f=this.tupleType(),c={},d=function(a){var d;return d=f.mDress(a,b),d.onSuccess(function(a){return function(e){var f;return f=JSON.stringify(e),c[f]?b.failure(a,["Duplicate Tuple: `${value}`",[e]]):(c[f]=e,d)}}(this))},e=function(a){return function(c){return b.failure(a,["Invalid ${typeName}",["Relation"]],c)}}(this),b.map(a,d,e)):b.failure(this,["Array expected, got: `${value}`",[a]])},b.prototype._undress=function(a,e){var f,g;return e instanceof b||e instanceof d||c.undressError("Unable to undress `"+a+"` to `"+e+"`"),f=this.tupleType(),g=e instanceof b?e.tupleType():e.elmType,c.map(a,function(a){return f.undress(a,g)})},b.prototype._isSuperTypeOf=function(a){return this===a||a instanceof b&&this.heading.isSuperHeadingOf(a.heading)},b.prototype._equals=function(a){return this===a||a instanceof b&&this.heading.equals(a.heading)||b.__super__._equals.apply(this,arguments)},b.prototype.low=function(){return new b(this.heading.low())},b.prototype.resolveProxies=function(a){return this.heading.resolveProxies(a)},b.prototype.toString=function(){return"{{ "+this.heading.toString()+" }}"},b}(h),b.exports=f}).call(this)},{"../support/collection_type":15,"../support/heading":20,"../support/ic":21,"../support/utils":24,"../type":26,"../type/tuple_type":35}],31:[function(a,b,c){(function(){var c,d,e,f,g,h=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},i={}.hasOwnProperty;g=a("../support/ic").TypeType,c=a("../support/utils"),f=a("../type"),d=a("../support/collection_type"),e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return h(b,a),g(b,"seq",["elmType","metadata"]),b.prototype._include=function(a){return a instanceof Array&&c.every(a,function(a){return function(b){return a.elmType.include(b)}}(this))},b.prototype._mDress=function(a,b){var c,d;return a instanceof Array?(c=function(a){return function(c){return a.elmType.mDress(c,b)}}(this),d=function(a){return function(c){return b.failure(a,["Invalid ${typeName}",["Sequence"]],c)}}(this),b.map(a,c,d)):b.failure(this,["Array expected, got: `${value}`",[a]])},b.prototype._undress=function(a,d){return d instanceof b||c.undressError("Unable to undress `"+a+"` to `"+d+"`"),b.__super__._undress.apply(this,arguments)},b.prototype.low=function(){return new b(this.elmType.low())},b.prototype.resolveProxies=function(a){return this.elmType.resolveProxies(a)},b.prototype.toString=function(){return"["+this.elmType.toString()+"]"},b}(d),b.exports=e}).call(this)},{"../support/collection_type":15,"../support/ic":21,"../support/utils":24,"../type":26}],32:[function(a,b,c){(function(){var c,d,e,f,g,h=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},i={}.hasOwnProperty;g=a("../support/ic").TypeType,c=a("../support/utils"),f=a("../type"),d=a("../support/collection_type"),e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return h(b,a),g(b,"set",["elmType","metadata"]),b.prototype._include=function(a){return a instanceof Array&&(!!c.every(a,function(a){return function(b){return a.elmType.include(b)}}(this))&&c.uniq(a).length===a.length)},b.prototype._mDress=function(a,b){var d,e,f,g;return a instanceof Array?(f=function(a){return function(c){return a.elmType.mDress(c,b)}}(this),g=function(a){return function(c){return b.failure(a,["Invalid ${typeName}",["Set"]],c)}}(this),e=b.map(a,f,g),d=function(a){return c.find(a,function(b,c){return a.indexOf(b)!==c})},e.onSuccess(function(a){return function(c){var f,g;return(f=d(c))?(g=b.failure(a,["Duplicate value: `${value}`",[f]]),g.onFailure(function(c){return b.failure(a,"Invalid Set",[c])})):e}}(this))):b.failure(this,["Array expected, got: `${value}`",[a]])},b.prototype._undress=function(a,e){return e instanceof d||c.undressError("Unable to undress `"+a+"` to `"+e+"`"),b.__super__._undress.apply(this,arguments)},b.prototype.low=function(){return new b(this.elmType.low())},b.prototype.resolveProxies=function(a){return this.elmType.resolveProxies(a)},b.prototype.toString=function(){return"{"+this.elmType.toString()+"}"},b}(d),b.exports=e}).call(this)},{"../support/collection_type":15,"../support/ic":21,"../support/utils":24,"../type":26}],33:[function(a,b,c){(function(){var c,d,e,f,g,h=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},i={}.hasOwnProperty;g=a("../support/ic").TypeType,c=a("../support/utils"),f=a("../type"),d=a("../support/collection_type"),e=function(a){function b(a,d){var e;this.componentTypes=a,this.metadata=d,b.__super__.constructor.call(this,this.metadata),c.isArray(this.componentTypes)||c.argumentError("[Finitio::Type] expected, got:",this.componentTypes),e=c.find(this.componentTypes,function(a){return!(a instanceof f)}),null!=e&&c.argumentError("[Finitio::Type] expected, got:",e)}return h(b,a),g(b,"struct",["componentTypes","metadata"]),b.prototype.size=function(){return c.size(this.componentTypes)},b.prototype._include=function(a){return c.isArray(a)&&c.size(a)===c.size(this.componentTypes)&&c.every(c.zip(a,this.componentTypes),function(b){var c;return a=b[0],c=b[1],c.include(a)})},b.prototype._mDress=function(a,b){var c,d;return a instanceof Array?a.length!==this.size()?b.failure(this,["Struct size mismatch: ${a} for ${b}",[a.length,this.size()]]):(c=function(c){return function(c,d){return c.mDress(a[d],b)}}(this),d=function(c){return function(d){var e;return e=["Struct",a],b.failure(c,["Invalid ${typeName}: `${value}`",e],d)}}(this),b.map(this.componentTypes,c,d)):b.failure(this,["Array expected, got: `${value}`",[a]])},b.prototype._undress=function(a,d){var e,f;return d instanceof b||c.undressError("Unable to undress `"+a+"` to `"+d+"`"),d.size()!==this.size()&&c.undressError("Unable to undress `"+a+"` to `"+d+"`"),e=this.componentTypes,f=d.componentTypes,c.map(a,function(a,b){return e[b].undress(a,f[b])})},b.prototype._isSuperTypeOf=function(a){return this===a||a instanceof b&&c.size(this.componentTypes)===c.size(a.componentTypes)&&c.every(c.zip(this.componentTypes,a.componentTypes),function(a){return a[0].isSuperTypeOf(a[1])})},b.prototype._equals=function(a){return this===a||a instanceof b&&this.headingEquals(a)||b.__super__._equals.apply(this,arguments)},b.prototype.headingEquals=function(a){return c.size(this.componentTypes)===c.size(a.componentTypes)&&c.every(this.componentTypes,function(b,c){return a.componentTypes[c].equals(b)})},b.prototype.low=function(){var a;return a=c.map(this.componentTypes,function(a){return a.low()}),new b(a)},b.prototype.resolveProxies=function(a){return c.each(this.componentTypes,function(b){return b.resolveProxies(a)})},b.prototype.toString=function(){return"<"+c.map(this.componentTypes,function(a){return a.toString()}).join(",")+">"},b}(f),b.exports=e}).call(this)},{"../support/collection_type":15,"../support/ic":21,"../support/utils":24,"../type":26}],34:[function(a,b,c){(function(){var c,d,e,f,g,h,i=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},j={}.hasOwnProperty;h=a("../support/ic").TypeType,c=a("../support/utils"),e=a("../support/fetchable"),g=a("../type"),d=a("../support/constraint"),f=function(a){function b(a,e,f){this.superType=a,this.constraints=e,this.metadata=f,this.superType instanceof g||c.argumentError("Finitio.Type expected, got",this.superType),this.constraints.constructor!==Array&&c.argumentError("Array expected for constraints, got",this.constraints),this.constraints.length>0||c.argumentError("Empty constraints not allowed on SubType"),c.every(this.constraints,function(a){return a instanceof d})||c.argumentError("Array of constraints expected, got",this.constraints),b.__super__.constructor.call(this,this.metadata)}return i(b,a),h(b,"sub",["superType","constraints","metadata"]),e(b,"constraints","constraint",function(a){return c.find(this.constraints,function(b){return b.name===a})}),b.prototype._mDress=function(a,b){var c,d,e;return e=this.superType.mDress(a,b),c=function(c,d){var f,g;return d.accept(e.result)?e:(null!=d.name?(f="Invalid ${typeName} (not ${cName}): `${value}`",g=["value",d.name,a]):(f="Invalid ${typeName}: `${value}`",g=["value",a]),b.failure(d,[f,g]))},d=function(a){return function(c){return b.failure(a,c[0].error)}}(this),b.refine(e,this.constraints,c,d)},b.prototype._include=function(a){return this.superType.include(a)&&c.every(this.constraints,function(b){return b.accept(a)})},b.prototype._isSubTypeOf=function(a){return a.isSuperTypeOf(this.superType);
},b.prototype._equals=function(a){return this===a||a instanceof b&&this.superTypeEquals(a)&&this.constraintsEquals(a)||b.__super__._equals.apply(this,arguments)},b.prototype.low=function(){return this.superType.low()},b.prototype.toString=function(){return this.superType.toString()+"( x | ... )"},b.prototype.superTypeEquals=function(a){return this.superType.equals(a.superType)},b.prototype.constraintsEquals=function(a){return this.constraints.length===a.constraints.length&&c.every(c.zip(this.constraints,a.constraints),function(a){return a[0].equals(a[1])})},b.prototype.resolveProxies=function(a){return this.superType.resolveProxies(a)},b}(g),b.exports=f}).call(this)},{"../support/constraint":16,"../support/fetchable":19,"../support/ic":21,"../support/utils":24,"../type":26}],35:[function(a,b,c){(function(){var c,d,e,f,g,h,i=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},j={}.hasOwnProperty;h=a("../support/ic").TypeType,c=a("../support/utils"),g=a("../type"),e=a("../support/heading"),d=a("../support/collection_type"),f=function(a){function b(a,d){this.heading=a,this.metadata=d,this.heading instanceof e||c.argumentError("Heading expected, got:",this.heading),b.__super__.constructor.call(this,this.metadata)}var d;return i(b,a),h(b,"tuple",["heading","metadata"]),b.prototype.fetch=function(){return this.heading.fetch.apply(this.heading,arguments)},b.prototype._include=function(a){return"object"==typeof a&&(!!this.areAttributesValid(a)&&c.every(this.heading.attributes,function(b){var c;return null==a[b.name]||(c=a[b.name],b.type.include(c))}))},b.prototype._mDress=function(a,b){var e,f,g,h,i;return a instanceof Object?(h={},i=b.success(h),f=function(c){return function(d,e){var f,g,j,k,l;return f=c.heading.getAttr(e)||null,g=a[e],void 0===g&&null!=f&&f.required?(k=b.failure(e,["Missing attribute `${attrName}`",[e]]),k.onFailure(function(a){return a.location=e,k})):null!=f||c.heading.allowExtra()?null==f&&c.heading.allowExtra()?(j=c.heading.getExtraType(),l=j.mDress(g,b),l.onFailure(function(a){return a.location=e,l}),l.onSuccess(function(a){return h[e]=a,i})):null!=f&&void 0!==g?(l=f.type.mDress(g,b),l.onFailure(function(a){return a.location=e,l}),l.onSuccess(function(a){return h[e]=a,i})):i:(k=b.failure(e,["Unrecognized attribute `${attrName}`",[e]]),k.onFailure(function(a){return a.location=e,k}))}}(this),g=function(c){return function(d){var e;return e=["Tuple",a],b.failure(c,["Invalid ${typeName}",e],d)}}(this),e=d(this.heading),c.extend(e,a),e=Object.keys(e),b.refine(i,e,f,g)):b.failure(this,["Invalid Tuple: `${value}`",[a]])},b.prototype._undress=function(a,e){var f,g,h,i,j;return e instanceof b||c.undressError("Tuple cannot undress to `"+e+"` ("+e.constructor+")."),h=c.triSplit(d(this.heading),d(e.heading)),i=h[0],f=h[1],g=h[2],c.find(f,function(a){return a.required})&&c.undressError("Tuple undress does not allow projecting "+f),c.isEmpty(g)||c.undressError("Tuple undress does not support missing "+g),c.every(i,function(a){return a[0].required===a[1].required})||c.undressError("Tuple undress requires optional attributes to agree"),j={},this.heading.each(function(b){var c,d,f,g;if(c=b.name,d=b.type,f=a[c],void 0!==f)return g=e.heading.getAttr(c).type,j[b.name]=d.undress(f,g)}),j},b.prototype._isSuperTypeOf=function(a){return this===a||a instanceof b&&this.heading.isSuperHeadingOf(a.heading)},b.prototype._equals=function(a){return this===a||a instanceof b&&this.heading.equals(a.heading)||b.__super__._equals.apply(this,arguments)},b.prototype.low=function(){return new b(this.heading.low())},b.prototype.toString=function(){return"{ "+this.heading.toString()+" }"},d=function(a){var b;return b={},a.each(function(a){return b[a.name]=a}),b},b.prototype.attributeNames=function(){return c.map(this.heading.attributes,function(a){return a.name})},b.prototype.requiredAttributeNames=function(){return c.map(c.values(c.filter(this.heading.attributes,function(a){return a.required})),function(a){return a.name})},b.prototype.extraAttributes=function(a){return c.difference(c.keys(a),this.attributeNames())},b.prototype.missingAttributes=function(a){return c.difference(this.requiredAttributeNames(),c.keys(a))},b.prototype.areAttributesValid=function(a){return(this.heading.allowExtra()||c.isEmpty(this.extraAttributes(a)))&&c.isEmpty(this.missingAttributes(a))},b.prototype.resolveProxies=function(a){return this.heading.resolveProxies(a)},b}(g),b.exports=f}).call(this)},{"../support/collection_type":15,"../support/heading":20,"../support/ic":21,"../support/utils":24,"../type":26}],36:[function(a,b,c){(function(){var c,d,e,f,g=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},h={}.hasOwnProperty;d=a("../support/ic").ObjectType,e=a("../type"),c=a("../support/utils"),f=function(a){function b(a,d,e){this.type=a,this.name=d,this.metadata=e,this.name||c.argumentError("Name cannot be null on TypeDef"),b.__super__.constructor.call(this,this.metadata),this.generator=this.type.generator}return g(b,a),d(b,["type","name","metadata"]),b.prototype.fetch=function(){return this.type.fetch.apply(this.type,arguments)},b.prototype._include=function(a){return this.type.include(a)},b.prototype._mDress=function(a,b){var c;return c=this.type.mDress(a,b),c.onFailure(function(a){return function(b){return"Main"===a.name?b.typeName="Data":b.typeName=a.name,c}}(this))},b.prototype._undress=function(a,b){return this.type.undress(a,b)},b.prototype._isSuperTypeOf=function(a){return this.type.isSuperTypeOf(a)},b.prototype._isSubTypeOf=function(a){return this.type._isSubTypeOf(a)},b.prototype._equals=function(a){return this.type.equals(a)},b.prototype.isFake=function(){return!0},b.prototype.trueOne=function(){return this.type},b.prototype.low=function(){return this.type.low()},b.prototype.resolveProxies=function(a){return this.type.resolveProxies(a)},b.prototype.toString=function(){return this.name},b}(e),b.exports=f}).call(this)},{"../support/ic":21,"../support/utils":24,"../type":26}],37:[function(a,b,c){(function(){var c,d,e,f,g=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},h={}.hasOwnProperty;f=a("../support/ic").TypeType,c=a("../support/utils"),d=a("../type"),e=function(a){function b(a,d,e){this.typeName=a,this.metadata=d,this.target=e,this.typeName||c.argumentError("Proxied ref cannot be null on TypeRef"),b.__super__.constructor.call(this,this.metadata)}return g(b,a),f(b,"ref",["typeName","metadata"]),b.prototype.fetch=function(){var a;return a=this.resolved(),a.fetch.apply(a,arguments)},b.prototype._include=function(a){return this.resolved().include(a)},b.prototype._mDress=function(a,b){return this.resolved().mDress(a,b)},b.prototype._undress=function(a,b){return this.resolved().undress(a,b)},b.prototype._isSuperTypeOf=function(a){return this.resolved().isSuperTypeOf(a)},b.prototype._isSubTypeOf=function(a){return this.resolved()._isSubTypeOf(a)},b.prototype._equals=function(a){return this.resolved().equals(a)},b.prototype.isFake=function(){return!0},b.prototype.trueOne=function(){return this.resolved().trueOne()},b.prototype.low=function(){return this.resolved().low()},b.prototype.resolve=function(a){return null!=this.target?this.target:this.target=a.resolve(this.typeName).fetchType()},b.prototype.resolveProxies=function(a){return this.resolve(a)},b.prototype.resolved=function(){if(!this.target)throw new Error("Proxy is not resolved");return this.target},b.prototype.toString=function(){return this.typeName},b}(d),b.exports=e}).call(this)},{"../support/ic":21,"../support/utils":24,"../type":26}],38:[function(a,b,c){(function(){var c,d,e,f,g=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},h={}.hasOwnProperty;e=a("../support/ic").TypeType,c=a("../support/utils"),d=a("../type"),f=function(a){function b(a,e){this.candidates=a,this.metadata=e,c.each(this.candidates,function(a){if(!(a instanceof d))return c.argumentError("Finitio.Type expected, got:",a)}),b.__super__.constructor.call(this,this.metadata)}return g(b,a),e(b,"union",["candidates","metadata"]),b.prototype._mDress=function(a,b){var c,d;return c=function(c){return c.mDress(a,b)},d=function(c){return function(d){var e;return e=["value",a],b.failure(c,["Invalid ${typeName}: `${value}`",e],d)}}(this),b.find(this.candidates,c,d)},b.prototype._undress=function(a,b){var d;return this===b?a:(d=c.find(this.candidates,function(a){return b.isSuperTypeOf(a)}))?d.undress(a,b):(d=c.find(this.candidates,function(b){return b.include(a)}))?d.undress(a,b):c.undressError("Unable to undress `"+a+"` to `"+b+"`")},b.prototype._include=function(a){var b;return b=c.find(this.candidates,function(b){return b.include(a)}),null!=b},b.prototype._isSuperTypeOf=function(a){return this===a||c.any(this.candidates,function(b){return b.isSuperTypeOf(a)})||a instanceof b&&c.every(a.candidates,function(a){return function(b){return c.any(a.candidates,function(a){return a.isSuperTypeOf(b)})}}(this))||b.__super__._isSuperTypeOf.apply(this,arguments)},b.prototype._equals=function(a){return this===a||a instanceof b&&this.candidatesEquals(a,!0)||b.__super__._equals.apply(this,arguments)},b.prototype.candidatesEquals=function(a,b){var d;return d=c.every(this.candidates,function(b){return c.any(a.candidates,function(a){return b.equals(a)})}),d&&(!b||a.candidatesEquals(this,!1))},b.prototype.low=function(){throw"UnionType#low is not defined yet, sorry!"},b.prototype.resolveProxies=function(a){return c.each(this.candidates,function(b){return b.resolveProxies(a)})},b.prototype.toString=function(){return c.map(this.candidates,function(a){return a.toString()}).join("|")},b}(d),b.exports=f}).call(this)},{"../support/ic":21,"../support/utils":24,"../type":26}],39:[function(a,b,c){},{}]},{},[2]);