!function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Finitio=t()}(function(){return function r(o,u,i){function a(e,t){if(!u[e]){if(!o[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(c)return c(e,!0);throw(n=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",n}n=u[e]={exports:{}},o[e][0].call(n.exports,function(t){return a(o[e][1][t]||t)},n,n.exports,r,o,u,i)}return u[e].exports}for(var c="function"==typeof require&&require,t=0;t<i.length;t++)a(i[t]);return a}({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"AdType",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(n,"AnyType",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(n,"Attribute",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"BuiltinType",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(n,"Bundler",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(n,"Constraint",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(n,"Contract",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(n,"Contracts",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(n,"Heading",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(n,"Meta",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(n,"Parser",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"RelationType",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(n,"SeqType",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(n,"SetType",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(n,"StructType",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(n,"SubType",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(n,"System",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(n,"TupleType",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(n,"Type",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(n,"TypeDef",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(n,"TypeError",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"TypeRef",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(n,"UnionType",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(n,"Utils",{enumerable:!0,get:function(){return u.default}}),n.default=void 0;var u=k(t("./finitio/support/utils")),r=t("../package.json"),o=k(t("./finitio/resolver")),i=k(t("./finitio/errors")),a=k(t("./finitio/parser")),c=k(t("./finitio/contracts")),s=k(t("./finitio/support/attribute")),l=k(t("./finitio/support/contract")),f=k(t("./finitio/support/heading")),p=k(t("./finitio/support/constraint")),y=k(t("./finitio/system")),d=k(t("./finitio/bundler")),h=k(t("./finitio/type")),v=k(t("./finitio/type/type_def")),b=k(t("./finitio/type/type_ref")),m=k(t("./finitio/type/ad_type")),g=k(t("./finitio/type/any_type")),w=k(t("./finitio/type/builtin_type")),_=k(t("./finitio/type/relation_type")),T=k(t("./finitio/type/seq_type")),O=k(t("./finitio/type/set_type")),x=k(t("./finitio/type/struct_type")),j=k(t("./finitio/type/sub_type")),P=k(t("./finitio/type/tuple_type")),S=k(t("./finitio/type/union_type")),A=k(t("./finitio/support/meta"));function k(t){return t&&t.__esModule?t:{default:t}}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function R(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}t=function(){function o(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o)}var t,e,n;return t=o,n=[{key:"world",value:function(){for(var t=u.default.clone(o.World),e=0,n=Array.prototype.slice.call(arguments);e<n.length;e++){var r=n[e];r&&C(t,r)}return t}},{key:"parse",value:function(t,e){return a.default.parse(t,e||{})}},{key:"system",value:function(t,e){return"string"==typeof t&&(t=this.parse(t)),A.default.System.dress(t,this.world(e))}},{key:"bundleFile",value:function(t,e){return new this.Bundler(this.world(e)).addFile(t).flush()}},{key:"bundleSource",value:function(t,e){return new this.Bundler(this.world(e)).addSource(t).flush()}}],(e=null)&&E(t.prototype,e),n&&E(t,n),o}();R(t,"VERSION",r.version),R(t,"CONFORMANCE","0.4"),R(t,"World",{Finitio:t,JsTypes:{Finitio:t,Number:Number,String:String,Boolean:Boolean,Date:Date,Function:Function,RegExp:RegExp},importResolver:o.default});var C=function(t,e){var n,r=[];for(n in e){var o=e[n];"JsTypes"===n?r.push(t[n]=u.default.extend(t[n],o)):r.push(t[n]=o)}return r};t.TypeError=i.default,t.Utils=u.default,t.Parser=a.default,t.Contracts=c.default,t.Attribute=s.default,t.Contract=l.default,t.Heading=f.default,t.Constraint=p.default,t.System=y.default,t.Bundler=d.default,t.Type=h.default,t.TypeDef=v.default,t.TypeRef=b.default,t.AdType=m.default,t.AnyType=g.default,t.BuiltinType=w.default,t.RelationType=_.default,t.SeqType=T.default,t.SetType=O.default,t.StructType=x.default,t.SubType=j.default,t.TupleType=P.default,t.UnionType=S.default,t.Meta=A.default,n.default=t},{"../package.json":39,"./finitio/bundler":2,"./finitio/contracts":3,"./finitio/errors":9,"./finitio/parser":10,"./finitio/resolver":11,"./finitio/support/attribute":13,"./finitio/support/constraint":15,"./finitio/support/contract":16,"./finitio/support/heading":19,"./finitio/support/meta":22,"./finitio/support/utils":23,"./finitio/system":24,"./finitio/type":25,"./finitio/type/ad_type":26,"./finitio/type/any_type":27,"./finitio/type/builtin_type":28,"./finitio/type/relation_type":29,"./finitio/type/seq_type":30,"./finitio/type/set_type":31,"./finitio/type/struct_type":32,"./finitio/type/sub_type":33,"./finitio/type/tuple_type":34,"./finitio/type/type_def":35,"./finitio/type/type_ref":36,"./finitio/type/union_type":37}],2:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=t("fs"))&&r.__esModule?r:{default:r};function c(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a,s,l,f=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.world=t,this.systems={}}var t,n,r;return t=e,(n=[{key:"flush",value:function(){return e.TEMPLATE.replace(/^[ ]{4}/,"").replace(/JSONDATA/,JSON.stringify(this.systems)).replace(/URL/,this.world.sourceUrl)}},{key:"addDirectory",value:function(t){throw new Error("Bundling directories is not supported")}},{key:"addFile",value:function(t){return o.default.lstatSync(t).isDirectory()?this.addDirectory(t):(t=o.default.readFileSync(t).toString(),this.addSource(t)),this}},{key:"addSource",value:function(t){return this._bundle(this.world.Finitio.parse(t),this.world),this}},{key:"_bundle",value:function(u,i){var a=this;if(i.check&&i.Finitio.system(u,i),(this.systems[i.sourceUrl]=u).imports)return function(){for(var t=[],e=0,n=c(u.imports);e<n.length;e++){var r=n[e],o=i.importResolver(r.from,i,{raw:!0});r.from=o[0];r=i.Finitio.world(i,{sourceUrl:o[0]});t.push(a._bundle(o[1],r))}return t}()}}])&&i(t.prototype,n),r&&i(t,r),e}();l="\n  /* eslint-disable */\n  module.exports = (() => {\n    const ss = JSONDATA;\n    const r = (fallback) => {\n      return function(path, w, options){\n        const s = ss[path];\n        if (s) {\n          if (options && options.raw){\n            return [ path, s ];\n          } else {\n            return w.Finitio.system(s, w);\n          }\n        } else if (fallback) {\n          return fallback(path, w, options);\n        } else {\n          throw new Error('Unable to resolve: `' + path + '`');\n        }\n      };\n    };\n    return function(w, options){\n      if (!w) { w = require('finit' + 'io').World; }\n      w = w.Finitio.world(w, {\n        importResolver: r(w.importResolver)\n      });\n      return w.importResolver('URL', w, options);\n    };\n  })();\n  ",(s="TEMPLATE")in(a=f)?Object.defineProperty(a,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[s]=l,n.default=f},{fs:38}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(t("./contracts/date")),o=a(t("./contracts/time")),u=a(t("./contracts/expression")),i=a(t("./contracts/function")),t=a(t("./contracts/js_type"));function a(t){return t&&t.__esModule?t:{default:t}}t={Date:r.default,Time:o.default,Expression:u.default,Function:i.default,JsType:t.default};n.default=t},{"./contracts/date":4,"./contracts/expression":5,"./contracts/function":6,"./contracts/js_type":7,"./contracts/time":8}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;function o(t){return"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t.getTime())}n.default={iso8601:{dress:function(t){var e=new Date(t);if(o(e))return e;throw new Error("Invalid Date string `".concat(t,"`"))},undress:function(t){if(o(t)){var e=t.getFullYear().toString(),n=(t.getMonth()+1).toString(),r=t.getDate().toString();return"".concat(e,"-").concat(n[1]?n:"0".concat(n[0]),"-").concat(r[1]?r:"0".concat(r[0]))}throw new Error("Invalid Date `".concat(t,"`"))}},milliseconds:{dress:function(t){var e=new Date(t);if(o(e))return e;throw new Error("Invalid Date milliseconds `".concat(t,"`"))},undress:function(t){if(o(t))return t.getTime();throw new Error("Invalid Date `".concat(t,"`"))}}}},{}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.default={defn:{dress:function(t){/^return/.test(t[t.length-1])||(t[t.length-1]="return ".concat(t[t.length-1]));var e=Function.apply(Function,t);return e.defn=t,e},undress:function(t){if(!t.defn)throw new Error("No defn found: ".concat(t.toString()));return t.defn}}}},{}],6:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=t("../support/utils"))&&r.__esModule?r:{default:r};n.default={reference:{dress:function(r,t){var e=r.split("."),n=o.default.reduce(e,t,function(t,e,n){if(void 0===t[e]||null===t[e])throw new Error("".concat(r," is undefined"));return t[e]});if("function"!=typeof n)throw new Error("".concat(r," must resolve to a Function"));t=function(){return n.apply(this,arguments)};return t.nativeToString=function(){return r},t},undress:function(t){if(t.nativeToString)return t.nativeToString();throw new Error("Unimplemented")}}}},{"../support/utils":23}],7:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r={name:{dress:function(t,e){var n=null;if(n=e?new Function("world","return world.".concat(t,";"))(e):new Function("return ".concat(t,";"))())return n;t="Unknown javascript type: `".concat(t,"` (");throw t+=Object.keys(e).toString(),t+=")",new Error(t)},undress:function(t){throw new Error("Unimplemented")}}};n.default=r},{}],8:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;function r(t){return"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t.getTime())}n.default={iso8601:{dress:function(t){var e=new Date(t);if(r(e))return e;throw new Error("Invalid Date string `".concat(t,"`"))},undress:function(t){if(r(t))return t.toISOString();throw new Error("Invalid Date '".concat(t,"'"))}},milliseconds:{dress:function(t){var e=new Date(t);if(r(e))return e;throw new Error("Invalid Date milliseconds `".concat(t,"`"))},undress:function(t){if(r(t))return t.getTime();throw new Error("Invalid Date `".concat(t,"`"))}}}},{}],9:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,u=(r=t("./support/utils"))&&r.__esModule?r:{default:r};function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,u=[],i=!0,a=!1;try{for(n=n.call(t);!(i=(r=n.next()).done)&&(u.push(r.value),!e||u.length!==e);i=!0);}catch(t){a=!0,o=t}finally{try{i||null==n.return||n.return()}finally{if(a)throw o}}return u}}(t,e)||c(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=c(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,e=function(){};return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,i=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){i=!0,o=t},f:function(){try{u||null==n.return||n.return()}finally{if(i)throw o}}}}function c(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(n){var r=h();return function(){var t,e=b(n);return function(t,e){{if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined")}return p(t)}(this,r?(t=b(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t){var n="function"==typeof Map?new Map:void 0;return function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return d(t,arguments,b(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),v(e,t)}(t)}function d(t,e,n){return(d=h()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);r=new(Function.bind.apply(t,r));return n&&v(r,n.prototype),r}).apply(null,arguments)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(o,y(Error));var t,e,n,r=f(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),e=r.call(this),u.default.extend(p(e),t),e.message=g(t),e}return t=o,(e=[{key:"locatedMessage",get:function(){return null!=this.location?"[".concat(this.location,"] ").concat(this.message):this.message}},{key:"causes",get:function(){return null!=this.causesCache?this.causesCache:this.causesCache=this.children&&w(this)}},{key:"cause",get:function(){return this.causes&&this.causes[0]}},{key:"rootCauses",get:function(){return null!=this.rootCausesCache?this.rootCausesCache:this.rootCausesCache=_(this,[])}},{key:"rootCause",get:function(){return this.rootCauses[this.rootCauses.length-1]}},{key:"explain",value:function(){var t="".concat(this.locatedMessage,"\n");if(this.rootCauses){var e,n=a(this.rootCauses);try{for(n.s();!(e=n.n()).done;){var r=e.value;t+="  ".concat(r.locatedMessage,"\n")}}catch(t){n.e(t)}finally{n.f()}}return t}},{key:"explainTree",value:function(t){for(var e="",n=0,r=t=null==t?0:t,o=0<=r;o?n<r:r<n;o?n++:n--)e+="  ";if(e+="".concat(this.locatedMessage,"\n"),null!=this.causes){var u,i=a(this.causes);try{for(i.s();!(u=i.n()).done;)e+=u.value.explainTree(t+1)}catch(t){i.e(t)}finally{i.f()}}return e}}])&&l(t.prototype,e),n&&l(t,n),o}(),g=function(e){if((n=e.error)instanceof Array){var t=i(n,2),n=t[0],r=t[1],o=-1;return n.replace(/\$\{([a-zA-Z]+)\}/g,function(t){o+=1;t=t.slice(2,t.length-1);return u.default.toString(e[t]||r[o])})}return"string"==typeof n?n:e.toString()},w=function(e){return u.default.map(e.children,function(t){return t.location=T(e.location,t.location),t instanceof m?t:t instanceof Error?new m({error:t.message,location:t.location}):new m(t)})},_=function e(t,n){return t.causes?u.default.each(t.causes,function(t){return e(t,n)}):n.push(t),n},T=function(t,e){return null==e?t:null==t?e:"".concat(t,"/").concat(e)},O=m;n.default=O},{"./support/utils":23}],10:[function(t,e,n){"use strict";function Zn(t,e,n,r){this.message=t,this.expected=e,this.found=n,this.location=r,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,Zn)}function r(){this.constructor=o}var o;e.exports=(o=Zn,e=Error,r.prototype=e.prototype,o.prototype=new r,{SyntaxError:Zn,parse:function(f){var t=1<arguments.length?arguments[1]:{},p={},e={system:rn,type:function(){var t=65*Ve+5,e=Ke[t];if(e)return Ve=e.nextPos,e.result;return e=an(),Ke[t]={nextPos:Ve,result:e},e},heading:pn,attribute:yn,contract:dn,constraint:sn,literal:Tn,metadata:wn,lambda_expr:vn,type_def:un,import_def:on},n=rn,i=function(t,e,n,r){e={types:e};return t&&0<t.length&&(e.imports=t),r&&(r={name:"Main",type:r},n&&(r.metadata=n),e.types.push(r)),e},c=$n,a="@import",s={type:"literal",value:"@import",description:'"@import"'},l="as",y={type:"literal",value:"as",description:'"as"'},d=function(t,e){return{qualifier:e,from:t}},h=function(t){return{from:t}},v="=",b={type:"literal",value:"=",description:'"="'},m=function(t,e,n){return Un({name:e,type:n},t)},g=function(t,e,n){return{union:Un({candidates:$n(e,n)})}},u=function(t,e,n){return{sub:Un({superType:e,constraints:n},t)}},w="(",_={type:"literal",value:"(",description:'"("'},T=")",O={type:"literal",value:")",description:'")"'},x=function(t,e){for(var n=0;n<e.length;n++)e[n].native=[t,e[n].native];return e},j="::",P={type:"literal",value:"::",description:'"::"'},S=function(t){return[{native:t}]},A=function(t){return[{regexp:t}]},k=function(t){return[{range:t}]},E=function(t){return[{set:t}]},R=function(t){return[t]},C=":",q={type:"literal",value:":",description:'":"'},D=function(t,e,n){return Un({name:e,native:n.trim()},t)},F=function(t){return{native:t.trim()}},M="{",N={type:"literal",value:"{",description:'"{"'},z="}",I={type:"literal",value:"}",description:'"}"'},B=function(t,e){return{tuple:Un({heading:e},t)}},$="{{",U={type:"literal",value:"{{",description:'"{{"'},Z="}}",J={type:"literal",value:"}}",description:'"}}"'},H=function(t,e){return{relation:Un({heading:e},t)}},L=function(t,e,n,r){e={attributes:$n(t,e)};return e.options={allowExtra:r},e},V=function(t,e,n){e={attributes:$n(t,e)};return n&&(e.options={allowExtra:{any:{}}}),e},W="?",G={type:"literal",value:"?",description:'"?"'},Q=function(t,e,n,r){r={name:e,type:r};return n&&(r.required=!1),Un(r,t)},X=function(t,e){return{set:Un({elmType:e},t)}},K="[",Y={type:"literal",value:"[",description:'"["'},tt="]",et={type:"literal",value:"]",description:'"]"'},nt=function(t,e){return{seq:Un({elmType:e},t)}},rt="<",ot={type:"literal",value:"<",description:'"<"'},ut=">",it={type:"literal",value:">",description:'">"'},at=function(t,e,n){return{struct:Un({componentTypes:$n(e,n)},t)}},o=function(t,e){t=t||{};for(var n,r=[],o=0;o<e.length;o++)(n=e[o]).external||n.explicit||(t.jsType?n.internal=t.jsType:n.identity={}),r[o]=n;return t.contracts=r,{adt:t}},ct=".",st={type:"literal",value:".",description:'"."'},lt=function(t,e){var n={};return e&&(n.jsType=e[1]),Un(n,t)},ft="\\",pt={type:"literal",value:"\\",description:'"\\\\"'},yt=function(t,e,n){return t.explicit={dress:e,undress:n},t},dt=function(t,e){return t.external=e,t},ht=function(t,e,n){return Un({name:e,infoType:n},t)},vt=function(t){return{any:Un({},t)}},bt=function(t,e){return{builtin:Un({jsType:e},t)}},r=function(t){return{ref:{typeName:t}}},mt="|",gt={type:"literal",value:"|",description:'"|"'},wt=function(t,e){return[t.trim(),e.trim()]},_t="()",Tt={type:"literal",value:"()",description:'"()"'},Ot=/^[(,)]/,xt={type:"class",value:"[(,)]",description:"[(,)]"},jt={type:"any",description:"any character"},Pt="/-",St={type:"literal",value:"/-",description:'"/-"'},At="-/",kt={type:"literal",value:"-/",description:'"-/"'},Et=function(t,e){for(var n=$n(t,e),r={},o=0;o<n.length;o++)r[n[o][0]]=n[o][1];return r},Rt=function(t){return{description:t.toString().trim()}},Ct=function(t,e){return[t,e]},qt=/^["]/,Dt={type:"class",value:'["]',description:'["]'},Ft=/^[\\]/,Mt={type:"class",value:"[\\\\]",description:"[\\\\]"},Nt=function(t){return t.substring(1,t.length-1).replace(/\\"/,'"')},zt="..",It={type:"literal",value:"..",description:'".."'},Bt=function(t,e){return{min:t,min_inclusive:!0,max:e,max_inclusive:!0}},$t="...",Ut={type:"literal",value:"...",description:'"..."'},Zt=function(t,e){return{min:t,min_inclusive:!0,max:e,max_inclusive:!1}},Jt=function(t){return{min:t,min_inclusive:!0}},Ht="&",Lt={type:"literal",value:"&",description:'"&"'},Vt=function(t){return t},Wt=/^[a-zA-Z_$]/,Gt={type:"class",value:"[a-zA-Z_$]",description:"[a-zA-Z_$]"},Qt=/^[a-zA-Z0-9_$]/,Xt={type:"class",value:"[a-zA-Z0-9_$]",description:"[a-zA-Z0-9_$]"},Kt=function(t){return t},Yt=/^[1-9]/,te={type:"class",value:"[1-9]",description:"[1-9]"},ee=/^[0-9]/,ne={type:"class",value:"[0-9]",description:"[0-9]"},re=/^[0]/,oe={type:"class",value:"[0]",description:"[0]"},ue=/^[\-]/,ie={type:"class",value:"[-]",description:"[-]"},ae=function(t){return parseInt(t)},ce=function(t){return parseFloat(t)},se="true",le={type:"literal",value:"true",description:'"true"'},fe=function(){return!0},pe="false",ye={type:"literal",value:"false",description:'"false"'},de=function(){return!1},he=function(){return[]},ve="/",be={type:"literal",value:"/",description:'"/"'},me=/^[^\/]/,ge={type:"class",value:"[^/]",description:"[^/]"},we=function(t){return t},_e=/^[a-z]/,Te={type:"class",value:"[a-z]",description:"[a-z]"},Oe=/^[a-z0-9]/,xe={type:"class",value:"[a-z0-9]",description:"[a-z0-9]"},je=/^[a-zA-Z_]/,Pe={type:"class",value:"[a-zA-Z_]",description:"[a-zA-Z_]"},Se=/^[a-z$_]/,Ae={type:"class",value:"[a-z$_]",description:"[a-z$_]"},ke=/^[a-zA-Z0-9_]/,Ee={type:"class",value:"[a-zA-Z0-9_]",description:"[a-zA-Z0-9_]"},Re=/^[A-Z]/,Ce={type:"class",value:"[A-Z]",description:"[A-Z]"},qe=/^[a-zA-Z]/,De={type:"class",value:"[a-zA-Z]",description:"[a-zA-Z]"},Fe=/^[a-zA-Z0-9:.]/,Me={type:"class",value:"[a-zA-Z0-9:.]",description:"[a-zA-Z0-9:.]"},Ne=/^[ \n\t]/,ze={type:"class",value:"[ \\n\\t]",description:"[ \\n\\t]"},Ie=",",Be={type:"literal",value:",",description:'","'},$e="#",Ue={type:"literal",value:"#",description:'"#"'},Ze=/^[\n]/,Je={type:"class",value:"[\\n]",description:"[\\n]"},He=/^[ \t\n]/,Le={type:"class",value:"[ \\t\\n]",description:"[ \\t\\n]"},Ve=0,We=[{line:1,column:1,seenCR:!1}],Ge=0,Qe=[],Xe=0,Ke={};if("startRule"in t){if(!(t.startRule in e))throw new Error("Can't start parsing from rule \""+t.startRule+'".');n=e[t.startRule]}function Ye(t){var e,n,r=We[t];if(r)return r;for(e=t-1;!We[e];)e--;for(r={line:(r=We[e]).line,column:r.column,seenCR:r.seenCR};e<t;)"\n"===(n=f.charAt(e))?(r.seenCR||r.line++,r.column=1,r.seenCR=!1):"\r"===n||"\u2028"===n||"\u2029"===n?(r.line++,r.column=1,r.seenCR=!0):(r.column++,r.seenCR=!1),e++;return We[t]=r}function tn(t,e){var n=Ye(t),r=Ye(e);return{start:{offset:t,line:n.line,column:n.column},end:{offset:e,line:r.line,column:r.column}}}function en(t){Ve<Ge||(Ge<Ve&&(Ge=Ve,Qe=[]),Qe.push(t))}function nn(t,e,n,r){return null!==e&&function(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}(e),new Zn(null!==t?t:function(t,e){for(var n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r].description;function o(t){return t.charCodeAt(0).toString(16).toUpperCase()}return"Expected "+(1<t.length?n.slice(0,-1).join(", ")+" or "+n[t.length-1]:n[0])+" but "+(e?'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+o(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+o(t)}).replace(/[\u0100-\u0FFF]/g,function(t){return"\\u0"+o(t)}).replace(/[\u1000-\uFFFF]/g,function(t){return"\\u"+o(t)})+'"':"end of input")+" found."}(e,n),e,n,r)}function rn(){var t,e,n,r,o=65*Ve+0,u=Ke[o];return u?(Ve=u.nextPos,u.result):(u=Ve,u=zn()!==p&&(t=function(){var t,e,n,r,o,u=65*Ve+1,i=Ke[u];if(i)return Ve=i.nextPos,i.result;t=Ve,(i=on())===p&&(i=null);if(i!==p){for(e=[],n=Ve,r=zn(),n=r!==p?(o=on())!==p?r=[r,o]:(Ve=n,p):(Ve=n,p);n!==p;)e.push(n),n=Ve,r=zn(),n=r!==p?(o=on())!==p?r=[r,o]:(Ve=n,p):(Ve=n,p);t=e!==p?i=c(i,e):(Ve=t,p)}else Ve=t,t=p;return Ke[u]={nextPos:Ve,result:t},t}())!==p&&zn()!==p&&(e=function(){var t,e,n,r,o,u=65*Ve+3,i=Ke[u];if(i)return Ve=i.nextPos,i.result;t=Ve,(i=un())===p&&(i=null);if(i!==p){for(e=[],n=Ve,r=zn(),n=r!==p?(o=un())!==p?r=[r,o]:(Ve=n,p):(Ve=n,p);n!==p;)e.push(n),n=Ve,r=zn(),n=r!==p?(o=un())!==p?r=[r,o]:(Ve=n,p):(Ve=n,p);t=e!==p?i=c(i,e):(Ve=t,p)}else Ve=t,t=p;return Ke[u]={nextPos:Ve,result:t},t}())!==p&&zn()!==p&&(n=(n=wn())===p?null:n)!==p&&zn()!==p&&(r=(r=an())===p?null:r)!==p&&zn()!==p&&function(){var t,e,n=65*Ve+64,r=Ke[n];if(r)return Ve=r.nextPos,r.result;r=t=Ve,Xe++,f.length>Ve?(e=f.charAt(Ve),Ve++):(e=p,0===Xe&&en(jt));Xe--,r=e===p?void 0:(Ve=r,p);t=r!==p?f.substring(t,Ve):r;return Ke[n]={nextPos:Ve,result:t},t}()!==p?i(t,e,n,r):(Ve=u,p),Ke[o]={nextPos:Ve,result:u},u)}function on(){var t,e,n,r,o=65*Ve+2,u=Ke[o];return u?(Ve=u.nextPos,u.result):(u=Ve,f.substr(Ve,7)===a?(t=a,Ve+=7):(t=p,0===Xe&&en(s)),(u=t!==p&&Bn()!==p&&(e=Dn())!==p&&Bn()!==p?(f.substr(Ve,2)===l?(n=l,Ve+=2):(n=p,0===Xe&&en(y)),n!==p&&Bn()!==p&&(r=Cn())!==p?t=d(e,r):(Ve=u,p)):(Ve=u,p))===p&&(u=Ve,f.substr(Ve,7)===a?(t=a,Ve+=7):(t=p,0===Xe&&en(s)),u=t!==p&&Bn()!==p&&(e=Dn())!==p?t=h(e):(Ve=u,p)),Ke[o]={nextPos:Ve,result:u},u)}function un(){var t,e,n,r,o=65*Ve+4,u=Ke[o];return u?(Ve=u.nextPos,u.result):(t=Ve,t=(u=(u=wn())===p?null:u)!==p&&(e=En())!==p&&zn()!==p?(61===f.charCodeAt(Ve)?(n=v,Ve++):(n=p,0===Xe&&en(b)),n!==p&&zn()!==p&&(r=an())!==p?u=m(u,e,r):(Ve=t,p)):(Ve=t,p),Ke[o]={nextPos:Ve,result:t},t)}function an(){var t,e,n,r,o,u,i=65*Ve+6,a=Ke[i];if(a)return Ve=a.nextPos,a.result;if(t=Ve,(e=(e=wn())===p?null:e)!==p)if((a=cn())!==p){if(n=[],r=Ve,(r=(o=Mn())!==p&&(u=cn())!==p?o=[o,u]:(Ve=r,p))!==p)for(;r!==p;)n.push(r),r=Ve,r=(o=Mn())!==p&&(u=cn())!==p?o=[o,u]:(Ve=r,p);else n=p;t=n!==p?e=g(e,a,n):(Ve=t,p)}else Ve=t,t=p;else Ve=t,t=p;return t===p&&(t=cn()),Ke[i]={nextPos:Ve,result:t},t}function cn(){var t,e,n,r=65*Ve+7,o=Ke[r];return o?(Ve=o.nextPos,o.result):(t=Ve,(t=(o=(o=wn())===p?null:o)!==p&&(e=fn())!==p&&(n=sn())!==p?o=u(o,e,n):(Ve=t,p))===p&&(t=fn()),Ke[r]={nextPos:Ve,result:t},t)}function sn(){var t,e,n,r,o,u,i=65*Ve+8,a=Ke[i];return a?(Ve=a.nextPos,a.result):(a=Ve,40===f.charCodeAt(Ve)?(t=w,Ve++):(t=p,0===Xe&&en(_)),(a=t!==p&&(e=zn())!==p&&(n=An())!==p&&(r=Mn())!==p&&(o=function(){var t,e,n,r,o,u=65*Ve+9,i=Ke[u];if(i)return Ve=i.nextPos,i.result;if(t=Ve,(i=ln())!==p){for(e=[],n=Ve,r=Nn(),n=r!==p?(o=ln())!==p?r=[r,o]:(Ve=n,p):(Ve=n,p);n!==p;)e.push(n),n=Ve,r=Nn(),n=r!==p?(o=ln())!==p?r=[r,o]:(Ve=n,p):(Ve=n,p);t=e!==p?(n=Nn())!==p?i=c(i,e):(Ve=t,p):(Ve=t,p)}else Ve=t,t=p;t===p&&(t=Ve,(i=function(){var t,e=65*Ve+11,n=Ke[e];if(n)return Ve=n.nextPos,n.result;t=Ve,(n=bn())!==p&&(n=F(n));return t=n,Ke[e]={nextPos:Ve,result:t},t}())!==p&&(i=R(i)),t=i);return Ke[u]={nextPos:Ve,result:t},t}())!==p&&zn()!==p?(41===f.charCodeAt(Ve)?(u=T,Ve++):(u=p,0===Xe&&en(O)),u!==p?t=x(n,o):(Ve=a,p)):(Ve=a,p))===p&&(a=Ve,(a=(t=zn())!==p?(f.substr(Ve,2)===j?(e=j,Ve+=2):(e=p,0===Xe&&en(P)),e!==p&&(n=zn())!==p&&(r=xn())!==p?t=S(r):(Ve=a,p)):(Ve=a,p))===p&&(a=Ve,(a=(t=zn())!==p?(f.substr(Ve,2)===j?(e=j,Ve+=2):(e=p,0===Xe&&en(P)),e!==p&&(n=zn())!==p&&(r=Sn())!==p?t=A(r):(Ve=a,p)):(Ve=a,p))===p&&(a=Ve,(a=(t=zn())!==p?(f.substr(Ve,2)===j?(e=j,Ve+=2):(e=p,0===Xe&&en(P)),e!==p&&(n=zn())!==p&&(r=On())!==p?t=k(r):(Ve=a,p)):(Ve=a,p))===p&&(a=Ve,a=(t=zn())!==p?(f.substr(Ve,2)===j?(e=j,Ve+=2):(e=p,0===Xe&&en(P)),e!==p&&(n=zn())!==p&&(r=Pn())!==p?t=E(r):(Ve=a,p)):(Ve=a,p))))),Ke[i]={nextPos:Ve,result:a},a)}function ln(){var t,e,n,r,o=65*Ve+10,u=Ke[o];return u?(Ve=u.nextPos,u.result):(t=Ve,t=(u=(u=wn())===p?null:u)!==p&&(e=function(){var t,e,n,r,o=65*Ve+49,u=Ke[o];if(u)return Ve=u.nextPos,u.result;u=t=Ve,_e.test(f.charAt(Ve))?(e=f.charAt(Ve),Ve++):(e=p,0===Xe&&en(Te));if(e!==p){for(n=[],je.test(f.charAt(Ve))?(r=f.charAt(Ve),Ve++):(r=p,0===Xe&&en(Pe));r!==p;)n.push(r),je.test(f.charAt(Ve))?(r=f.charAt(Ve),Ve++):(r=p,0===Xe&&en(Pe));u=n!==p?e=[e,n]:(Ve=u,p)}else Ve=u,u=p;t=u!==p?f.substring(t,Ve):u;return Ke[o]={nextPos:Ve,result:t},t}())!==p?(58===f.charCodeAt(Ve)?(n=C,Ve++):(n=p,0===Xe&&en(q)),n!==p&&zn()!==p&&(r=bn())!==p?u=D(u,e,r):(Ve=t,p)):(Ve=t,p),Ke[o]={nextPos:Ve,result:t},t)}function fn(){var t=65*Ve+12,e=Ke[t];return e?(Ve=e.nextPos,e.result):((e=function(){var t,e,n,r=65*Ve+14,o=Ke[r];if(o)return Ve=o.nextPos,o.result;t=Ve,(o=wn())===p&&(o=null);t=o!==p?(f.substr(Ve,2)===$?(e=$,Ve+=2):(e=p,0===Xe&&en(U)),e!==p?zn()!==p?(e=pn())!==p?zn()!==p?(f.substr(Ve,2)===Z?(n=Z,Ve+=2):(n=p,0===Xe&&en(J)),n!==p?o=H(o,e):(Ve=t,p)):(Ve=t,p):(Ve=t,p):(Ve=t,p):(Ve=t,p)):(Ve=t,p);return Ke[r]={nextPos:Ve,result:t},t}())===p&&(e=function(){var t,e,n,r=65*Ve+13,o=Ke[r];if(o)return Ve=o.nextPos,o.result;t=Ve,(o=wn())===p&&(o=null);t=o!==p?(123===f.charCodeAt(Ve)?(e=M,Ve++):(e=p,0===Xe&&en(N)),e!==p?zn()!==p?(e=pn())!==p?zn()!==p?(125===f.charCodeAt(Ve)?(n=z,Ve++):(n=p,0===Xe&&en(I)),n!==p?o=B(o,e):(Ve=t,p)):(Ve=t,p):(Ve=t,p):(Ve=t,p):(Ve=t,p)):(Ve=t,p);return Ke[r]={nextPos:Ve,result:t},t}())===p&&(e=function(){var t=65*Ve+17,e=Ke[t];if(e)return Ve=e.nextPos,e.result;(e=function(){var t,e,n,r=65*Ve+18,o=Ke[r];if(o)return Ve=o.nextPos,o.result;t=Ve,(o=wn())===p&&(o=null);t=o!==p?(123===f.charCodeAt(Ve)?(e=M,Ve++):(e=p,0===Xe&&en(N)),e!==p?zn()!==p?(e=an())!==p?zn()!==p?(125===f.charCodeAt(Ve)?(n=z,Ve++):(n=p,0===Xe&&en(I)),n!==p?o=X(o,e):(Ve=t,p)):(Ve=t,p):(Ve=t,p):(Ve=t,p):(Ve=t,p)):(Ve=t,p);return Ke[r]={nextPos:Ve,result:t},t}())===p&&(e=function(){var t,e,n,r=65*Ve+19,o=Ke[r];if(o)return Ve=o.nextPos,o.result;t=Ve,(o=wn())===p&&(o=null);t=o!==p?(91===f.charCodeAt(Ve)?(e=K,Ve++):(e=p,0===Xe&&en(Y)),e!==p?zn()!==p?(e=an())!==p?zn()!==p?(93===f.charCodeAt(Ve)?(n=tt,Ve++):(n=p,0===Xe&&en(et)),n!==p?o=nt(o,e):(Ve=t,p)):(Ve=t,p):(Ve=t,p):(Ve=t,p):(Ve=t,p)):(Ve=t,p);return Ke[r]={nextPos:Ve,result:t},t}())===p&&(e=function(){var t,e,n,r,o,u,i=65*Ve+20,a=Ke[i];if(a)return Ve=a.nextPos,a.result;t=Ve,(a=wn())===p&&(a=null);if(a!==p)if(60===f.charCodeAt(Ve)?(e=rt,Ve++):(e=p,0===Xe&&en(ot)),e!==p)if((e=an())!==p){for(n=[],r=Ve,o=Nn(),r=o!==p?(u=an())!==p?o=[o,u]:(Ve=r,p):(Ve=r,p);r!==p;)n.push(r),r=Ve,o=Nn(),r=o!==p?(u=an())!==p?o=[o,u]:(Ve=r,p):(Ve=r,p);t=n!==p?(r=Nn())!==p?(62===f.charCodeAt(Ve)?(o=ut,Ve++):(o=p,0===Xe&&en(it)),o!==p?a=at(a,e,n):(Ve=t,p)):(Ve=t,p):(Ve=t,p)}else Ve=t,t=p;else Ve=t,t=p;else Ve=t,t=p;return Ke[i]={nextPos:Ve,result:t},t}())===p&&(e=function(){var t=65*Ve+21,e=Ke[t];if(e)return Ve=e.nextPos,e.result;(e=function(){var t,e,n=65*Ve+22,r=Ke[n];if(r)return Ve=r.nextPos,r.result;t=Ve,(e=function(){var t,e,n,r,o=65*Ve+23,u=Ke[o];if(u)return Ve=u.nextPos,u.result;t=Ve,(e=wn())===p&&(e=null);t=e!==p?(n=Ve,46===f.charCodeAt(Ve)?(r=ct,Ve++):(r=p,0===Xe&&en(st)),n=r!==p?(u=qn())!==p?r=[r,u]:(Ve=n,p):(Ve=n,p),n!==p?e=lt(e,n):(Ve=t,p)):(Ve=t,p);return Ke[o]={nextPos:Ve,result:t},t}())===p&&(e=null);t=e!==p?(r=zn(),r!==p?(r=function(){var t,e,n,r,o,u=65*Ve+24,i=Ke[u];if(i)return Ve=i.nextPos,i.result;if(t=Ve,(i=dn())!==p){for(e=[],n=Ve,r=Nn(),n=r!==p?(o=dn())!==p?r=[r,o]:(Ve=n,p):(Ve=n,p);n!==p;)e.push(n),n=Ve,r=Nn(),n=r!==p?(o=dn())!==p?r=[r,o]:(Ve=n,p):(Ve=n,p);t=e!==p?(n=Nn())!==p?i=c(i,e):(Ve=t,p):(Ve=t,p)}else Ve=t,t=p;return Ke[u]={nextPos:Ve,result:t},t}())!==p?e=o(e,r):(Ve=t,p):(Ve=t,p)):(Ve=t,p);return Ke[n]={nextPos:Ve,result:t},t}())===p&&(e=function(){var t,e,n=65*Ve+28,r=Ke[n];if(r)return Ve=r.nextPos,r.result;t=Ve,(r=wn())===p&&(r=null);t=r!==p?(46===f.charCodeAt(Ve)?(e=ct,Ve++):(e=p,0===Xe&&en(st)),e!==p?(e=qn())!==p?r=bt(r,e):(Ve=t,p):(Ve=t,p)):(Ve=t,p);return Ke[n]={nextPos:Ve,result:t},t}())===p&&(e=function(){var t,e,n=65*Ve+27,r=Ke[n];if(r)return Ve=r.nextPos,r.result;t=Ve,(r=wn())===p&&(r=null);t=r!==p?(46===f.charCodeAt(Ve)?(e=ct,Ve++):(e=p,0===Xe&&en(st)),e!==p?r=vt(r):(Ve=t,p)):(Ve=t,p);return Ke[n]={nextPos:Ve,result:t},t}())===p&&(e=function(){var t,e=65*Ve+29,n=Ke[e];if(n)return Ve=n.nextPos,n.result;t=Ve,(n=function(){var t,e,n,r,o,u,i,a=65*Ve+54,c=Ke[a];if(c)return Ve=c.nextPos,c.result;if(e=t=Ve,(c=En())!==p){if(n=[],r=Ve,47===f.charCodeAt(Ve)?(o=ve,Ve++):(o=p,0===Xe&&en(be)),o!==p){if(u=[],ke.test(f.charAt(Ve))?(i=f.charAt(Ve),Ve++):(i=p,0===Xe&&en(Ee)),i!==p)for(;i!==p;)u.push(i),ke.test(f.charAt(Ve))?(i=f.charAt(Ve),Ve++):(i=p,0===Xe&&en(Ee));else u=p;r=u!==p?o=[o,u]:(Ve=r,p)}else Ve=r,r=p;for(;r!==p;)if(n.push(r),r=Ve,47===f.charCodeAt(Ve)?(o=ve,Ve++):(o=p,0===Xe&&en(be)),o!==p){if(u=[],ke.test(f.charAt(Ve))?(i=f.charAt(Ve),Ve++):(i=p,0===Xe&&en(Ee)),i!==p)for(;i!==p;)u.push(i),ke.test(f.charAt(Ve))?(i=f.charAt(Ve),Ve++):(i=p,0===Xe&&en(Ee));else u=p;r=u!==p?o=[o,u]:(Ve=r,p)}else Ve=r,r=p;e=n!==p?c=[c,n]:(Ve=e,p)}else Ve=e,e=p;t=e!==p?f.substring(t,Ve):e;return Ke[a]={nextPos:Ve,result:t},t}())!==p&&(n=r(n));return t=n,Ke[e]={nextPos:Ve,result:t},t}());return Ke[t]={nextPos:Ve,result:e},e}());return Ke[t]={nextPos:Ve,result:e},e}()),Ke[t]={nextPos:Ve,result:e},e)}function pn(){var t,e,n,r,o,u,i=65*Ve+15,a=Ke[i];if(a)return Ve=a.nextPos,a.result;if(t=Ve,(a=(a=yn())===p?null:a)!==p){for(e=[],n=Ve,n=(r=Nn())!==p&&(o=yn())!==p?r=[r,o]:(Ve=n,p);n!==p;)e.push(n),n=Ve,n=(r=Nn())!==p&&(o=yn())!==p?r=[r,o]:(Ve=n,p);t=e!==p&&(n=Nn())!==p&&(r=Fn())!==p?(58===f.charCodeAt(Ve)?(o=C,Ve++):(o=p,0===Xe&&en(q)),o!==p&&zn()!==p&&(u=an())!==p?a=L(a,e,r,u):(Ve=t,p)):(Ve=t,p)}else Ve=t,t=p;if(t===p)if(t=Ve,(a=(a=yn())===p?null:a)!==p){for(e=[],n=Ve,n=(r=Nn())!==p&&(o=yn())!==p?r=[r,o]:(Ve=n,p);n!==p;)e.push(n),n=Ve,n=(r=Nn())!==p&&(o=yn())!==p?r=[r,o]:(Ve=n,p);t=e!==p&&(n=Nn())!==p&&(r=(r=Fn())===p?null:r)!==p?a=V(a,e,r):(Ve=t,p)}else Ve=t,t=p;return Ke[i]={nextPos:Ve,result:t},t}function yn(){var t,e,n,r,o,u=65*Ve+16,i=Ke[u];return i?(Ve=i.nextPos,i.result):(t=Ve,t=(i=(i=wn())===p?null:i)!==p&&(e=kn())!==p&&zn()!==p?(58===f.charCodeAt(Ve)?(n=C,Ve++):(n=p,0===Xe&&en(q)),n!==p?(63===f.charCodeAt(Ve)?(r=W,Ve++):(r=p,0===Xe&&en(G)),(r=r===p?null:r)!==p&&zn()!==p&&(o=an())!==p?i=Q(i,e,r,o):(Ve=t,p)):(Ve=t,p)):(Ve=t,p),Ke[u]={nextPos:Ve,result:t},t)}function dn(){var t,e,n,r,o,u=65*Ve+25,i=Ke[u];return i?(Ve=i.nextPos,i.result):(t=Ve,(t=(i=hn())!==p&&zn()!==p?(92===f.charCodeAt(Ve)?(e=ft,Ve++):(e=p,0===Xe&&en(pt)),e!==p&&(n=vn())!==p&&zn()!==p?(92===f.charCodeAt(Ve)?(r=ft,Ve++):(r=p,0===Xe&&en(pt)),r!==p&&(o=vn())!==p?i=yt(i,n,o):(Ve=t,p)):(Ve=t,p)):(Ve=t,p))===p&&(t=Ve,(t=(i=hn())!==p&&zn()!==p?(46===f.charCodeAt(Ve)?(e=ct,Ve++):(e=p,0===Xe&&en(st)),e!==p&&(n=qn())!==p?i=dt(i,n):(Ve=t,p)):(Ve=t,p))===p&&(t=hn())),Ke[u]={nextPos:Ve,result:t},t)}function hn(){var t,e,n,r,o,u=65*Ve+26,i=Ke[u];return i?(Ve=i.nextPos,i.result):(t=Ve,t=(i=(i=wn())===p?null:i)!==p?(60===f.charCodeAt(Ve)?(e=rt,Ve++):(e=p,0===Xe&&en(ot)),e!==p&&(n=function(){var t,e,n,r,o=65*Ve+48,u=Ke[o];if(u)return Ve=u.nextPos,u.result;u=t=Ve,_e.test(f.charAt(Ve))?(e=f.charAt(Ve),Ve++):(e=p,0===Xe&&en(Te));if(e!==p){for(n=[],Oe.test(f.charAt(Ve))?(r=f.charAt(Ve),Ve++):(r=p,0===Xe&&en(xe));r!==p;)n.push(r),Oe.test(f.charAt(Ve))?(r=f.charAt(Ve),Ve++):(r=p,0===Xe&&en(xe));u=n!==p?e=[e,n]:(Ve=u,p)}else Ve=u,u=p;t=u!==p?f.substring(t,Ve):u;return Ke[o]={nextPos:Ve,result:t},t}())!==p?(62===f.charCodeAt(Ve)?(r=ut,Ve++):(r=p,0===Xe&&en(it)),r!==p&&zn()!==p&&(o=an())!==p?i=ht(i,n,o):(Ve=t,p)):(Ve=t,p)):(Ve=t,p),Ke[u]={nextPos:Ve,result:t},t)}function vn(){var t,e,n,r,o,u=65*Ve+30,i=Ke[u];return i?(Ve=i.nextPos,i.result):(i=Ve,40===f.charCodeAt(Ve)?(t=w,Ve++):(t=p,0===Xe&&en(_)),i=t!==p&&zn()!==p&&(e=An())!==p&&zn()!==p?(124===f.charCodeAt(Ve)?(n=mt,Ve++):(n=p,0===Xe&&en(gt)),n!==p&&zn()!==p&&(r=bn())!==p&&zn()!==p?(41===f.charCodeAt(Ve)?(o=T,Ve++):(o=p,0===Xe&&en(O)),o!==p?t=wt(e,r):(Ve=i,p)):(Ve=i,p)):(Ve=i,p),Ke[u]={nextPos:Ve,result:i},i)}function bn(){var t,e,n=65*Ve+31,r=Ke[n];if(r)return Ve=r.nextPos,r.result;if(r=Ve,t=[],(e=(e=mn())===p?gn():e)!==p)for(;e!==p;)t.push(e),(e=mn())===p&&(e=gn());else t=p;return r=t!==p?f.substring(r,Ve):t,Ke[n]={nextPos:Ve,result:r},r}function mn(){var t,e,n,r,o=65*Ve+32,u=Ke[o];return u?(Ve=u.nextPos,u.result):(u=Ve,f.substr(Ve,2)===_t?(t=_t,Ve+=2):(t=p,0===Xe&&en(Tt)),t===p&&(t=Ve,40===f.charCodeAt(Ve)?(e=w,Ve++):(e=p,0===Xe&&en(_)),t=e!==p&&(n=bn())!==p?(41===f.charCodeAt(Ve)?(r=T,Ve++):(r=p,0===Xe&&en(O)),r!==p?e=[e,n,r]:(Ve=t,p)):(Ve=t,p)),u=t!==p?f.substring(u,Ve):t,Ke[o]={nextPos:Ve,result:u},u)}function gn(){var t,e,n,r,o=65*Ve+33,u=Ke[o];if(u)return Ve=u.nextPos,u.result;if(t=[],n=e=u=Ve,Xe++,Ot.test(f.charAt(Ve))?(r=f.charAt(Ve),Ve++):(r=p,0===Xe&&en(xt)),Xe--,(e=(n=r===p?void 0:(Ve=n,p))!==p?(f.length>Ve?(r=f.charAt(Ve),Ve++):(r=p,0===Xe&&en(jt)),r!==p?n=[n,r]:(Ve=e,p)):(Ve=e,p))!==p)for(;e!==p;)t.push(e),n=e=Ve,Xe++,Ot.test(f.charAt(Ve))?(r=f.charAt(Ve),Ve++):(r=p,0===Xe&&en(xt)),Xe--,e=(n=r===p?void 0:(Ve=n,p))!==p?(f.length>Ve?(r=f.charAt(Ve),Ve++):(r=p,0===Xe&&en(jt)),r!==p?n=[n,r]:(Ve=e,p)):(Ve=e,p);else t=p;return u=t!==p?f.substring(u,Ve):t,Ke[o]={nextPos:Ve,result:u},u}function wn(){var t,e,n,r,o,u,i,a=65*Ve+34,c=Ke[a];if(c)return Ve=c.nextPos,c.result;if(c=Ve,f.substr(Ve,2)===Pt?(t=Pt,Ve+=2):(t=p,0===Xe&&en(St)),t!==p)if((e=zn())!==p)if((n=_n())!==p){for(r=[],o=Ve,o=(u=Nn())!==p&&(i=_n())!==p?u=[u,i]:(Ve=o,p);o!==p;)r.push(o),o=Ve,o=(u=Nn())!==p&&(i=_n())!==p?u=[u,i]:(Ve=o,p);c=r!==p&&(o=zn())!==p?(f.substr(Ve,2)===At?(u=At,Ve+=2):(u=p,0===Xe&&en(kt)),u!==p&&(i=zn())!==p?t=Et(n,r):(Ve=c,p)):(Ve=c,p)}else Ve=c,c=p;else Ve=c,c=p;else Ve=c,c=p;if(c===p)if(c=Ve,f.substr(Ve,2)===Pt?(t=Pt,Ve+=2):(t=p,0===Xe&&en(St)),t!==p){if(n=[],o=r=e=Ve,Xe++,f.substr(Ve,2)===At?(u=At,Ve+=2):(u=p,0===Xe&&en(kt)),Xe--,(r=(o=u===p?void 0:(Ve=o,p))!==p?(f.length>Ve?(u=f.charAt(Ve),Ve++):(u=p,0===Xe&&en(jt)),u!==p?o=[o,u]:(Ve=r,p)):(Ve=r,p))!==p)for(;r!==p;)n.push(r),o=r=Ve,Xe++,f.substr(Ve,2)===At?(u=At,Ve+=2):(u=p,0===Xe&&en(kt)),Xe--,r=(o=u===p?void 0:(Ve=o,p))!==p?(f.length>Ve?(u=f.charAt(Ve),Ve++):(u=p,0===Xe&&en(jt)),u!==p?o=[o,u]:(Ve=r,p)):(Ve=r,p);else n=p;c=(e=n!==p?f.substring(e,Ve):n)!==p?(f.substr(Ve,2)===At?(n=At,Ve+=2):(n=p,0===Xe&&en(kt)),n!==p&&(r=zn())!==p?t=Rt(e):(Ve=c,p)):(Ve=c,p)}else Ve=c,c=p;return Ke[a]={nextPos:Ve,result:c},c}function _n(){var t,e,n,r,o=65*Ve+35,u=Ke[o];return u?(Ve=u.nextPos,u.result):(t=Ve,t=(e=kn())!==p&&(u=(u=Bn())===p?null:u)!==p?(58===f.charCodeAt(Ve)?(n=C,Ve++):(n=p,0===Xe&&en(q)),n!==p&&(n=(n=Bn())===p?null:n)!==p&&(r=Tn())!==p?Ct(e,r):(Ve=t,p)):(Ve=t,p),Ke[o]={nextPos:Ve,result:t},t)}function Tn(){var t=65*Ve+36,e=Ke[t];return e?(Ve=e.nextPos,e.result):((e=function(){var t,e,n,r,o,u,i,a=65*Ve+37,c=Ke[a];if(c)return Ve=c.nextPos,c.result;c=e=t=Ve,qt.test(f.charAt(Ve))?(n=f.charAt(Ve),Ve++):(n=p,0===Xe&&en(Dt));if(n!==p){for(r=[],o=Ve,Ft.test(f.charAt(Ve))?(u=f.charAt(Ve),Ve++):(u=p,0===Xe&&en(Mt)),(o=u!==p?(qt.test(f.charAt(Ve))?(i=f.charAt(Ve),Ve++):(i=p,0===Xe&&en(Dt)),i!==p?u=[u,i]:(Ve=o,p)):(Ve=o,p))===p&&(u=o=Ve,Xe++,qt.test(f.charAt(Ve))?(i=f.charAt(Ve),Ve++):(i=p,0===Xe&&en(Dt)),Xe--,u=i===p?void 0:(Ve=u,p),o=u!==p?(f.length>Ve?(i=f.charAt(Ve),Ve++):(i=p,0===Xe&&en(jt)),i!==p?u=[u,i]:(Ve=o,p)):(Ve=o,p));o!==p;)r.push(o),o=Ve,Ft.test(f.charAt(Ve))?(u=f.charAt(Ve),Ve++):(u=p,0===Xe&&en(Mt)),(o=u!==p?(qt.test(f.charAt(Ve))?(i=f.charAt(Ve),Ve++):(i=p,0===Xe&&en(Dt)),i!==p?u=[u,i]:(Ve=o,p)):(Ve=o,p))===p&&(u=o=Ve,Xe++,qt.test(f.charAt(Ve))?(i=f.charAt(Ve),Ve++):(i=p,0===Xe&&en(Dt)),Xe--,u=i===p?void 0:(Ve=u,p),o=u!==p?(f.length>Ve?(i=f.charAt(Ve),Ve++):(i=p,0===Xe&&en(jt)),i!==p?u=[u,i]:(Ve=o,p)):(Ve=o,p));c=r!==p?(qt.test(f.charAt(Ve))?(o=f.charAt(Ve),Ve++):(o=p,0===Xe&&en(Dt)),o!==p?n=[n,r,o]:(Ve=c,p)):(Ve=c,p)}else Ve=c,c=p;e=c!==p?f.substring(e,Ve):c;e!==p&&(e=Nt(e));return t=e,Ke[a]={nextPos:Ve,result:t},t}())===p&&(e=On())===p&&(e=function(){var t,e,n,r,o,u,i=65*Ve+42,a=Ke[i];if(a)return Ve=a.nextPos,a.result;n=e=t=Ve,(a=jn())===p&&(a=null);if(a!==p)if(46===f.charCodeAt(Ve)?(r=ct,Ve++):(r=p,0===Xe&&en(st)),r!==p){if(o=[],ee.test(f.charAt(Ve))?(u=f.charAt(Ve),Ve++):(u=p,0===Xe&&en(ne)),u!==p)for(;u!==p;)o.push(u),ee.test(f.charAt(Ve))?(u=f.charAt(Ve),Ve++):(u=p,0===Xe&&en(ne));else o=p;n=o!==p?a=[a,r,o]:(Ve=n,p)}else Ve=n,n=p;else Ve=n,n=p;e=n!==p?f.substring(e,Ve):n;e!==p&&(e=ce(e));return t=e,Ke[i]={nextPos:Ve,result:t},t}())===p&&(e=jn())===p&&(e=function(){var t,e=65*Ve+43,n=Ke[e];if(n)return Ve=n.nextPos,n.result;n=Ve,f.substr(Ve,4)===se?(t=se,Ve+=4):(t=p,0===Xe&&en(le));t!==p&&(t=fe());(n=t)===p&&(n=Ve,f.substr(Ve,5)===pe?(t=pe,Ve+=5):(t=p,0===Xe&&en(ye)),t!==p&&(t=de()),n=t);return Ke[e]={nextPos:Ve,result:n},n}())===p&&(e=function(){var t,e,n,r,o,u,i=65*Ve+44,a=Ke[i];if(a)return Ve=a.nextPos,a.result;a=Ve,91===f.charCodeAt(Ve)?(t=K,Ve++):(t=p,0===Xe&&en(Y));if(t!==p)if(zn()!==p)if((e=Tn())!==p){for(n=[],r=Ve,o=Nn(),r=o!==p?(u=Tn())!==p?o=[o,u]:(Ve=r,p):(Ve=r,p);r!==p;)n.push(r),r=Ve,o=Nn(),r=o!==p?(u=Tn())!==p?o=[o,u]:(Ve=r,p):(Ve=r,p);a=n!==p?(r=zn())!==p?(93===f.charCodeAt(Ve)?(o=tt,Ve++):(o=p,0===Xe&&en(et)),o!==p?t=c(e,n):(Ve=a,p)):(Ve=a,p):(Ve=a,p)}else Ve=a,a=p;else Ve=a,a=p;else Ve=a,a=p;a===p&&(a=Ve,91===f.charCodeAt(Ve)?(t=K,Ve++):(t=p,0===Xe&&en(Y)),a=t!==p?zn()!==p?(93===f.charCodeAt(Ve)?(e=tt,Ve++):(e=p,0===Xe&&en(et)),e!==p?t=he():(Ve=a,p)):(Ve=a,p):(Ve=a,p));return Ke[i]={nextPos:Ve,result:a},a}())===p&&(e=Pn())===p&&(e=Sn())===p&&(e=xn()),Ke[t]={nextPos:Ve,result:e},e)}function On(){var t,e,n,r=65*Ve+38,o=Ke[r];return o?(Ve=o.nextPos,o.result):(t=Ve,(t=(o=jn())!==p?(f.substr(Ve,2)===zt?(e=zt,Ve+=2):(e=p,0===Xe&&en(It)),e!==p&&(n=jn())!==p?o=Bt(o,n):(Ve=t,p)):(Ve=t,p))===p&&(t=Ve,(t=(o=jn())!==p?(f.substr(Ve,3)===$t?(e=$t,Ve+=3):(e=p,0===Xe&&en(Ut)),e!==p&&(n=jn())!==p?o=Zt(o,n):(Ve=t,p)):(Ve=t,p))===p&&(t=Ve,t=(o=jn())!==p?(f.substr(Ve,2)===zt?(e=zt,Ve+=2):(e=p,0===Xe&&en(It)),e!==p&&(n=zn())!==p?o=Jt(o):(Ve=t,p)):(Ve=t,p))),Ke[r]={nextPos:Ve,result:t},t)}function xn(){var t,e,n,r=65*Ve+39,o=Ke[r];return o?(Ve=o.nextPos,o.result):(t=Ve,38===f.charCodeAt(Ve)?(e=Ht,Ve++):(e=p,0===Xe&&en(Lt)),t=e!==p?(n=Ve,(n=(o=function t(){var e,n,r,o,u,i,a,c;var s=65*Ve+40,l=Ke[s];if(l)return Ve=l.nextPos,l.result;e=Ve;n=Ve;l=Ve;Wt.test(f.charAt(Ve))?(r=f.charAt(Ve),Ve++):(r=p,0===Xe&&en(Gt));if(r!==p){for(o=[],Qt.test(f.charAt(Ve))?(u=f.charAt(Ve),Ve++):(u=p,0===Xe&&en(Xt));u!==p;)o.push(u),Qt.test(f.charAt(Ve))?(u=f.charAt(Ve),Ve++):(u=p,0===Xe&&en(Xt));if(o!==p){for(u=[],i=Ve,46===f.charCodeAt(Ve)?(a=ct,Ve++):(a=p,0===Xe&&en(st)),i=a!==p?(c=t())!==p?a=[a,c]:(Ve=i,p):(Ve=i,p);i!==p;)u.push(i),i=Ve,46===f.charCodeAt(Ve)?(a=ct,Ve++):(a=p,0===Xe&&en(st)),i=a!==p?(c=t())!==p?a=[a,c]:(Ve=i,p):(Ve=i,p);l=u!==p?r=[r,o,u]:(Ve=l,p)}else Ve=l,l=p}else Ve=l,l=p;n=l!==p?f.substring(n,Ve):l;n!==p&&(n=Kt(n));e=n;Ke[s]={nextPos:Ve,result:e};return e}())!==p?f.substring(n,Ve):o)!==p?e=Vt(n):(Ve=t,p)):(Ve=t,p),Ke[r]={nextPos:Ve,result:t},t)}function jn(){var t,e,n,r,o,u=65*Ve+41,i=Ke[u];if(i)return Ve=i.nextPos,i.result;if(i=e=t=Ve,Yt.test(f.charAt(Ve))?(n=f.charAt(Ve),Ve++):(n=p,0===Xe&&en(te)),n!==p){for(r=[],ee.test(f.charAt(Ve))?(o=f.charAt(Ve),Ve++):(o=p,0===Xe&&en(ne));o!==p;)r.push(o),ee.test(f.charAt(Ve))?(o=f.charAt(Ve),Ve++):(o=p,0===Xe&&en(ne));i=r!==p?n=[n,r]:(Ve=i,p)}else Ve=i,i=p;return i===p&&(re.test(f.charAt(Ve))?(i=f.charAt(Ve),Ve++):(i=p,0===Xe&&en(oe)),i===p&&(i=Ve,ue.test(f.charAt(Ve))?(n=f.charAt(Ve),Ve++):(n=p,0===Xe&&en(ie)),i=n!==p&&(r=jn())!==p?n=[n,r]:(Ve=i,p))),(e=i!==p?f.substring(e,Ve):i)!==p&&(e=ae(e)),t=e,Ke[u]={nextPos:Ve,result:t},t}function Pn(){var t,e,n,r,o,u,i=65*Ve+45,a=Ke[i];if(a)return Ve=a.nextPos,a.result;if(a=Ve,123===f.charCodeAt(Ve)?(t=M,Ve++):(t=p,0===Xe&&en(N)),t!==p)if(zn()!==p)if((e=Tn())!==p){for(n=[],r=Ve,r=(o=Nn())!==p&&(u=Tn())!==p?o=[o,u]:(Ve=r,p);r!==p;)n.push(r),r=Ve,r=(o=Nn())!==p&&(u=Tn())!==p?o=[o,u]:(Ve=r,p);a=n!==p&&(r=zn())!==p?(125===f.charCodeAt(Ve)?(o=z,Ve++):(o=p,0===Xe&&en(I)),o!==p?t=c(e,n):(Ve=a,p)):(Ve=a,p)}else Ve=a,a=p;else Ve=a,a=p;else Ve=a,a=p;return a===p&&(a=Ve,123===f.charCodeAt(Ve)?(t=M,Ve++):(t=p,0===Xe&&en(N)),a=t!==p&&zn()!==p?(125===f.charCodeAt(Ve)?(e=z,Ve++):(e=p,0===Xe&&en(I)),e!==p?t=he():(Ve=a,p)):(Ve=a,p)),Ke[i]={nextPos:Ve,result:a},a}function Sn(){var t,e,n,r,o=65*Ve+46,u=Ke[o];if(u)return Ve=u.nextPos,u.result;if(t=Ve,47===f.charCodeAt(Ve)?(e=ve,Ve++):(e=p,0===Xe&&en(be)),e!==p){if(u=Ve,n=[],me.test(f.charAt(Ve))?(r=f.charAt(Ve),Ve++):(r=p,0===Xe&&en(ge)),r!==p)for(;r!==p;)n.push(r),me.test(f.charAt(Ve))?(r=f.charAt(Ve),Ve++):(r=p,0===Xe&&en(ge));else n=p;t=(u=n!==p?f.substring(u,Ve):n)!==p?(47===f.charCodeAt(Ve)?(n=ve,Ve++):(n=p,0===Xe&&en(be)),n!==p?e=we(u):(Ve=t,p)):(Ve=t,p)}else Ve=t,t=p;return Ke[o]={nextPos:Ve,result:t},t}function An(){var t,e,n=65*Ve+47,r=Ke[n];if(r)return Ve=r.nextPos,r.result;if(r=Ve,t=[],_e.test(f.charAt(Ve))?(e=f.charAt(Ve),Ve++):(e=p,0===Xe&&en(Te)),e!==p)for(;e!==p;)t.push(e),_e.test(f.charAt(Ve))?(e=f.charAt(Ve),Ve++):(e=p,0===Xe&&en(Te));else t=p;return r=t!==p?f.substring(r,Ve):t,Ke[n]={nextPos:Ve,result:r},r}function kn(){var t,e,n,r,o=65*Ve+50,u=Ke[o];if(u)return Ve=u.nextPos,u.result;if(u=t=Ve,Se.test(f.charAt(Ve))?(e=f.charAt(Ve),Ve++):(e=p,0===Xe&&en(Ae)),e!==p){for(n=[],ke.test(f.charAt(Ve))?(r=f.charAt(Ve),Ve++):(r=p,0===Xe&&en(Ee));r!==p;)n.push(r),ke.test(f.charAt(Ve))?(r=f.charAt(Ve),Ve++):(r=p,0===Xe&&en(Ee));u=n!==p?e=[e,n]:(Ve=u,p)}else Ve=u,u=p;return t=u!==p?f.substring(t,Ve):u,Ke[o]={nextPos:Ve,result:t},t}function En(){var t,e,n,r,o,u,i,a=65*Ve+51,c=Ke[a];if(c)return Ve=c.nextPos,c.result;if(n=e=t=Ve,(n=(n=(c=Cn())!==p?(46===f.charCodeAt(Ve)?(r=ct,Ve++):(r=p,0===Xe&&en(st)),r!==p?c=[c,r]:(Ve=n,p)):(Ve=n,p))===p?null:n)!==p)if((c=Rn())!==p){for(r=[],o=Ve,46===f.charCodeAt(Ve)?(u=ct,Ve++):(u=p,0===Xe&&en(st)),o=u!==p&&(i=Rn())!==p?u=[u,i]:(Ve=o,p);o!==p;)r.push(o),o=Ve,46===f.charCodeAt(Ve)?(u=ct,Ve++):(u=p,0===Xe&&en(st)),o=u!==p&&(i=Rn())!==p?u=[u,i]:(Ve=o,p);e=r!==p?n=[n,c,r]:(Ve=e,p)}else Ve=e,e=p;else Ve=e,e=p;return t=e!==p?f.substring(t,Ve):e,Ke[a]={nextPos:Ve,result:t},t}function Rn(){var t,e,n,r,o=65*Ve+52,u=Ke[o];if(u)return Ve=u.nextPos,u.result;if(u=t=Ve,Re.test(f.charAt(Ve))?(e=f.charAt(Ve),Ve++):(e=p,0===Xe&&en(Ce)),e!==p){for(n=[],qe.test(f.charAt(Ve))?(r=f.charAt(Ve),Ve++):(r=p,0===Xe&&en(De));r!==p;)n.push(r),qe.test(f.charAt(Ve))?(r=f.charAt(Ve),Ve++):(r=p,0===Xe&&en(De));u=n!==p?e=[e,n]:(Ve=u,p)}else Ve=u,u=p;return t=u!==p?f.substring(t,Ve):u,Ke[o]={nextPos:Ve,result:t},t}function Cn(){var t,e,n,r,o=65*Ve+53,u=Ke[o];if(u)return Ve=u.nextPos,u.result;if(u=t=Ve,_e.test(f.charAt(Ve))?(e=f.charAt(Ve),Ve++):(e=p,0===Xe&&en(Te)),e!==p){for(n=[],Oe.test(f.charAt(Ve))?(r=f.charAt(Ve),Ve++):(r=p,0===Xe&&en(xe));r!==p;)n.push(r),Oe.test(f.charAt(Ve))?(r=f.charAt(Ve),Ve++):(r=p,0===Xe&&en(xe));u=n!==p?e=[e,n]:(Ve=u,p)}else Ve=u,u=p;return t=u!==p?f.substring(t,Ve):u,Ke[o]={nextPos:Ve,result:t},t}function qn(){var t,e,n=65*Ve+55,r=Ke[n];if(r)return Ve=r.nextPos,r.result;if(r=Ve,t=[],Fe.test(f.charAt(Ve))?(e=f.charAt(Ve),Ve++):(e=p,0===Xe&&en(Me)),e!==p)for(;e!==p;)t.push(e),Fe.test(f.charAt(Ve))?(e=f.charAt(Ve),Ve++):(e=p,0===Xe&&en(Me));else t=p;return r=t!==p?f.substring(r,Ve):t,Ke[n]={nextPos:Ve,result:r},r}function Dn(){var t,e,n,r,o=65*Ve+56,u=Ke[o];if(u)return Ve=u.nextPos,u.result;if(t=[],n=e=u=Ve,Xe++,Ne.test(f.charAt(Ve))?(r=f.charAt(Ve),Ve++):(r=p,0===Xe&&en(ze)),Xe--,(e=(n=r===p?void 0:(Ve=n,p))!==p?(f.length>Ve?(r=f.charAt(Ve),Ve++):(r=p,0===Xe&&en(jt)),r!==p?n=[n,r]:(Ve=e,p)):(Ve=e,p))!==p)for(;e!==p;)t.push(e),n=e=Ve,Xe++,Ne.test(f.charAt(Ve))?(r=f.charAt(Ve),Ve++):(r=p,0===Xe&&en(ze)),Xe--,e=(n=r===p?void 0:(Ve=n,p))!==p?(f.length>Ve?(r=f.charAt(Ve),Ve++):(r=p,0===Xe&&en(jt)),r!==p?n=[n,r]:(Ve=e,p)):(Ve=e,p);else t=p;return u=t!==p?f.substring(u,Ve):t,Ke[o]={nextPos:Ve,result:u},u}function Fn(){var t,e,n,r,o=65*Ve+57,u=Ke[o];return u?(Ve=u.nextPos,u.result):(e=t=Ve,t=(e=(u=zn())!==p?(f.substr(Ve,3)===$t?(n=$t,Ve+=3):(n=p,0===Xe&&en(Ut)),n!==p&&(r=zn())!==p?[u,n,r]:(Ve=e,p)):(Ve=e,p))!==p?f.substring(t,Ve):e,Ke[o]={nextPos:Ve,result:t},t)}function Mn(){var t,e,n,r,o=65*Ve+58,u=Ke[o];return u?(Ve=u.nextPos,u.result):(e=t=Ve,t=(e=(u=zn())!==p?(124===f.charCodeAt(Ve)?(n=mt,Ve++):(n=p,0===Xe&&en(gt)),n!==p&&(r=zn())!==p?[u,n,r]:(Ve=e,p)):(Ve=e,p))!==p?f.substring(t,Ve):e,Ke[o]={nextPos:Ve,result:t},t)}function Nn(){var t,e,n,r,o,u,i=65*Ve+60,a=Ke[i];return a?(Ve=a.nextPos,a.result):(t=(e=(e=(u=Ke[o=65*(t=Ve)+59])?(Ve=u.nextPos,u.result):(a=e=Ve,e=(a=(u=zn())!==p?(44===f.charCodeAt(Ve)?(n=Ie,Ve++):(n=p,0===Xe&&en(Be)),n!==p&&(r=zn())!==p?[u,n,r]:(Ve=a,p)):(Ve=a,p))!==p?f.substring(e,Ve):a,Ke[o]={nextPos:Ve,result:e},e))===p?zn():e)!==p?f.substring(t,Ve):e,Ke[i]={nextPos:Ve,result:t},t)}function zn(){var t,e,n=65*Ve+61,r=Ke[n];if(r)return Ve=r.nextPos,r.result;for(r=Ve,t=[],(e=Bn())===p&&(e=In());e!==p;)t.push(e),(e=Bn())===p&&(e=In());return r=t!==p?f.substring(r,Ve):t,Ke[n]={nextPos:Ve,result:r},r}function In(){var t,e,n,r,o,u,i=65*Ve+62,a=Ke[i];if(a)return Ve=a.nextPos,a.result;if(a=t=Ve,35===f.charCodeAt(Ve)?(e=$e,Ve++):(e=p,0===Xe&&en(Ue)),e!==p){for(n=[],o=r=Ve,Xe++,Ze.test(f.charAt(Ve))?(u=f.charAt(Ve),Ve++):(u=p,0===Xe&&en(Je)),Xe--,r=(o=u===p?void 0:(Ve=o,p))!==p?(f.length>Ve?(u=f.charAt(Ve),Ve++):(u=p,0===Xe&&en(jt)),u!==p?o=[o,u]:(Ve=r,p)):(Ve=r,p);r!==p;)n.push(r),o=r=Ve,Xe++,Ze.test(f.charAt(Ve))?(u=f.charAt(Ve),Ve++):(u=p,0===Xe&&en(Je)),Xe--,r=(o=u===p?void 0:(Ve=o,p))!==p?(f.length>Ve?(u=f.charAt(Ve),Ve++):(u=p,0===Xe&&en(jt)),u!==p?o=[o,u]:(Ve=r,p)):(Ve=r,p);a=n!==p?(Ze.test(f.charAt(Ve))?(r=f.charAt(Ve),Ve++):(r=p,0===Xe&&en(Je)),(r=r===p?null:r)!==p?e=[e,n,r]:(Ve=a,p)):(Ve=a,p)}else Ve=a,a=p;return t=a!==p?f.substring(t,Ve):a,Ke[i]={nextPos:Ve,result:t},t}function Bn(){var t,e,n=65*Ve+63,r=Ke[n];if(r)return Ve=r.nextPos,r.result;if(r=Ve,t=[],He.test(f.charAt(Ve))?(e=f.charAt(Ve),Ve++):(e=p,0===Xe&&en(Le)),e!==p)for(;e!==p;)t.push(e),He.test(f.charAt(Ve))?(e=f.charAt(Ve),Ve++):(e=p,0===Xe&&en(Le));else t=p;return r=t!==p?f.substring(r,Ve):t,Ke[n]={nextPos:Ve,result:r},r}function $n(t,e){for(var n=t?[t]:[],r=0;r<e.length;r++)n[r+1]=e[r][e[r].length-1];return n}function Un(t,e){return e&&(t.metadata=e),t}if((n=n())!==p&&Ve===f.length)return n;throw n!==p&&Ve<f.length&&en({type:"end",description:"end of input"}),nn(null,Qe,Ge<f.length?f.charAt(Ge):null,Ge<f.length?tn(Ge,Ge+1):tn(Ge,Ge))}})},{}],11:[function(u,t,e){!function(o){!function(){"use strict";t.exports=function(){u("./stdlib/data");function a(e,t,n){try{var r=e+(t||"");return c.statSync(r),[r,t||r.match(/(\.[a-z]{3,4})$/)[1]]}catch(t){if(0===n.length)throw new Error("No such file: `".concat(e,"`"));return a(e,n[0],n.slice(1))}}var t=function(r,o){return function(t,e){for(var n=0;n<r.length;n++)if(!r[n](t,e))return null;return o(t,e)}},c=u("fs"),e=t([function(t){return!!c}],function(t,e){var n=t.match(/^file:\/\/(.*?)$/);if(!n)return null;var r=a(n[1],null,[".fio",".json"]),n=r[0],o=r[1],u=c.readFileSync(n).toString(),i=null;switch(o){case".fio":i=e.Finitio.parse(u);break;case".json":i=JSON.parse(u);break;default:throw new Error("Unrecognized extension: `".concat(o,"`"))}return[t,i]}),n=t([],function(t,e){var n=t.match(/^(\.\/)|^(\.\.\/)/);if(!n)return null;var r=e.sourceUrl;if(!r)throw new Error("Unable to resolve relative path: `".concat(t,"`"));return r=r.replace(/\/[^/]+$/,""),n[2]&&(r=r.replace(/\/[^/]+$/,"")),r="".concat(r,"/").concat(t.slice(n[0].length)),e.importResolver(r,e,{raw:!0})}),r=t([function(t){return!!o}],function(e,t){var n=e.match(/^finitio\/(.*)$/);if(!n)return null;n=n[1];try{return u("./stdlib/".concat(n))(t,{raw:!0})}catch(t){throw new Error("No such stdlib system: `".concat(e,"`"),t)}}),t=function t(e,n,r){for(var o,u=Object.keys(t),i=0;i<u.length;i++)if(o=(0,t[u[i]])(e,n)){if(r&&r.raw)return o;var a=n.Finitio.world(n,{sourceUrl:o[0]});return n.Finitio.system(o[1],a)}throw new Error("Unable to resolve: `".concat(e,"`"))};return t.File=e,t.StdLib=r,t.Relative=n,t}()}.call(this)}.call(this,"/lib/finitio")},{"./stdlib/data":12,fs:38}],12:[function(n,t,e){"use strict";var u;t.exports=(u={"http://finitio.io/0.4/stdlib/data":{types:[{name:"Any",type:{any:{}},metadata:{description:"Recognizes everything"}},{name:"Nil",type:{sub:{superType:{any:{}},constraints:[{native:["v","v === null"]}]}},metadata:{description:"Recognizes JavaScript's null"}},{name:"Boolean",type:{builtin:{jsType:"Boolean"}},metadata:{description:"Recognizes true and false"}},{name:"True",type:{sub:{superType:{builtin:{jsType:"Boolean"}},constraints:[{native:["b","b === true"]}]}},metadata:{description:"Only true"}},{name:"False",type:{sub:{superType:{builtin:{jsType:"Boolean"}},constraints:[{native:["b","b === false"]}]}},metadata:{description:"Only false"}},{name:"Numeric",type:{builtin:{jsType:"Number"}},metadata:{description:"Recognizes any number"}},{name:"Real",type:{sub:{superType:{builtin:{jsType:"Number"}},constraints:[{native:["n","(n===0.0) || !(n % 1 === 0)"]}]}},metadata:{description:"Recognizes only real numbers"}},{name:"Integer",type:{sub:{superType:{builtin:{jsType:"Number"}},constraints:[{native:["n","n % 1 === 0"]}]}},metadata:{description:"Recognizes only integer numbers"}},{name:"String",type:{builtin:{jsType:"String"}},metadata:{description:"Recognizes every string"}},{name:"Date",type:{adt:{jsType:"Date",contracts:[{name:"iso8601",infoType:{builtin:{jsType:"String"}},external:"Finitio.Contracts.Date.iso8601"},{name:"milliseconds",infoType:{builtin:{jsType:"Number"}},external:"Finitio.Contracts.Date.milliseconds"}]}},metadata:{description:"Recognizes valid dates"}},{name:"Time",type:{adt:{jsType:"Date",contracts:[{name:"iso8601",infoType:{builtin:{jsType:"String"}},external:"Finitio.Contracts.Time.iso8601"},{name:"milliseconds",infoType:{builtin:{jsType:"Number"}},external:"Finitio.Contracts.Time.milliseconds"}]}},metadata:{description:"Recognizes valid times"}}]}},function(t,e){var o;return(t=(t=t||n("finitio").World).Finitio.world(t,{importResolver:(o=t.importResolver,function(t,e,n){var r=u[t];if(r)return n&&n.raw?[t,r]:e.Finitio.system(r,e);if(o)return o(t,e,n);throw new Error("Unable to resolve: `"+t+"`")})})).importResolver("http://finitio.io/0.4/stdlib/data",t,e)})},{}],13:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u=o(t("./utils")),r=t("./ic"),i=o(t("../type"));function o(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t=function(){function o(t,e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),this.name=t,this.type=e,this.required=n,this.metadata=r,"string"!=typeof this.name&&u.default.argumentError("String expected for attribute name, got:",this.name),this.type instanceof i.default||u.default.argumentError("Type expected for attribute domain, got:",this.type),null==this.required&&(this.required=!0),"boolean"!=typeof this.required&&u.default.argumentError("Boolean expected for required, got:",this.required)}var t,e,n;return t=o,(e=[{key:"fetchType",value:function(){return this.type}},{key:"fetchOn",value:function(t,e){if("object"!==a(t)&&u.default.argumentError("Object expected, got:",t),null!=t[this.name])return t[this.name];if(null!=e)return e();throw new Error("Key `".concat(this.name,"` not found"))}},{key:"isSuperAttributeOf",value:function(t){return this===t||this.name===t.name&&(!this.required||t.required)&&this.type.isSuperTypeOf(t.type)}},{key:"equals",value:function(t){return this===t||t instanceof o&&this.name===t.name&&this.required===t.required&&this.type.equals(t.type)}},{key:"low",value:function(){return new o(this.name,this.type.low(),this.required)}},{key:"resolveProxies",value:function(t){return this.type.resolveProxies(t)}},{key:"toString",value:function(){return(this.required?"".concat(this.name," : "):"".concat(this.name," :? ")).concat(this.type)}}])&&c(t.prototype,e),n&&c(t,n),o}();(0,r.ObjectType)(t,["name","type","required","metadata"]),n.default=t},{"../type":25,"./ic":20,"./utils":23}],14:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u=r(t("./utils")),i=r(t("../type"));function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=f(n);return function(t,e){{if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,r?(t=f(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}t=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(o,i["default"]);var t,e,n,r=l(o);function o(t,e,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=r.call(this,e,n)).name=e,n.elmType=t,n.elmType instanceof i.default||u.default.argumentError("Finitio.Type expected, got:",n.elmType),n}return t=o,(e=[{key:"_equals",value:function(t){return this===t||t instanceof this.constructor&&this.elmType.equals(t.elmType)||c(f(o.prototype),"_equals",this).apply(this,arguments)}},{key:"_isSuperTypeOf",value:function(t){return this===t||t instanceof this.constructor&&this.elmType.isSuperTypeOf(t.elmType)||c(f(o.prototype),"_isSuperTypeOf",this).apply(this,arguments)}},{key:"_undress",value:function(t,e){var n=this.elmType,r=e.elmType;return r.isSuperTypeOf(n)?t:u.default.map(t,function(t){return n.undress(t,r)})}}])&&a(t.prototype,e),n&&a(t,n),o}();n.default=t},{"../type":25,"./utils":23}],15:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.SetConstraint=n.RegexpConstraint=n.RangeConstraint=n.NativeConstraint=n.Constraint=void 0;var r,u=(r=t("./utils"))&&r.__esModule?r:{default:r},i=t("./ic");function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=l(n);return function(t,e){{if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,r?(t=l(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e,n){return e&&p(t.prototype,e),n&&p(t,n),t}var d=function(){function r(t,e,n){f(this,r),this.name=t,this.native=e,this.metadata=n,null!=this.name&&"string"!=typeof this.name&&u.default.argumentError("String expected for constraint name, got: ",this.name)}return y(r,[{key:"isAnonymous",value:function(){return null==this.name}},{key:"accept",value:function(t){throw new Error("Constraint is an abstract class")}},{key:"equals",value:function(t){return this===t||t instanceof r&&this.native===t.native}},{key:"toString",value:function(){var t=this.nativeToString();return t=!this.isAnonymous()?"".concat(this.name,": ").concat(t):t}},{key:"nativeToString",value:function(){return this.native.toString()}}]),r}();n.Constraint=d;var h=function(){a(e,d);var t=s(e);function e(){return f(this,e),t.apply(this,arguments)}return y(e,[{key:"kind",get:function(){return"native"}},{key:"accept",value:function(t){return this.native(t)}},{key:"nativeToString",value:function(){return this.native.finitioSourceCode||"..."}}]),e}();n.NativeConstraint=h;var v=function(){a(e,d);var t=s(e);function e(){return f(this,e),t.apply(this,arguments)}return y(e,[{key:"kind",get:function(){return"regexp"}},{key:"accept",value:function(t){return this.native.test(t)}}]),e}();n.RegexpConstraint=v;var b=function(){a(e,d);var t=s(e);function e(){return f(this,e),t.apply(this,arguments)}return y(e,[{key:"kind",get:function(){return"range"}},{key:"accept",value:function(t){return(this.native.min_inclusive?t>=this.native.min:t>this.native.min)&&(void 0===this.native.max||(this.native.max_inclusive?t<=this.native.max:t<this.native.max))}},{key:"equals",value:function(t){return this===t||t instanceof d.Range&&(this.native.min===t.native.min&&this.native.min_inclusive===t.native.min_inclusive&&(void 0===this.native.max&&void 0===t.native.max||this.native.max===t.native.max&&this.native.max_inclusive===t.native.max_inclusive))}},{key:"nativeToString",value:function(){return this.native.max?(this.native.max_inclusive?"".concat(this.native.min,".."):"".concat(this.native.min,"...")).concat(this.native.max):"".concat(this.native.min,"..")}}]),e}();n.RangeConstraint=b;var m=function(){a(e,d);var t=s(e);function e(){return f(this,e),t.apply(this,arguments)}return y(e,[{key:"kind",get:function(){return"set"}},{key:"accept",value:function(t){return u.default.contains(this.native,t)}},{key:"equals",value:function(t){return this===t||t instanceof d.Set&&(this.native.length===t.native.length&&0===u.default.difference(this.native,t.native).length)}},{key:"nativeToString",value:function(){return"{ ".concat(this.native.join(" ")," }")}}]),e}();n.SetConstraint=m,(0,i.AbstractType)(d,[h,v,b,m],["name","native","metadata"],1),d.Native=h,d.Regexp=v,d.Range=b,d.Set=m,n.default=d},{"./ic":20,"./utils":23}],16:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("./ic"),u=a(t("./utils")),i=a(t("../type"));function a(t){return t&&t.__esModule?t:{default:t}}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=f(n);return function(t,e){{if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,r?(t=f(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){return e&&y(t.prototype,e),n&&y(t,n),t}var h=function(){function o(t,e,n,r){p(this,o),this.name=t,this.infoType=e,this.native=n,this.metadata=r,u.default.isString(this.name)||u.default.argumentError("String expected, got:",this.name),this.infoType instanceof i.default||u.default.argumentError("Finitio.Type expected, got:",this.infoType)}return d(o,[{key:"fetchType",value:function(){return this.infoType}},{key:"resolveProxies",value:function(t){return this.infoType.resolveProxies(t)}},{key:"toString",value:function(){return"<".concat(this.name,"> ").concat(this.infoType.toString())}}]),o}(),v=function(){c(e,h);var t=l(e);function e(){return p(this,e),t.apply(this,arguments)}return d(e,[{key:"kind",get:function(){return"explicit"}},{key:"dress",value:function(t,e){return this.native.dress(t,e)}},{key:"undress",value:function(t,e){return this.native.undress(t)}}]),e}(),b=function(){c(e,h);var t=l(e);function e(){return p(this,e),t.apply(this,arguments)}return d(e,[{key:"kind",get:function(){return"external"}},{key:"dress",value:function(t,e){return this.native.dress(t,e)}},{key:"undress",value:function(t,e){return this.native.undress(t)}}]),e}(),m=function(){c(e,h);var t=l(e);function e(){return p(this,e),t.apply(this,arguments)}return d(e,[{key:"kind",get:function(){return"internal"}},{key:"dress",value:function(t,e){return this.native[this.name](t,e)}},{key:"undress",value:function(t,e){return t["to".concat(u.default.capitalize(this.name))]()}}]),e}(),t=function(){c(e,h);var t=l(e);function e(){return p(this,e),t.apply(this,arguments)}return d(e,[{key:"kind",get:function(){return"identity"}},{key:"dress",value:function(t,e){return t}},{key:"undress",value:function(t,e){return t}}]),e}();(0,r.AbstractType)(h,[v,b,m,t],["name","infoType","native","metadata"],2),h.Explicit=v,h.External=b,h.Internal=m,h.Identity=t,n.default=h},{"../type":25,"./ic":20,"./utils":23}],17:[function(t,e,n){"use strict";function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,u=[],i=!0,a=!1;try{for(n=n.call(t);!(i=(r=n.next()).done)&&(u.push(r.value),!e||u.length!==e);i=!0);}catch(t){a=!0,o=t}finally{try{i||null==n.return||n.return()}finally{if(a)throw o}}return u}}(t,e)||a(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=a(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,e=function(){};return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,i=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){i=!0,o=t},f:function(){try{u||null==n.return||n.return()}finally{if(i)throw o}}}}function a(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u=function(){function r(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.world=t,this.result=e,this.error=n}var t,e,n;return t=r,(e=[{key:"success",value:function(t){return new r(this.world,t,void 0)}},{key:"failure",value:function(t,e,n){return e={error:e},null!=n&&(e.children=n),new r(this.world,void 0,e)}},{key:"find",value:function(t,e,n){var r,o=[],u=p(t.entries());try{for(u.s();!(r=u.n()).done;){var i=f(r.value,2),a=i[0],c=i[1],s=e(c,a);if(s.isSuccess())return s;null==s.error.location&&y(s.error,c,a),o.push(s.error)}}catch(t){u.e(t)}finally{u.f()}return n(o)}},{key:"refine",value:function(t,e,n,r){if(t.isSuccess()){var o,u=[],i=p(e.entries());try{for(i.s();!(o=i.n()).done;){var a=f(o.value,2),c=a[0],s=a[1],l=n(t,s,c);if(l.isFailure()&&(null==l.error.location&&y(l.error,s,c),u.push(l.error),this.isFailfast()))break}}catch(t){i.e(t)}finally{i.f()}return 0===u.length?t:r(u)}return r([t.error])}},{key:"map",value:function(t,o,e){var u=[],n=this.success(u);return this.refine(n,t,function(t,e,n){var r=o(e,n);return r.onSuccess(function(t){return u.push(t),r})},e)}},{key:"isFailfast",value:function(){return this.world&&this.world.failfast}},{key:"isSuccess",value:function(){return void 0===this.error}},{key:"isFailure",value:function(){return!this.isSuccess()}},{key:"onSuccess",value:function(t){return this.isSuccess()?t(this.result):this}},{key:"onFailure",value:function(t){return this.isSuccess()?this:t(this.error)}}])&&o(t.prototype,e),n&&o(t,n),r}(),y=function(t,e,n){e=e.name;return t.location=e=null==e?n:e};n.default=u},{}],18:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,u=(r=t("./utils"))&&r.__esModule?r:{default:r};n.default=function(t,e,r,o){return null==r&&(r=e.slice(0,e.length-1)),null==o&&(o=function(t){return(void 0)[e][t]}),t.prototype.fetch=function(t,e){var n=o.bind(this)(t);if(null!=n)return n;if(null!=e)return e(this,t);throw new Error("No such ".concat(r," `").concat(t,"`"))},t.prototype.fetchPath=function(t,e){var n=u.default.inject(t.split("/"),this,function(t,e){return t&&t.fetch&&t.fetch(e,function(){return null})});if(null!=n)return n;if(null!=e)return e();throw new Error("No such ".concat(r," `").concat(t,"`"))}}},{"./utils":23}],19:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("./ic"),u=c(t("./utils")),o=c(t("./fetchable")),i=c(t("./attribute")),a=c(t("../type/any_type"));function c(t){return t&&t.__esModule?t:{default:t}}function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,u=[],i=!0,a=!1;try{for(n=n.call(t);!(i=(r=n.next()).done)&&(u.push(r.value),!e||u.length!==e);i=!0);}catch(t){a=!0,o=t}finally{try{i||null==n.return||n.return()}finally{if(a)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}t=function(){function o(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),this.attributes=t,this.options=e,u.default.isArray(this.attributes)&&u.default.every(this.attributes,function(t){return t instanceof i.default})||u.default.argumentError("Array of Attribute expected");var n={};u.default.each(this.attributes,function(t){return null!=n[t.name]&&u.default.argumentError("Attribute names must be unique"),n[t.name]=t}),null==this.options&&(this.options={}),u.default.isObject(this.options)||u.default.argumentError("Hash of options expected"),this.options=u.default.extend({},o.DEFAULT_OPTIONS,this.options)}var t,e,n;return t=o,(e=[{key:"getAttr",value:function(e){return u.default.find(this.attributes,function(t){return t.name===e})}},{key:"size",value:function(){return this.attributes.length}},{key:"isEmpty",value:function(){return 0===this.size()}},{key:"allowExtra",value:function(t){return!!this.options.allowExtra&&(null==t||this.getExtraType()._isSuperTypeOf(t))}},{key:"allowExtraValue",value:function(t){return!!this.allowExtra()&&(null==t||this.getExtraType().include(t))}},{key:"getExtraType",value:function(){return this.options.allowExtra}},{key:"multi",value:function(){return this.allowExtra()||u.default.any(this.attributes,function(t){return!t.required})}},{key:"each",value:function(t){return u.default.each(this.attributes,t)}},{key:"toString",value:function(){var t,e=u.default.map(this.attributes,function(t){return t.toString()}).join(", ");return this.allowExtra()&&(t=this.options.allowExtra,this.isEmpty()||(e+=", "),e+="...",t instanceof a.default||(e+=": ".concat(t.toString()))),e}},{key:"names",value:function(){return u.default.map(this.attributes,function(t){return t.name})}},{key:"isSuperHeadingOf",value:function(t){if(this===t)return!0;if(!(t instanceof o))return!1;var e=s(u.default.triSplit(o._attributesByName(this),o._attributesByName(t)),3),n=e[0],r=e[1],e=e[2];return!!u.default.every(n,function(t){return t[0].isSuperAttributeOf(t[1])})&&(!!u.default.every(r,function(t){return!t.required})&&(!!(!t.allowExtra()||this.allowExtra()&&this.allowExtra(t.options.allowExtra))&&(this.allowExtra()||u.default.isEmpty(e))))}},{key:"equals",value:function(t){return this===t||t instanceof o&&this.attributesEquals(t)&&this.optionsEquals(t)}},{key:"attributesEquals",value:function(e){return this.attributes.length===e.attributes.length&&u.default.every(this.attributes,function(t){return t.equals(e.getAttr(t.name))})}},{key:"optionsEquals",value:function(n){return u.default.size(this.options)===u.default.size(n.options)&&u.default.every(this.options,function(t,e){return t===n.options[e]})}},{key:"low",value:function(){return new o(u.default.map(this.attributes,function(t){return t.low()}),this.options)}},{key:"resolveProxies",value:function(e){if(u.default.each(this.attributes,function(t){return t.resolveProxies(e)}),this.options.allowExtra)return this.options.allowExtra.resolveProxies(e)}}])&&f(t.prototype,e),n&&f(t,n),o}();p(t,"_attributesByName",function(t){var e={};return u.default.each(t.attributes,function(t){return e[t.name]=t}),e}),p(t,"DEFAULT_OPTIONS",{allowExtra:!1}),(0,r.ObjectType)(t,["attributes","options"]),(0,o.default)(t,"attributes","attribute",function(t){return this.getAttr(t)}),n.default=t},{"../type/any_type":27,"./attribute":13,"./fetchable":18,"./ic":20,"./utils":23}],20:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.TypeType=n.ObjectType=n.AbstractType=void 0;var r,l=(r=t("./utils"))&&r.__esModule?r:{default:r};function f(t,e){var n=function(){};return n.prototype=t.prototype,n=new n,e=t.apply(n,e),Object(e)===e?e:n}n.AbstractType=function(i,a,c,s){i.info=function(e){var t=l.default.find(a,function(t){return!!e[t.prototype.kind]});if(t){for(var n=[],r=0;r<c.length;r++){var o=r===s?t.prototype.kind:c[r],o=e[o];o&&(n[r]=o)}return f(t,n)}var u=JSON.stringify(e);l.default.argumentError("Unrecognized ".concat(i.name," info: "),u)},i.prototype.toInfo=function(){for(var t={},e=0;e<c.length;e++){var n=e===s?this.kind:c[e],r=this[c[e]];void 0!==r&&(t[n]=r)}return t}};function o(i,a,c){i.info=function(t,e){for(var n=[],r=0;r<a.length;r++){var o=t[a[r]];void 0!==o&&(n[r]=o)}var u=f(i,n);return c&&c(u,e),u},i.prototype.toInfo=function(){for(var t={},e=0;e<a.length;e++){var n=a[e],r=this[n];void 0!==r&&(t[n]=r)}return t}}n.ObjectType=o;n.TypeType=function(t,e,n){t.prototype.generator=e,o(t,n)}},{"./utils":23}],21:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.from=t,this.qualifier=e}(n.default=void 0,t("../support/ic").ObjectType)(r,["from","qualifier"],function(t,e){return t.system=e.importResolver(t.from,e)}),n.default=r},{"../support/ic":20}],22:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=O(t("../support/attribute")),o=O(t("../support/heading")),u=O(t("../support/contract")),i=O(t("../support/constraint")),a=O(t("../support/import")),c=O(t("../contracts")),s=O(t("../type")),l=O(t("../type/ad_type")),f=O(t("../type/builtin_type")),p=O(t("../type/tuple_type")),y=O(t("../type/relation_type")),d=O(t("../type/union_type")),h=O(t("../type/seq_type")),v=O(t("../type/set_type")),b=O(t("../type/any_type")),m=O(t("../type/struct_type")),g=O(t("../type/sub_type")),w=O(t("../type/type_ref")),_=O(t("../type/type_def")),T=O(t("../system"));function O(t){return t&&t.__esModule?t:{default:t}}var x={},j={Js:x};x.Object=f.default.info({jsType:Object}),x.String=f.default.info({jsType:String}),x.Boolean=f.default.info({jsType:Boolean}),x.Number=f.default.info({jsType:Number}),x.Array=f.default.info({jsType:Array}),x.Type=l.default.info({jsType:Function,contracts:[u.default.info({name:"jsTypeName",infoType:x.String,explicit:{dress:function(t,e){return c.default.JsType.name.dress(t,e.JsTypes)},undress:c.default.JsType.name.undress}})]}),x.Empty=g.default.info({superType:b.default.info({}),constraints:[i.default.info({name:"default",native:function(t){if(null==t)return!1;for(var e in t)return!1;return!0}})]}),x.FunctionDefn=h.default.info({elmType:x.String}),x.Function=l.default.info({jsType:Function,contracts:[u.default.info({name:"defn",infoType:x.FunctionDefn,external:c.default.Expression.defn}),u.default.info({name:"reference",infoType:x.String,external:c.default.Function.reference})]}),x.RegExp=l.default.info({jsType:RegExp,contracts:[u.default.info({name:"src",infoType:x.String,explicit:{dress:function(t){return new RegExp(t)},undress:function(t){return t.source}}})]});function P(t,e,n,r){return l.default.info({jsType:e,contracts:[u.default.info({name:r,infoType:n,internal:e})]})}function S(t,e,n){return n.push(A),n=p.default.info({heading:o.default.info({attributes:n})}),P(0,e,n,"info")}var A=r.default.info({name:"metadata",type:x.Object,required:!1}),k=[f.default.info({jsType:s.default})];j.Type=P(0,s.default,d.default.info({candidates:k}),"factor"),j.Types=h.default.info({elmType:j.Type});t=function(t,e,n){n=p.default.info({heading:o.default.info({attributes:n.concat([A])})}),n=P(0,e,n,"info"),t=p.default.info({heading:o.default.info({attributes:[r.default.info({name:t.toLowerCase(),type:n})]})});return k.push(t),n};j.Attribute=S(0,r.default,[r.default.info({name:"name",type:x.String}),r.default.info({name:"type",type:j.Type}),r.default.info({name:"required",type:x.Boolean,required:!1})]),j.Attributes=h.default.info({elmType:j.Attribute}),j.AllowExtraOption=l.default.info({jsType:s.default,contracts:[u.default.info({name:"any",infoType:x.Boolean,explicit:{dress:function(t,e){return!0===t&&new b.default},undress:function(t,e){throw new Error("`undress` not implemented")}}}),u.default.info({name:"static",infoType:d.default.info({candidates:k}),explicit:{dress:function(t,e){return j.Type.dress(t,e)},undress:function(t,e){throw new Error("`undress` not implemented")}}})]}),j.BackwardCompatibleAllowExtraOption=d.default.info({candidates:[j.Type,x.Boolean],name:"BackwardCompatibleAllowExtraOption"}),j.HeadingOptions=p.default.info({heading:o.default.info({attributes:[r.default.info({name:"allowExtra",type:j.AllowExtraOption})]})}),j.Heading=S(0,o.default,[r.default.info({name:"attributes",type:j.Attributes}),r.default.info({name:"options",type:j.HeadingOptions,required:!1})]),j.Contract=d.default.info({candidates:[],name:"Contract"}),j.Contracts=h.default.info({elmType:j.Contract});s=function(t,e,n){n=S(0,u.default,n.concat([r.default.info({name:"name",type:x.String}),r.default.info({name:"infoType",type:j.Type})]));return j.Contract.candidates.push(n),n};j.Contract.Explicit=s(0,u.default.Explicit,[r.default.info({name:"explicit",type:p.default.info({heading:o.default.info({attributes:[r.default.info({name:"dress",type:x.Function}),r.default.info({name:"undress",type:x.Function})]})})})]),j.Contract.Internal=s(0,u.default.Internal,[r.default.info({name:"internal",type:x.Type})]),j.Contract.External=s(0,u.default.External,[r.default.info({name:"external",type:x.Type})]),j.Contract.Identity=s(0,u.default.Identity,[r.default.info({name:"identity",type:x.Empty})]),j.Constraint=d.default.info({candidates:[],name:"Constraint"}),j.Constraints=h.default.info({elmType:j.Constraint});s=function(t,e,n){n=S(0,i.default,n.concat([r.default.info({name:"name",type:x.String,required:!1})]));return j.Constraint.candidates.push(n),n};j.Constraint.Native=s(0,i.default.Native,[r.default.info({name:"native",type:x.Function})]),j.Constraint.Regexp=s(0,i.default.Regexp,[r.default.info({name:"regexp",type:x.RegExp})]),j.Range=d.default.info({candidates:[p.default.info({heading:o.default.info({attributes:[r.default.info({name:"min",type:x.Number}),r.default.info({name:"min_inclusive",type:x.Boolean}),r.default.info({name:"max",type:x.Number}),r.default.info({name:"max_inclusive",type:x.Boolean})]})}),p.default.info({heading:o.default.info({attributes:[r.default.info({name:"min",type:x.Number}),r.default.info({name:"min_inclusive",type:x.Boolean})]})})],name:"Range"}),j.Constraint.Range=s(0,i.default.Range,[r.default.info({name:"range",type:j.Range})]),j.Constraint.Set=s(0,i.default.Set,[r.default.info({name:"set",type:x.Array})]),j.AnyType=t("Any",b.default,[]),j.AdType=t("Adt",l.default,[r.default.info({name:"jsType",type:x.Type,required:!1}),r.default.info({name:"contracts",type:j.Contracts})]),j.BuiltinType=t("Builtin",f.default,[r.default.info({name:"jsType",type:x.Type})]),j.SubType=t("Sub",g.default,[r.default.info({name:"superType",type:j.Type}),r.default.info({name:"constraints",type:j.Constraints})]),j.RelationType=t("Relation",y.default,[r.default.info({name:"heading",type:j.Heading})]),j.TupleType=t("Tuple",p.default,[r.default.info({name:"heading",type:j.Heading})]),j.SeqType=t("Seq",h.default,[r.default.info({name:"elmType",type:j.Type})]),j.SetType=t("Set",v.default,[r.default.info({name:"elmType",type:j.Type})]),j.StructType=t("Struct",m.default,[r.default.info({name:"componentTypes",type:j.Types})]),j.UnionType=t("Union",d.default,[r.default.info({name:"candidates",type:j.Types})]),j.TypeRef=t("Ref",w.default,[r.default.info({name:"typeName",type:x.String})]),j.TypeDef=S(0,_.default,[r.default.info({name:"name",type:x.String}),r.default.info({name:"type",type:j.Type})]),j.TypeDefs=h.default.info({elmType:j.TypeDef});_=[r.default.info({name:"types",type:j.TypeDefs})];j.System=S(0,T.default,_),j.Systems=h.default.info({elmType:j.System}),j.Import=S(0,a.default,[r.default.info({name:"qualifier",type:x.String,required:!1}),r.default.info({name:"from",type:x.String})]),j.Imports=h.default.info({elmType:j.Import}),_.push(r.default.info({name:"imports",type:j.Imports,required:!1})),n.default=j},{"../contracts":3,"../support/attribute":13,"../support/constraint":15,"../support/contract":16,"../support/heading":19,"../support/import":21,"../system":24,"../type":25,"../type/ad_type":26,"../type/any_type":27,"../type/builtin_type":28,"../type/relation_type":29,"../type/seq_type":30,"../type/set_type":31,"../type/struct_type":32,"../type/sub_type":33,"../type/tuple_type":34,"../type/type_def":35,"../type/type_ref":36,"../type/union_type":37}],23:[function(e,t,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s={isArray:function(t){return Array.isArray?Array.isArray(t):"[object Array]"===toString.call(t)},isBrowser:function(){return"object"===("undefined"==typeof window?"undefined":r(window))},isObject:function(t){return Object(t)===t},isString:function(t){return"[object String]"===Object.prototype.toString.call(t)},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)},deepClone:function(t){if(null==t&&s.argumentError("Object expected, got",t),s.isObject(t)){if(t instanceof Function)return t;if(s.isArray(t))return t.slice();var n={};return s.each(t,function(t,e){n[e]=s.deepClone(t)}),n}return t},clone:function(t){return null==t&&s.argumentError("Object expected, got",t),s.isObject(t)?s.isArray(t)?t.slice():s.extend({},t):t},extend:function(n){var t=Array.prototype.slice.call(arguments,1);return s.each(t,function(t){if(t)for(var e in t)n[e]=t[e]}),n},triSplit:function(t,e){for(var n=null,r=null,o={},u={},i={},n=s.keys(t),a=0;a<n.length;a++)void 0===e[r=n[a]]?u[r]=t[r]:o[r]=[t[r],e[r]];n=s.keys(e);for(var c=0;c<n.length;c++)void 0===o[r=n[c]]&&(i[r]=e[r]);return[o,u,i]},zip:function(e){s.isArray(e)||s.argumentError("Array expected, got",e);var r=Array.prototype.slice.call(arguments,1);return s.each(r,function(t){s.isArray(t)||s.argumentError("Array expected, got",t),s.size(t)!==s.size(e)&&s.argumentError("Source(s) and destination Arrays must have same size")}),s.map(e,function(t,e){var n=[];return n.push(t),s.each(r,function(t){n.push(t[e])}),n})},difference:function(t,e){return s.isArray(t)||s.argumentError("Array expected, got",t),s.isArray(e)||s.argumentError("Array expected, got",e),s.filter(t,function(t){return!s.contains(e,t)})},uniq:function(t,e){s.isArray(t)||s.argumentError("Array expected, got",t),void 0===e&&(e=!1);for(var n=[],r=[],o=0,u=t.length;o<u;o++){var i=t[o];(e?o&&r===i:s.contains(r,i))||(e?r=i:r.push(i),n.push(t[o]))}return n},inject:function(t,e,n){t instanceof Array||s.argumentError("Array expected, got",t);for(var r=e,o=0;o<t.length;o++)r=n(r,t[o]);return r},isEnumerable:function(t){return!(null==t||t instanceof RegExp||t instanceof Date||"boolean"==typeof t)},each:function(t,e){if(null===e)throw new Error("Function expected, got null");if(void 0===e&&(e=function(){}),!s.isEnumerable(t))throw new Error("Enumerable (Array, Object, String) expected, got ".concat(t));if("string"==typeof t)return s.each(t.split(""),e);if(t instanceof Array)for(var n=0;n<t.length;n++)e(t[n],n);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(t[r],r)},every:function(t,n){null==n&&s.argumentError("Function expected, got",n);try{s.each(t,function(t,e){if(!0!==n(t,e))throw"fail"})}catch(t){if("fail"!==t)throw t;return!1}return!0},find:function(t,n){null==n&&s.argumentError("Function expected, got",n);try{s.each(t,function(t,e){if(n(t,e))throw{found:t}})}catch(t){if(void 0===t.found)throw t;return t.found}return null},any:function(t,n){null==n&&s.argumentError("Function expected, got",n);try{s.each(t,function(t,e){if(!0===n(t,e))throw"gotcha"})}catch(t){if("gotcha"!==t)throw t;return!0}return!1},filter:function(t,e){null==e&&s.argumentError("Function expected, got",e);var n=[];return s.each(t,function(t){e(t)&&n.push(t)}),n},reject:function(t,e){null==e&&s.argumentError("Function expected, got",e);var n=[];return s.each(t,function(t){e(t)||n.push(t)}),n},map:function(t,n){null==n&&s.argumentError("Function expected, got",n);var r=[];return s.each(t,function(t,e){r.push(n(t,e))}),r},reduce:function(n,r,o){return null==o&&s.argumentError("Function expected, got",o),s.each(n,function(t,e){r=o(r,t,e,n)}),r},values:function(t){if(t instanceof Array)return t;var e=[];return s.each(t,function(t){e.push(t)}),e},keys:function(t){var n=[];return s.each(t,function(t,e){n.push(e)}),n},size:function(t){return s.values(t).length},isEmpty:function(t){return 0===s.size(t)}};s.contains=s.include=function(t,e){s.isEnumerable(t)||s.argumentError("Enumerable (Array, Object, String) expected, got",t);var n=Array.prototype.indexOf;return n&&t.indexOf===n?-1!==t.indexOf(e):null!==s.find(t,function(t){return t===e})},s.capitalize=function(t){if("string"!=typeof t&&s.argumentError("String expected, got",t),""===t.trim())return t;var t=t,e=null,n=null;if(-1!==t.indexOf("_")){for(e=t.split("_"),n=0;n<e.length;n++)e[n]=s.capitalize(e[n]);t=e.join("")}if(-1!==t.indexOf(" ")){for(e=t.split(" "),n=0;n<e.length;n++)e[n]=s.capitalize(e[n]);t=e.join("")}return t=t[0].toUpperCase()+t.slice(1)},s.toString=function(t){if(void 0===t)return"undefined";if(null===t)return"null";var e=t.toString();return 30<(e="[object Object]"===e?JSON.stringify(t):e).length&&(e="".concat(e.substring(0,30),"...")),e=t instanceof Array?"[".concat(e,"]"):e},s.argumentError=function(){var e="";throw s.each(arguments,function(t){0!==e.length&&(e+=" "),e+=null===(t=t)?"null":void 0===t?"undefined":t.toString()}),new Error(e)},s.notImplemented=function(t,e){throw new Error("".concat(t.constructor.name,"#").concat(e))},s.dressError=function(t){t=new(e("../errors").default)(t);throw console.log(JSON.stringify(t.children,null,2)),t},s.undressError=function(t,e,n){throw new Error(t,e,n)},n.default=s},{"../errors":9}],24:[function(o,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o("./support/ic"),u=i(o("./support/utils")),r=i(o("./support/fetchable"));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c,s,l,f=function(){function r(t,e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.imports=t,this.types=e,null==this.imports&&(this.imports=[]),null==this.types&&(this.types=[]),u.default.each(this.types,function(t){return n[t.name]=t.trueOne()})}var t,e,n;return t=r,(e=[{key:"resolve",value:function(t,e){var n=t.match(r.REF_RGX);if(n[1])return this._resolveQualified(n,e);n=u.default.filter(this.imports,function(t){return!t.qualifier});return this._resolveImported([{system:this}].concat(n),t,e)}},{key:"dress",value:function(t,e){if(!this.Main)throw new Error("No main on System");return this.Main.dress(t,e)}},{key:"undress",value:function(t,e){if(!this.Main)throw new Error("No main on System");return this.Main.undress(t,this.Main.low())}},{key:"clone",value:function(){return new r(u.default.clone(this.imports),u.default.clone(this.types))}},{key:"subsystem",value:function(t,e){var n=o("../finitio").default;"string"==typeof t&&(t=n.parse(t));t={types:[].concat(this.types,t.types).filter(Boolean),imports:[].concat(this.imports,t.imports).filter(Boolean)};return n.Meta.System.dress(t,n.world(e))}},{key:"_resolveQualified",value:function(e,t){null==t&&(t=this._onResolveFailure(e[0]));var n=u.default.find(this.imports,function(t){return t.qualifier===e[1]});return(n=n&&n.system)?this._resolveSingle(n,e[2],t):this._onResolveFailure(e[0])()}},{key:"_resolveImported",value:function(t,e,n){var r=this;return null==n&&(n=this._onResolveFailure(e)),t[0].system.fetchPath(e,function(){return 1<t.length?r._resolveImported(t.slice(1),e,n):n()})}},{key:"_resolveSingle",value:function(t,e,n){return t.fetchPath(e,n)}},{key:"_onResolveFailure",value:function(t){return function(){throw new Error("No such type `".concat(t,"`"))}}}])&&a(t.prototype,e),n&&a(t,n),r}();l=/^(?:([a-z][a-z0-9]*)\.)?(.*?)$/,(s="REF_RGX")in(c=f)?Object.defineProperty(c,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):c[s]=l,(0,n.ObjectType)(f,["imports","types"],function(e){return u.default.each(e.types,function(t){return t.resolveProxies(e)})}),(0,r.default)(f,"types","type",function(e){return u.default.find(this.types,function(t){return t.name===e})}),e.default=f},{"../finitio":1,"./support/fetchable":18,"./support/ic":20,"./support/utils":23}],25:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(t("./support/utils")),u=r(t("./support/dress_monad"));function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.metadata=t}var t,n,r;return t=e,r=[{key:"factor",value:function(t){return t[Object.keys(t)[0]]}}],(n=[{key:"toFactor",value:function(){var t={};return t[this.generator]=this,t}},{key:"include",value:function(t){return this._include(t)}},{key:"_include",value:function(t){return o.default.notImplemented(this,"include")}},{key:"dress",value:function(t,e){e=this.mDress(t,new u.default(e));return e.isSuccess()?e.result:o.default.dressError(e.error)}},{key:"mDress",value:function(t,e){return this._mDress(t,e)}},{key:"_mDress",value:function(t,e){return o.default.notImplemented(this,"_mDress")}},{key:"undress",value:function(t,e){return this._undress(t,e.trueOne())}},{key:"_undress",value:function(t,e){return e.isSuperTypeOf(this)||e.include(t)?t:o.default.undressError("Unable to undress `".concat(t,"` from ").concat(this," to `").concat(e,"`"))}},{key:"isSuperTypeOf",value:function(t){return this._isSuperTypeOf(t.trueOne())}},{key:"_isSuperTypeOf",value:function(t){return this.equals(t)||t._isSubTypeOf(this)}},{key:"_isSubTypeOf",value:function(t){return!1}},{key:"fetchType",value:function(){return this}},{key:"isFake",value:function(){return!1}},{key:"trueOne",value:function(){return this}},{key:"equals",value:function(t){return t instanceof e&&this._equals(t.trueOne())}},{key:"_equals",value:function(t){return this===t}}])&&i(t.prototype,n),r&&i(t,r),e}();n.default=t},{"./support/dress_monad":17,"./support/utils":23}],26:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("../support/ic"),u=s(t("../support/utils")),i=s(t("../support/fetchable")),a=s(t("../support/contract")),c=s(t("../type"));function s(t){return t&&t.__esModule?t:{default:t}}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=d(n);return function(t,e){{if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,r?(t=d(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}t=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(o,c["default"]);var t,e,n,r=y(o);function o(t,e,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=r.call(this,n)).jsType=t,n.contracts=e,!n.jsType||n.jsType instanceof Function||u.default.argumentError("Constructor (function) expected, got:",n.jsType),u.default.isArray(n.contracts)||u.default.argumentError("[Contract] expected, got:",n.contracts),u.default.every(n.contracts,function(t){return t instanceof a.default})||u.default.argumentError("[Contract] expected, got:",n.contracts),n}return t=o,(e=[{key:"contractNames",value:function(){return u.default.map(this.contracts,function(t){return t.name})}},{key:"_include",value:function(t){return t.constructor===this.jsType}},{key:"_mDress",value:function(r,o){var n=this;if(this.jsType&&r instanceof this.jsType)return o.success(r);return o.find(this.contracts,function(e){var n=this;return e.infoType.mDress(r,o).onSuccess(function(t){try{return o.success(e.dress(t,o.world))}catch(t){return o.failure(n,"Dresser failed: ".concat(t.message),[t])}})},function(t){var e=[n.jsType&&n.jsType.name||"value",r];return o.failure(n,["Invalid ${typeName}: `${value}`",e],t)})}},{key:"_undress",value:function(t,e){if(!this.jsType)return t;var n=null;return null!=(n=1===u.default.size(this.contracts)?this.contracts[0]:u.default.find(this.contracts,function(t){return t.infoType.isSuperTypeOf(e)}))?n.infoType.undress(n.undress(t),e):f(d(o.prototype),"_undress",this).apply(this,arguments)}},{key:"low",value:function(){return this.contracts[0].infoType.low()}},{key:"resolveProxies",value:function(e){return u.default.each(this.contracts,function(t){return t.resolveProxies(e)})}},{key:"toString",value:function(){return u.default.map(this.contracts,function(t){return t.toString()}).join(", ")}}])&&l(t.prototype,e),n&&l(t,n),o}();(0,r.TypeType)(t,"adt",["jsType","contracts","metadata"]),(0,i.default)(t,"contracts","contract",function(e){return u.default.find(this.contracts,function(t){return t.name===e})}),n.default=t},{"../support/contract":16,"../support/fetchable":18,"../support/ic":20,"../support/utils":23,"../type":25}],27:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,u=t("../support/ic"),i=(r=t("../type"))&&r.__esModule?r:{default:r};function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=f(n);return function(t,e){{if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,r?(t=f(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(o,i["default"]);var t,e,n,r=l(o);function o(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r.call(this,t)}return t=o,(e=[{key:"_mDress",value:function(t,e){return e.success(t)}},{key:"_include",value:function(t){return!0}},{key:"_isSuperTypeOf",value:function(t){return!0}},{key:"_equals",value:function(t){return t instanceof o||c(f(o.prototype),"_equals",this).apply(this,arguments)}},{key:"low",value:function(){return this}},{key:"resolveProxies",value:function(t){}},{key:"toString",value:function(){return"."}}])&&a(t.prototype,e),n&&a(t,n),o}();(0,u.TypeType)(p,"any",["metadata"]),n.default=p},{"../support/ic":20,"../type":25}],28:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,u=t("../support/ic"),i=(r=t("../type"))&&r.__esModule?r:{default:r};function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=f(n);return function(t,e){{if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,r?(t=f(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(o,i["default"]);var t,e,n,r=l(o);function o(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,e)).jsType=t,e}return t=o,(e=[{key:"_equals",value:function(t){return this===t||t instanceof o&&t.jsType===this.jsType||c(f(o.prototype),"_equals",this).call(this,t)}},{key:"_mDress",value:function(t,e){if(this.include(t))return e.success(t);t=[this.jsType.name,t];return e.failure(this,["Invalid ${typeName}: `${value}`",t])}},{key:"_include",value:function(t){return t instanceof this.jsType||null!=t&&t.constructor===this.jsType}},{key:"low",value:function(){return this}},{key:"toString",value:function(){return".".concat(this.jsType.name.toString())}},{key:"resolveProxies",value:function(t){}}])&&a(t.prototype,e),n&&a(t,n),o}();(0,u.TypeType)(p,"builtin",["jsType","metadata"]),n.default=p},{"../support/ic":20,"../type":25}],29:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("../support/ic"),u=l(t("../type")),i=l(t("../support/collection_type")),a=l(t("../type/tuple_type")),c=l(t("../support/heading")),s=l(t("../support/utils"));function l(t){return t&&t.__esModule?t:{default:t}}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=h(n);return function(t,e){{if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,r?(t=h(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}t=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(o,u["default"]);var t,e,n,r=d(o);function o(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,e)).heading=t,e.heading instanceof c.default||s.default.argumentError("Heading expected, got:",e.heading),e}return t=o,(e=[{key:"fetch",value:function(){return this.heading.fetch.apply(this.heading,arguments)}},{key:"tupleType",value:function(){return null!=this.tupleTypeCache?this.tupleTypeCache:this.tupleTypeCache=new a.default(this.heading)}},{key:"_include",value:function(t){var e=this;return t instanceof Array&&s.default.every(t,function(t){return e.tupleType().include(t)})}},{key:"_mDress",value:function(t,r){if(!(t instanceof Array))return r.failure(this,["Array expected, got: `${value}`",[t]]);var e=this.tupleType(),o={};return r.map(t,function(t){var n=e.mDress(t,r);return n.onSuccess(function(t){var e=JSON.stringify(t);return o[e]?r.failure(this,["Duplicate Tuple: `${value}`",[t]]):(o[e]=t,n)})},function(t){return r.failure(this,["Invalid ${typeName}",["Relation"]],t)})}},{key:"_undress",value:function(t,e){e instanceof o||e instanceof i.default||s.default.undressError("Unable to undress `".concat(t,"` to `").concat(e,"`"));var n=this.tupleType(),r=e instanceof o?e.tupleType():e.elmType;return s.default.map(t,function(t){return n.undress(t,r)})}},{key:"_isSuperTypeOf",value:function(t){return this===t||t instanceof o&&this.heading.isSuperHeadingOf(t.heading)}},{key:"_equals",value:function(t){return this===t||t instanceof o&&this.heading.equals(t.heading)||p(h(o.prototype),"_equals",this).apply(this,arguments)}},{key:"low",value:function(){return new o(this.heading.low())}},{key:"resolveProxies",value:function(t){return this.heading.resolveProxies(t)}},{key:"toString",value:function(){return"{{ ".concat(this.heading.toString()," }}")}}])&&f(t.prototype,e),n&&f(t,n),o}();(0,r.TypeType)(t,"relation",["heading","metadata"]),n.default=t},{"../support/collection_type":14,"../support/heading":19,"../support/ic":20,"../support/utils":23,"../type":25,"../type/tuple_type":34}],30:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("../support/ic"),u=a(t("../support/utils")),i=a(t("../support/collection_type"));function a(t){return t&&t.__esModule?t:{default:t}}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=p(n);return function(t,e){{if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,r?(t=p(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}t=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(o,i["default"]);var t,e,n,r=f(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r.apply(this,arguments)}return t=o,(e=[{key:"_include",value:function(t){var e=this;return t instanceof Array&&u.default.every(t,function(t){return e.elmType.include(t)})}},{key:"_mDress",value:function(t,e){var n=this;if(!(t instanceof Array))return e.failure(this,["Array expected, got: `${value}`",[t]]);return e.map(t,function(t){return n.elmType.mDress(t,e)},function(t){return e.failure(n,["Invalid ${typeName}",["Sequence"]],t)})}},{key:"_undress",value:function(t,e){return e instanceof o||u.default.undressError("Unable to undress `".concat(t,"` to `").concat(e,"`")),s(p(o.prototype),"_undress",this).apply(this,arguments)}},{key:"low",value:function(){return new o(this.elmType.low())}},{key:"resolveProxies",value:function(t){return this.elmType.resolveProxies(t)}},{key:"toString",value:function(){return"[".concat(this.elmType.toString(),"]")}}])&&c(t.prototype,e),n&&c(t,n),o}();(0,r.TypeType)(t,"seq",["elmType","metadata"]),n.default=t},{"../support/collection_type":14,"../support/ic":20,"../support/utils":23}],31:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("../support/ic"),u=a(t("../support/utils")),i=a(t("../support/collection_type"));function a(t){return t&&t.__esModule?t:{default:t}}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=p(n);return function(t,e){{if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,r?(t=p(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}t=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(o,i["default"]);var t,e,n,r=f(o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),r.apply(this,arguments)}return t=o,(e=[{key:"_include",value:function(t){var e=this;return t instanceof Array&&(!!u.default.every(t,function(t){return e.elmType.include(t)})&&u.default.uniq(t).length===t.length)}},{key:"_mDress",value:function(t,e){var r=this;if(!(t instanceof Array))return e.failure(this,["Array expected, got: `${value}`",[t]]);var o=e.map(t,function(t){return r.elmType.mDress(t,e)},function(t){return e.failure(r,["Invalid ${typeName}",["Set"]],t)});return o.onSuccess(function(t){var n;return n=t,(t=u.default.find(n,function(t,e){return n.indexOf(t)!==e}))?e.failure(r,["Duplicate value: `${value}`",[t]]).onFailure(function(t){return e.failure(r,"Invalid Set",[t])}):o})}},{key:"_undress",value:function(t,e){return e instanceof i.default||u.default.undressError("Unable to undress `".concat(t,"` to `").concat(e,"`")),s(p(o.prototype),"_undress",this).apply(this,arguments)}},{key:"low",value:function(){return new o(this.elmType.low())}},{key:"resolveProxies",value:function(t){return this.elmType.resolveProxies(t)}},{key:"toString",value:function(){return"{".concat(this.elmType.toString(),"}")}}])&&c(t.prototype,e),n&&c(t,n),o}();(0,r.TypeType)(t,"set",["elmType","metadata"]),n.default=t},{"../support/collection_type":14,"../support/ic":20,"../support/utils":23}],32:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("../support/ic"),u=a(t("../support/utils")),i=a(t("../type"));function a(t){return t&&t.__esModule?t:{default:t}}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,u=[],i=!0,a=!1;try{for(n=n.call(t);!(i=(r=n.next()).done)&&(u.push(r.value),!e||u.length!==e);i=!0);}catch(t){a=!0,o=t}finally{try{i||null==n.return||n.return()}finally{if(a)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=d(n);return function(t,e){{if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,r?(t=d(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}t=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(o,i["default"]);var t,e,n,r=y(o);function o(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,e)).componentTypes=t,u.default.isArray(e.componentTypes)||u.default.argumentError("[Finitio::Type] expected, got:",e.componentTypes);t=u.default.find(e.componentTypes,function(t){return!(t instanceof i.default)});return null!=t&&u.default.argumentError("[Finitio::Type] expected, got:",t),e}return t=o,(e=[{key:"size",value:function(){return u.default.size(this.componentTypes)}},{key:"_include",value:function(e){return u.default.isArray(e)&&u.default.size(e)===u.default.size(this.componentTypes)&&u.default.every(u.default.zip(e,this.componentTypes),function(t){t=c(t,2);return e=t[0],t[1].include(e)})}},{key:"_mDress",value:function(n,r){var e=this;if(!(n instanceof Array))return r.failure(this,["Array expected, got: `${value}`",[n]]);if(n.length!==this.size())return r.failure(this,["Struct size mismatch: ${a} for ${b}",[n.length,this.size()]]);return r.map(this.componentTypes,function(t,e){return t.mDress(n[e],r)},function(t){return r.failure(e,["Invalid ${typeName}: `${value}`",["Struct",n]],t)})}},{key:"_undress",value:function(t,e){e instanceof o||u.default.undressError("Unable to undress `".concat(t,"` to `").concat(e,"`")),e.size()!==this.size()&&u.default.undressError("Unable to undress `".concat(t,"` to `").concat(e,"`"));var n=this.componentTypes,r=e.componentTypes;return u.default.map(t,function(t,e){return n[e].undress(t,r[e])})}},{key:"_isSuperTypeOf",value:function(t){return this===t||t instanceof o&&u.default.size(this.componentTypes)===u.default.size(t.componentTypes)&&u.default.every(u.default.zip(this.componentTypes,t.componentTypes),function(t){return t[0].isSuperTypeOf(t[1])})}},{key:"_equals",value:function(t){return this===t||t instanceof o&&this.headingEquals(t)||f(d(o.prototype),"_equals",this).apply(this,arguments)}},{key:"headingEquals",value:function(n){return u.default.size(this.componentTypes)===u.default.size(n.componentTypes)&&u.default.every(this.componentTypes,function(t,e){return n.componentTypes[e].equals(t)})}},{key:"low",value:function(){return new o(u.default.map(this.componentTypes,function(t){return t.low()}))}},{key:"resolveProxies",value:function(e){return u.default.each(this.componentTypes,function(t){return t.resolveProxies(e)})}},{key:"toString",value:function(){return"<".concat(u.default.map(this.componentTypes,function(t){return t.toString()}).join(","),">")}}])&&l(t.prototype,e),n&&l(t,n),o}();(0,r.TypeType)(t,"struct",["componentTypes","metadata"]),n.default=t},{"../support/ic":20,"../support/utils":23,"../type":25}],33:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("../support/ic"),u=s(t("../support/utils")),i=s(t("../support/fetchable")),a=s(t("../type")),c=s(t("../support/constraint"));function s(t){return t&&t.__esModule?t:{default:t}}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=d(n);return function(t,e){{if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,r?(t=d(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}t=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(o,a["default"]);var t,e,n,r=y(o);function o(t,e,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=r.call(this,n)).superType=t,n.constraints=e,n.superType instanceof a.default||u.default.argumentError("Finitio.Type expected, got",n.superType),n.constraints.constructor!==Array&&u.default.argumentError("Array expected for constraints, got",n.constraints),0<n.constraints.length||u.default.argumentError("Empty constraints not allowed on SubType"),u.default.every(n.constraints,function(t){return t instanceof c.default})||u.default.argumentError("Array of constraints expected, got",n.constraints),n}return t=o,(e=[{key:"_mDress",value:function(o,u){var e=this,i=this.superType.mDress(o,u);return u.refine(i,this.constraints,function(t,e){if(e.accept(i.result))return i;var n,r=null!=e.name?(n="Invalid ${typeName} (not ${cName}): `${value}`",["value",e.name,o]):(n="Invalid ${typeName}: `${value}`",["value",o]);return u.failure(e,[n,r])},function(t){return u.failure(e,t[0].error)})}},{key:"_include",value:function(e){return this.superType.include(e)&&u.default.every(this.constraints,function(t){return t.accept(e)})}},{key:"_isSubTypeOf",value:function(t){return t.isSuperTypeOf(this.superType)}},{key:"_equals",value:function(t){return this===t||t instanceof o&&this.superTypeEquals(t)&&this.constraintsEquals(t)||f(d(o.prototype),"_equals",this).call(this,t)}},{key:"low",value:function(){return this.superType.low()}},{key:"toString",value:function(){return"".concat(this.superType.toString(),"( x | ... )")}},{key:"superTypeEquals",value:function(t){return this.superType.equals(t.superType)}},{key:"constraintsEquals",value:function(t){return this.constraints.length===t.constraints.length&&u.default.every(u.default.zip(this.constraints,t.constraints),function(t){return t[0].equals(t[1])})}},{key:"resolveProxies",value:function(t){return this.superType.resolveProxies(t)}}])&&l(t.prototype,e),n&&l(t,n),o}();(0,r.TypeType)(t,"sub",["superType","constraints","metadata"]),(0,i.default)(t,"constraints","constraint",function(e){return u.default.find(this.constraints,function(t){return t.name===e})}),n.default=t},{"../support/constraint":15,"../support/fetchable":18,"../support/ic":20,"../support/utils":23,"../type":25}],34:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("../support/ic"),p=i(t("../support/utils")),o=i(t("../type")),u=i(t("../support/heading"));function i(t){return t&&t.__esModule?t:{default:t}}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,u=[],i=!0,a=!1;try{for(n=n.call(t);!(i=(r=n.next()).done)&&(u.push(r.value),!e||u.length!==e);i=!0);}catch(t){a=!0,o=t}finally{try{i||null==n.return||n.return()}finally{if(a)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=h(n);return function(t,e){{if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,r?(t=h(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t){var e={};return t.each(function(t){return e[t.name]=t}),e}t=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(a,o["default"]);var t,e,n,r=d(a);function a(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=r.call(this,e)).heading=t,e.heading instanceof u.default||p.default.argumentError("Heading expected, got:",e.heading),e}return t=a,(e=[{key:"fetch",value:function(){return this.heading.fetch.apply(this.heading,arguments)}},{key:"_include",value:function(n){return"object"===s(n)&&(!!this.areAttributesValid(n)&&p.default.every(this.heading.attributes,function(t){if(null==n[t.name])return!0;var e=n[t.name];return t.type.include(e)}))}},{key:"_mDress",value:function(a,c){var s=this;if(!(a instanceof Object))return c.failure(this,["Invalid Tuple: `${value}`",[a]]);var l={},f=c.success(l),t=v(this.heading);return p.default.extend(t,a),t=Object.keys(t),c.refine(f,t,function(t,e){var n,r=s.heading.getAttr(e)||null,o=a[e];if(void 0===o&&null!=r&&r.required)return(n=c.failure(e,["Missing attribute `${attrName}`",[e]])).onFailure(function(t){return t.location=e,n});if(null!=r||s.heading.allowExtra()){if(null==r&&s.heading.allowExtra()){var u,i=s.heading.getExtraType();return(u=i.mDress(o,c)).onFailure(function(t){return t.location=e,u}),u.onSuccess(function(t){return l[e]=t,f})}return null!=r&&void 0!==o?((u=r.type.mDress(o,c)).onFailure(function(t){return t.location=e,u}),u.onSuccess(function(t){return l[e]=t,f})):f}return(n=c.failure(e,["Unrecognized attribute `${attrName}`",[e]])).onFailure(function(t){return t.location=e,n})},function(t){return c.failure(this,["Invalid ${typeName}",["Tuple",a]],t)})}},{key:"_undress",value:function(o,u){u instanceof a||p.default.undressError("Tuple cannot undress to `".concat(u,"` (").concat(u.constructor,")."));var t=c(p.default.triSplit(v(this.heading),v(u.heading)),3),e=t[0],n=t[1],t=t[2];p.default.find(n,function(t){return t.required})&&p.default.undressError("Tuple undress does not allow projecting ".concat(n)),p.default.isEmpty(t)||p.default.undressError("Tuple undress does not support missing ".concat(t)),p.default.every(e,function(t){return t[0].required===t[1].required})||p.default.undressError("Tuple undress requires optional attributes to agree");var i={};return this.heading.each(function(t){var e=t.name,n=t.type,r=o[e];if(void 0!==r){e=u.heading.getAttr(e).type;return i[t.name]=n.undress(r,e)}}),i}},{key:"_isSuperTypeOf",value:function(t){return this===t||t instanceof a&&this.heading.isSuperHeadingOf(t.heading)}},{key:"_equals",value:function(t){return this===t||t instanceof a&&this.heading.equals(t.heading)||f(h(a.prototype),"_equals",this).apply(this,arguments)}},{key:"low",value:function(){return new a(this.heading.low())}},{key:"toString",value:function(){return"{ ".concat(this.heading.toString()," }")}},{key:"attributeNames",value:function(){return p.default.map(this.heading.attributes,function(t){return t.name})}},{key:"requiredAttributeNames",value:function(){return p.default.map(p.default.values(p.default.filter(this.heading.attributes,function(t){return t.required})),function(t){return t.name})}},{key:"extraAttributes",value:function(t){return p.default.difference(p.default.keys(t),this.attributeNames())}},{key:"missingAttributes",value:function(t){return p.default.difference(this.requiredAttributeNames(),p.default.keys(t))}},{key:"areAttributesValid",value:function(t){return(this.heading.allowExtra()||p.default.isEmpty(this.extraAttributes(t)))&&p.default.isEmpty(this.missingAttributes(t))}},{key:"resolveProxies",value:function(t){return this.heading.resolveProxies(t)}}])&&l(t.prototype,e),n&&l(t,n),a}();n.default=t,(0,r.TypeType)(t,"tuple",["heading","metadata"])},{"../support/heading":19,"../support/ic":20,"../support/utils":23,"../type":25}],35:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("../support/ic"),u=a(t("../type")),i=a(t("../support/utils"));function a(t){return t&&t.__esModule?t:{default:t}}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=f(n);return function(t,e){{if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,r?(t=f(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}t=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(o,u["default"]);var t,e,n,r=l(o);function o(t,e,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=r.call(this,n)).type=t,n.name=e,n.name||i.default.argumentError("Name cannot be null on TypeDef"),n.generator=n.type.generator,n}return t=o,(e=[{key:"fetch",value:function(){return this.type.fetch.apply(this.type,arguments)}},{key:"_include",value:function(t){return this.type.include(t)}},{key:"_mDress",value:function(t,e){var n=this,r=this.type.mDress(t,e);return r.onFailure(function(t){return"Main"===n.name?t.typeName="Data":t.typeName=n.name,r})}},{key:"_undress",value:function(t,e){return this.type.undress(t,e)}},{key:"_isSuperTypeOf",value:function(t){return this.type.isSuperTypeOf(t)}},{key:"_isSubTypeOf",value:function(t){return this.type._isSubTypeOf(t)}},{key:"_equals",value:function(t){return this.type.equals(t)}},{key:"isFake",value:function(){return!0}},{key:"trueOne",value:function(){return this.type}},{key:"low",value:function(){return this.type.low()}},{key:"resolveProxies",value:function(t){return this.type.resolveProxies(t)}},{key:"toString",value:function(){return this.name}}])&&c(t.prototype,e),n&&c(t,n),o}();(0,r.ObjectType)(t,["type","name","metadata"]),n.default=t},{"../support/ic":20,"../support/utils":23,"../type":25}],36:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("../support/ic"),u=a(t("../support/utils")),i=a(t("../type"));function a(t){return t&&t.__esModule?t:{default:t}}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=f(n);return function(t,e){{if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,r?(t=f(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}t=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(o,i["default"]);var t,e,n,r=l(o);function o(t,e,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,e)).typeName=t,e.target=n,e.typeName||u.default.argumentError("Proxied ref cannot be null on TypeRef"),e}return t=o,(e=[{key:"fetch",value:function(){var t=this.resolved();return t.fetch.apply(t,arguments)}},{key:"_include",value:function(t){return this.resolved().include(t)}},{key:"_mDress",value:function(t,e){return this.resolved().mDress(t,e)}},{key:"_undress",value:function(t,e){return this.resolved().undress(t,e)}},{key:"_isSuperTypeOf",value:function(t){return this.resolved().isSuperTypeOf(t)}},{key:"_isSubTypeOf",value:function(t){return this.resolved()._isSubTypeOf(t)}},{key:"_equals",value:function(t){return this.resolved().equals(t)}},{key:"isFake",value:function(){return!0}},{key:"trueOne",value:function(){return this.resolved().trueOne()}},{key:"low",value:function(){return this.resolved().low()}},{key:"resolve",value:function(t){return null!=this.target?this.target:this.target=t.resolve(this.typeName).fetchType()}},{key:"resolveProxies",value:function(t){return this.resolve(t)}},{key:"resolved",value:function(){if(!this.target)throw new Error("Proxy is not resolved");return this.target}},{key:"toString",value:function(){return this.typeName}}])&&c(t.prototype,e),n&&c(t,n),o}();(0,r.TypeType)(t,"ref",["typeName","metadata"]),n.default=t},{"../support/ic":20,"../support/utils":23,"../type":25}],37:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("../support/ic"),u=a(t("../support/utils")),i=a(t("../type"));function a(t){return t&&t.__esModule?t:{default:t}}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(n):e.value}})(t,e,n||t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=p(n);return function(t,e){{if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined")}return function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t)}(this,r?(t=p(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}t=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(o,i["default"]);var t,e,n,r=f(o);function o(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,e)).candidates=t,u.default.each(e.candidates,function(t){if(!(t instanceof i.default))return u.default.argumentError("Finitio.Type expected, got:",t)}),e}return t=o,(e=[{key:"_mDress",value:function(e,n){var r=this;return n.find(this.candidates,function(t){return t.mDress(e,n)},function(t){return n.failure(r,["Invalid ${typeName}: `${value}`",["value",e]],t)})}},{key:"_undress",value:function(e,n){var t;return this===n?e:(t=u.default.find(this.candidates,function(t){return n.isSuperTypeOf(t)}))||(t=u.default.find(this.candidates,function(t){return t.include(e)}))?t.undress(e,n):u.default.undressError("Unable to undress `".concat(e,"` to `").concat(n,"`"))}},{key:"_include",value:function(e){return null!=u.default.find(this.candidates,function(t){return t.include(e)})}},{key:"_isSuperTypeOf",value:function(e){var t=this;return this===e||u.default.any(this.candidates,function(t){return t.isSuperTypeOf(e)})||e instanceof o&&u.default.every(e.candidates,function(e){return u.default.any(t.candidates,function(t){return t.isSuperTypeOf(e)})})||s(p(o.prototype),"_isSuperTypeOf",this).apply(this,arguments)}},{key:"_equals",value:function(t){return this===t||t instanceof o&&this.candidatesEquals(t,!0)||s(p(o.prototype),"_equals",this).apply(this,arguments)}},{key:"candidatesEquals",value:function(t,e){return u.default.every(this.candidates,function(e){return u.default.any(t.candidates,function(t){return e.equals(t)})})&&(!e||t.candidatesEquals(this,!1))}},{key:"low",value:function(){throw"UnionType#low is not defined yet, sorry!"}},{key:"resolveProxies",value:function(e){return u.default.each(this.candidates,function(t){return t.resolveProxies(e)})}},{key:"toString",value:function(){return u.default.map(this.candidates,function(t){return t.toString()}).join("|")}}])&&c(t.prototype,e),n&&c(t,n),o}();(0,r.TypeType)(t,"union",["candidates","metadata"]),n.default=t},{"../support/ic":20,"../support/utils":23,"../type":25}],38:[function(t,e,n){},{}],39:[function(t,e,n){e.exports={name:"finitio",version:"1.3.3",description:"Finitio is a language for capturing information structure.",main:"index.js",author:"Louis Lambeau <louislambeau@gmail.com>",license:"MIT",repository:{type:"git",url:"https://github.com/llambeau/finitio.js"},keywords:["finitio","typing","system","json","serialization","validation"],analyze:!0,bin:{"finitio-js":"./bin/finitio-js"},scripts:{build:"grunt build",test:"grunt test","test:unit":"grunt test:unit","test:integration":"grunt test:integration","test:acceptance":"grunt test:acceptance",browserify:"grunt browserify",lint:"eslint src specs *.js .eslintrc.js","lint:fix":"eslint --fix src specs *.js .eslintrc.js"},dependencies:{commander:"~2.9.0"},devDependencies:{"@babel/cli":"^7.15.7","@babel/core":"^7.15.8","@babel/node":"^7.15.8","@babel/plugin-proposal-class-properties":"^7.14.5","@babel/preset-env":"^7.15.8","@babel/register":"^7.15.3","@enspirit/eslint-config-node":"0.1.2","babel-loader":"^8.2.3",browserify:"~17.0.0",cucumber:"~0.9.4",eslint:"^7.21.0",grunt:"~1.4.1","grunt-babel":"^8.0.0","grunt-browserify":"~6.0.0","grunt-cli":"^1.4.3","grunt-contrib-clean":"~2.0.0","grunt-contrib-jshint":"~3.1.1","grunt-contrib-uglify":"~5.0.1","grunt-contrib-watch":"~1.1.0","grunt-cucumber":"git://github.com/llambeau/grunt-cucumber-js.git#master","grunt-fixtures2js":"~0.1.3","grunt-mocha-test":"~0.13.3","grunt-peg":"~2.0.1","grunt-shell":"~3.0.1",mocha:"^9.1.3","mocha-junit-reporter":"^2.0.2",pegjs:"~0.10.0",shelljs:"~0.8.4",should:"~13.2.3",underscore:"~1.13.1"}}},{}]},{},[1])(1)});