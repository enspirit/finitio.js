!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){b.exports={name:"finitio",version:"1.0.0",description:"Finitio is a language for capturing information structure.",main:"index.js",author:"Louis Lambeau <louislambeau@gmail.com>",license:"MIT",repository:{type:"git",url:"https://github.com/llambeau/finitio.js"},keywords:["finitio","typing","system","json","serialization","validation"],analyze:!0,bin:{"finitio-js":"./bin/finitio-js"},scripts:{test:"grunt",build:"grunt compile",prepublish:"grunt test && grunt compile"},dependencies:{commander:"~2.9.0"},devDependencies:{"coffee-script":"~1.10.0",cucumber:"~0.9.4",underscore:"~1.8.3",shelljs:"~0.5.3",should:"~8.2.1",browserify:"~13.0.0",coffeeify:"~2.0.1",pegjs:"~0.9.0",grunt:"~0.4.5","grunt-cli":"~0.1.13","grunt-contrib-watch":"~0.6.1","grunt-browserify":"~4.0.1","grunt-coffeelint":"0.0.13","grunt-cucumber":"git://github.com/llambeau/grunt-cucumber-js.git#master","grunt-mocha-test":"~0.12.7","grunt-contrib-coffee":"~0.13.0","grunt-contrib-copy":"~0.8.2","grunt-contrib-clean":"~0.7.0","grunt-contrib-uglify":"~0.11.0","grunt-peg":"~2.0.0","grunt-contrib-jshint":"~0.12.0","grunt-fixtures2js":"~0.1.3","grunt-shell":"~1.1.2"}}},{}],2:[function(a,b){(function(){var c,d,e;c=a("./finitio/support/utils"),d=function(){function b(){}return b.VERSION=a("../package.json").version,b.CONFORMANCE="0.4",b.World={Finitio:b,JsTypes:{Finitio:b,Number:Number,String:String,Boolean:Boolean,Date:Date,Function:Function,RegExp:RegExp},importResolver:a("./finitio/resolver")},b.world=function(){var a,d,f,g;for(d=c.clone(b.World),f=0,g=arguments.length;g>f;f++)a=arguments[f],a&&e(d,a);return d},b.parse=function(a,b){return this.Parser.parse(a,b||{})},b.system=function(a,b){return"string"==typeof a&&(a=this.parse(a)),this.Meta.System.dress(a,this.world(b))},b.bundleFile=function(a,b){return new this.Bundler(this.world(b)).addFile(a).flush()},b.bundleSource=function(a,b){return new this.Bundler(this.world(b)).addSource(a).flush()},b}(),e=function(a,b){var d,e,f;f=[];for(d in b)e=b[d],f.push("JsTypes"===d?a[d]=c.extend(a[d],e):a[d]=e);return f},d.TypeError=a("./finitio/errors").TypeError,d.Utils=a("./finitio/support/utils"),d.Contracts=a("./finitio/contracts"),d.Attribute=a("./finitio/support/attribute"),d.Contract=a("./finitio/support/contract"),d.Heading=a("./finitio/support/heading"),d.Constraint=a("./finitio/support/constraint"),d.System=a("./finitio/system"),d.Parser=a("./finitio/parser"),d.Bundler=a("./finitio/bundler"),d.Type=a("./finitio/type"),d.TypeDef=a("./finitio/type/type_def"),d.TypeRef=a("./finitio/type/type_ref"),d.AdType=a("./finitio/type/ad_type"),d.AnyType=a("./finitio/type/any_type"),d.BuiltinType=a("./finitio/type/builtin_type"),d.RelationType=a("./finitio/type/relation_type"),d.SeqType=a("./finitio/type/seq_type"),d.SetType=a("./finitio/type/set_type"),d.StructType=a("./finitio/type/struct_type"),d.SubType=a("./finitio/type/sub_type"),d.TupleType=a("./finitio/type/tuple_type"),d.UnionType=a("./finitio/type/union_type"),d.Meta=a("./finitio/support/meta"),b.exports=d}).call(this)},{"../package.json":1,"./finitio/bundler":3,"./finitio/contracts":4,"./finitio/errors":9,"./finitio/parser":10,"./finitio/resolver":11,"./finitio/support/attribute":13,"./finitio/support/constraint":15,"./finitio/support/contract":16,"./finitio/support/heading":19,"./finitio/support/meta":22,"./finitio/support/utils":23,"./finitio/system":24,"./finitio/type":25,"./finitio/type/ad_type":26,"./finitio/type/any_type":27,"./finitio/type/builtin_type":28,"./finitio/type/relation_type":29,"./finitio/type/seq_type":30,"./finitio/type/set_type":31,"./finitio/type/struct_type":32,"./finitio/type/sub_type":33,"./finitio/type/tuple_type":34,"./finitio/type/type_def":35,"./finitio/type/type_ref":36,"./finitio/type/union_type":37}],3:[function(a,b){(function(){var c,d,e,f,g;f=a("./parser"),e=a("./support/meta"),c=a("./support/utils"),g=a("fs"),d=function(){function a(a){this.world=a,this.systems={}}var b;return b="module.exports = (function(){\n  var ss = JSONDATA;\n  var r = function(fallback){\n    return function(path, w, options){\n      var s = ss[path];\n      if (s){\n        if (options && options.raw){\n          return [ path, s ];\n        } else {\n          return w.Finitio.system(s, w);\n        }\n      } else if (fallback) {\n        return fallback(path, w, options);\n      } else {\n        throw new Error('Unable to resolve: `' + path + '`');\n      }\n    };\n  };\n  return function(w, options){\n    if (!w) { w = require('finit' + 'io.js').World; }\n    w = w.Finitio.world(w, {\n      importResolver: r(w.importResolver)\n    });\n    return w.importResolver('URL', w, options);\n  };\n})();",a.prototype.flush=function(){return b.replace(/^[ ]{4}/,"").replace(/JSONDATA/,JSON.stringify(this.systems)).replace(/URL/,this.world.sourceUrl)},a.prototype.addDirectory=function(){throw new Error("Bundling directories is not supported")},a.prototype.addFile=function(a){var b;return g.lstatSync(a).isDirectory()?this.addDirectory(a):(b=g.readFileSync(a).toString(),this.addSource(b)),this},a.prototype.addSource=function(a){return this._bundle(this.world.Finitio.parse(a),this.world),this},a.prototype._bundle=function(a,b){var c,d,e,f,g,h,i;if(b.check&&b.Finitio.system(a,b),this.systems[b.sourceUrl]=a,a.imports){for(h=a.imports,i=[],f=0,g=h.length;g>f;f++)c=h[f],e=b.importResolver(c.from,b,{raw:!0}),c.from=e[0],d=b.Finitio.world(b,{sourceUrl:e[0]}),i.push(this._bundle(e[1],d));return i}},a}(),b.exports=d}).call(this)},{"./parser":10,"./support/meta":22,"./support/utils":23,fs:38}],4:[function(a,b){(function(){b.exports={Date:a("./contracts/date"),Time:a("./contracts/time"),Expression:a("./contracts/expression"),JsType:a("./contracts/js_type")}}).call(this)},{"./contracts/date":5,"./contracts/expression":6,"./contracts/js_type":7,"./contracts/time":8}],5:[function(a,b){b.exports=function(){var a=function(a){var b=Object.prototype.toString;return"[object Date]"===b.call(a)&&!isNaN(a.getTime())};return{iso8601:{dress:function(b){var c=new Date(b);if(a(c))return c;throw new Error("Invalid Date string `"+b+"`")},undress:function(b){if(a(b)){var c=b.getFullYear().toString(),d=(b.getMonth()+1).toString(),e=b.getDate().toString();return c+"-"+(d[1]?d:"0"+d[0])+"-"+(e[1]?e:"0"+e[0])}throw new Error("Invalid Date `"+b+"`")}},milliseconds:{dress:function(b){var c=new Date(b);if(a(c))return c;throw new Error("Invalid Date milliseconds `"+b+"`")},undress:function(b){if(a(b))return b.getTime();throw new Error("Invalid Date `"+b+"`")}}}}()},{}],6:[function(a,b){b.exports=function(){return{defn:{dress:function(a){/^return/.test(a[a.length-1])||(a[a.length-1]="return "+a[a.length-1]);var b=Function.apply(Function,a);return b.defn=a,b},undress:function(a){if(!a.defn)throw new Error("No defn found: "+a.toString());return a.defn}}}}()},{}],7:[function(a,b){b.exports=function(){return{name:{dress:function(a,b){var c=null;if(c=b?new Function("world","return world."+a+";")(b):new Function("return "+a+";")())return c;throw msg="Unknown javascript type: `"+a+"` (",msg+=Object.keys(b).toString(),msg+=")",new Error(msg)},undress:function(){throw new Error("Unimplemented")}}}}()},{}],8:[function(a,b){b.exports=function(){var a=function(a){var b=Object.prototype.toString;return"[object Date]"===b.call(a)&&!isNaN(a.getTime())};return{iso8601:{dress:function(b){var c=new Date(b);if(a(c))return c;throw new Error("Invalid Date string `"+b+"`")},undress:function(b){if(a(b))return b.toISOString();throw new Error("Invalid Date `"+s+"`")}},milliseconds:{dress:function(b){var c=new Date(b);if(a(c))return c;throw new Error("Invalid Date milliseconds `"+b+"`")},undress:function(b){if(a(b))return b.getTime();throw new Error("Invalid Date `"+b+"`")}}}}()},{}],9:[function(a,b){(function(){var c,d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("./support/utils"),d=function(a){function b(a){c.extend(this,a),this.message=g(this),b.__super__.constructor.call(this,this.message,this.rootCause)}return j(b,a),Object.defineProperty(b.prototype,"locatedMessage",{get:function(){return null!=this.location?"["+this.location+"] "+this.message:this.message}}),Object.defineProperty(b.prototype,"causes",{get:function(){return null!=this.causesCache?this.causesCache:this.causesCache=this.children&&f(this)}}),Object.defineProperty(b.prototype,"cause",{get:function(){return this.causes&&this.causes[0]}}),Object.defineProperty(b.prototype,"rootCauses",{get:function(){return null!=this.rootCausesCache?this.rootCausesCache:this.rootCausesCache=h(this,[])}}),Object.defineProperty(b.prototype,"rootCause",{get:function(){return this.rootCauses[this.rootCauses.length-1]}}),b.prototype.explain=function(){var a,b,c,d,e;if(b=this.locatedMessage+"\n",this.rootCauses)for(e=this.rootCauses,c=0,d=e.length;d>c;c++)a=e[c],b+="  "+a.locatedMessage+"\n";return b},b.prototype.explainTree=function(a){var b,c,d,e,f,g,h;for(d="",null==a&&(a=0),c=e=0;a>=0?a>e:e>a;c=a>=0?++e:--e)d+="  ";if(d+=this.locatedMessage+"\n",null!=this.causes)for(h=this.causes,f=0,g=h.length;g>f;f++)b=h[f],d+=b.explainTree(a+1);return d},b}(Error),g=function(a){var b,d,e,f;return e=a.error,e instanceof Array?(f=e,e=f[0],b=f[1],d=-1,e.replace(/\$\{([a-zA-Z]+)\}/g,function(){return function(e){var f;return d+=1,f=e.slice(2,e.length-1),c.toString(a[f]||b[d])}}(this))):"string"==typeof e?e:a.toString()},f=function(a){return c.map(a.children,function(b){return b.location=e(a.location,b.location),b instanceof d?b:new d(b instanceof Error?{error:b.message,location:b.location}:b)})},h=function(a,b){return a.causes?c.each(a.causes,function(a){return h(a,b)}):b.push(a),b},e=function(a,b){return null==b?a:null==a?b:a+"/"+b},b.exports={TypeError:d}}).call(this)},{"./support/utils":23}],10:[function(a,b){b.exports=function(){function a(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}function b(a,b,c,d,e,f){this.message=a,this.expected=b,this.found=c,this.offset=d,this.line=e,this.column=f,this.name="SyntaxError"}function c(a){function c(b){function c(b,c,d){var e,f;for(e=c;d>e;e++)f=a.charAt(e),"\n"===f?(b.seenCR||b.line++,b.column=1,b.seenCR=!1):"\r"===f||"\u2028"===f||"\u2029"===f?(b.line++,b.column=1,b.seenCR=!0):(b.column++,b.seenCR=!1)}return me!==b&&(me>b&&(me=0,ne={line:1,column:1,seenCR:!1}),c(ne,me,b),me=b),ne}function d(a){oe>ke||(ke>oe&&(oe=ke,pe=[]),pe.push(a))}function e(d,e,f){function g(a){var b=1;for(a.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});b<a.length;)a[b-1]===a[b]?a.splice(b,1):b++}function h(a,b){function c(a){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(a){return"\\x"+b(a)}).replace(/[\u0180-\u0FFF]/g,function(a){return"\\u0"+b(a)}).replace(/[\u1080-\uFFFF]/g,function(a){return"\\u"+b(a)})}var d,e,f,g=new Array(a.length);for(f=0;f<a.length;f++)g[f]=a[f].description;return d=a.length>1?g.slice(0,-1).join(", ")+" or "+g[a.length-1]:g[0],e=b?'"'+c(b)+'"':"end of input","Expected "+d+" but "+e+" found."}var i=c(f),j=f<a.length?a.charAt(f):null;return null!==e&&g(e),new b(null!==d?d:h(e,j),e,j,f,i.line,i.column)}function f(){var a,b,c,d,e,f,h,j,k,m,n,o=63*ke+0,p=re[o];return p?(ke=p.nextPos,p.result):(a=ke,b=kb(),b!==sb?(c=g(),c!==sb?(d=kb(),d!==sb?(e=i(),e!==sb?(f=kb(),f!==sb?(h=N(),h===sb&&(h=wb),h!==sb?(j=kb(),j!==sb?(k=l(),k===sb&&(k=wb),k!==sb?(m=kb(),m!==sb?(n=nb(),n!==sb?(le=a,b=xb(c,e,h,k),a=b):(ke=a,a=vb)):(ke=a,a=vb)):(ke=a,a=vb)):(ke=a,a=vb)):(ke=a,a=vb)):(ke=a,a=vb)):(ke=a,a=vb)):(ke=a,a=vb)):(ke=a,a=vb)):(ke=a,a=vb),re[o]={nextPos:ke,result:a},a)}function g(){var a,b,c,d,e,f,g=63*ke+1,i=re[g];if(i)return ke=i.nextPos,i.result;if(a=ke,b=h(),b===sb&&(b=wb),b!==sb){for(c=[],d=ke,e=kb(),e!==sb?(f=h(),f!==sb?(e=[e,f],d=e):(ke=d,d=vb)):(ke=d,d=vb);d!==sb;)c.push(d),d=ke,e=kb(),e!==sb?(f=h(),f!==sb?(e=[e,f],d=e):(ke=d,d=vb)):(ke=d,d=vb);c!==sb?(le=a,b=yb(b,c),a=b):(ke=a,a=vb)}else ke=a,a=vb;return re[g]={nextPos:ke,result:a},a}function h(){var b,c,e,f,g,h,i,j,k=63*ke+2,l=re[k];return l?(ke=l.nextPos,l.result):(b=ke,a.substr(ke,7)===zb?(c=zb,ke+=7):(c=sb,0===qe&&d(Ab)),c!==sb?(e=mb(),e!==sb?(f=fb(),f!==sb?(g=mb(),g!==sb?(a.substr(ke,2)===Bb?(h=Bb,ke+=2):(h=sb,0===qe&&d(Cb)),h!==sb?(i=mb(),i!==sb?(j=cb(),j!==sb?(le=b,c=Db(f,j),b=c):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb),b===sb&&(b=ke,a.substr(ke,7)===zb?(c=zb,ke+=7):(c=sb,0===qe&&d(Ab)),c!==sb?(e=mb(),e!==sb?(f=fb(),f!==sb?(le=b,c=Eb(f),b=c):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)),re[k]={nextPos:ke,result:b},b)}function i(){var a,b,c,d,e,f,g=63*ke+3,h=re[g];if(h)return ke=h.nextPos,h.result;if(a=ke,b=j(),b===sb&&(b=wb),b!==sb){for(c=[],d=ke,e=kb(),e!==sb?(f=j(),f!==sb?(e=[e,f],d=e):(ke=d,d=vb)):(ke=d,d=vb);d!==sb;)c.push(d),d=ke,e=kb(),e!==sb?(f=j(),f!==sb?(e=[e,f],d=e):(ke=d,d=vb)):(ke=d,d=vb);c!==sb?(le=a,b=yb(b,c),a=b):(ke=a,a=vb)}else ke=a,a=vb;return re[g]={nextPos:ke,result:a},a}function j(){var b,c,e,f,g,h,i,j=63*ke+4,k=re[j];return k?(ke=k.nextPos,k.result):(b=ke,c=N(),c===sb&&(c=wb),c!==sb?(e=bb(),e!==sb?(f=kb(),f!==sb?(61===a.charCodeAt(ke)?(g=Fb,ke++):(g=sb,0===qe&&d(Gb)),g!==sb?(h=kb(),h!==sb?(i=l(),i!==sb?(le=b,c=Hb(c,e,i),b=c):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb),re[j]={nextPos:ke,result:b},b)}function k(){var a,b=63*ke+5,c=re[b];return c?(ke=c.nextPos,c.result):(a=l(),re[b]={nextPos:ke,result:a},a)}function l(){var a,b,c,d,e,f,g,h=63*ke+6,i=re[h];if(i)return ke=i.nextPos,i.result;if(a=ke,b=N(),b===sb&&(b=wb),b!==sb)if(c=m(),c!==sb){if(d=[],e=ke,f=hb(),f!==sb?(g=m(),g!==sb?(f=[f,g],e=f):(ke=e,e=vb)):(ke=e,e=vb),e!==sb)for(;e!==sb;)d.push(e),e=ke,f=hb(),f!==sb?(g=m(),g!==sb?(f=[f,g],e=f):(ke=e,e=vb)):(ke=e,e=vb);else d=vb;d!==sb?(le=a,b=Ib(b,c,d),a=b):(ke=a,a=vb)}else ke=a,a=vb;else ke=a,a=vb;return a===sb&&(a=m()),re[h]={nextPos:ke,result:a},a}function m(){var a,b,c,d,e=63*ke+7,f=re[e];return f?(ke=f.nextPos,f.result):(a=ke,b=N(),b===sb&&(b=wb),b!==sb?(c=r(),c!==sb?(d=n(),d!==sb?(le=a,b=Jb(b,c,d),a=b):(ke=a,a=vb)):(ke=a,a=vb)):(ke=a,a=vb),a===sb&&(a=r()),re[e]={nextPos:ke,result:a},a)}function n(){var b,c,e,f,g,h,i,j,k=63*ke+8,l=re[k];return l?(ke=l.nextPos,l.result):(b=ke,40===a.charCodeAt(ke)?(c=Kb,ke++):(c=sb,0===qe&&d(Lb)),c!==sb?(e=kb(),e!==sb?(f=Z(),f!==sb?(g=hb(),g!==sb?(h=o(),h!==sb?(i=kb(),i!==sb?(41===a.charCodeAt(ke)?(j=Mb,ke++):(j=sb,0===qe&&d(Nb)),j!==sb?(le=b,c=Ob(f,h),b=c):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb),b===sb&&(b=ke,c=kb(),c!==sb?(a.substr(ke,2)===Pb?(e=Pb,ke+=2):(e=sb,0===qe&&d(Qb)),e!==sb?(f=kb(),f!==sb?(g=Y(),g!==sb?(le=b,c=Rb(g),b=c):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb),b===sb&&(b=ke,c=kb(),c!==sb?(a.substr(ke,2)===Pb?(e=Pb,ke+=2):(e=sb,0===qe&&d(Qb)),e!==sb?(f=kb(),f!==sb?(g=R(),g!==sb?(le=b,c=Sb(g),b=c):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb),b===sb&&(b=ke,c=kb(),c!==sb?(a.substr(ke,2)===Pb?(e=Pb,ke+=2):(e=sb,0===qe&&d(Qb)),e!==sb?(f=kb(),f!==sb?(g=S(),g!==sb?(le=b,c=Tb(g),b=c):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)))),re[k]={nextPos:ke,result:b},b)}function o(){var a,b,c,d,e,f,g=63*ke+9,h=re[g];if(h)return ke=h.nextPos,h.result;if(a=ke,b=p(),b!==sb){for(c=[],d=ke,e=jb(),e!==sb?(f=p(),f!==sb?(e=[e,f],d=e):(ke=d,d=vb)):(ke=d,d=vb);d!==sb;)c.push(d),d=ke,e=jb(),e!==sb?(f=p(),f!==sb?(e=[e,f],d=e):(ke=d,d=vb)):(ke=d,d=vb);c!==sb?(d=jb(),d!==sb?(le=a,b=yb(b,c),a=b):(ke=a,a=vb)):(ke=a,a=vb)}else ke=a,a=vb;return a===sb&&(a=ke,b=q(),b!==sb&&(le=a,b=Ub(b)),a=b),re[g]={nextPos:ke,result:a},a}function p(){var b,c,e,f,g,h,i=63*ke+10,j=re[i];return j?(ke=j.nextPos,j.result):(b=ke,c=N(),c===sb&&(c=wb),c!==sb?(e=_(),e!==sb?(58===a.charCodeAt(ke)?(f=Vb,ke++):(f=sb,0===qe&&d(Wb)),f!==sb?(g=kb(),g!==sb?(h=K(),h!==sb?(le=b,c=Xb(c,e,h),b=c):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb),re[i]={nextPos:ke,result:b},b)}function q(){var a,b,c=63*ke+11,d=re[c];return d?(ke=d.nextPos,d.result):(a=ke,b=K(),b!==sb&&(le=a,b=Yb(b)),a=b,re[c]={nextPos:ke,result:a},a)}function r(){var a,b=63*ke+12,c=re[b];return c?(ke=c.nextPos,c.result):(a=t(),a===sb&&(a=s(),a===sb&&(a=w())),re[b]={nextPos:ke,result:a},a)}function s(){var b,c,e,f,g,h,i,j=63*ke+13,k=re[j];return k?(ke=k.nextPos,k.result):(b=ke,c=N(),c===sb&&(c=wb),c!==sb?(123===a.charCodeAt(ke)?(e=Zb,ke++):(e=sb,0===qe&&d($b)),e!==sb?(f=kb(),f!==sb?(g=u(),g!==sb?(h=kb(),h!==sb?(125===a.charCodeAt(ke)?(i=_b,ke++):(i=sb,0===qe&&d(ac)),i!==sb?(le=b,c=bc(c,g),b=c):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb),re[j]={nextPos:ke,result:b},b)}function t(){var b,c,e,f,g,h,i,j=63*ke+14,k=re[j];return k?(ke=k.nextPos,k.result):(b=ke,c=N(),c===sb&&(c=wb),c!==sb?(a.substr(ke,2)===cc?(e=cc,ke+=2):(e=sb,0===qe&&d(dc)),e!==sb?(f=kb(),f!==sb?(g=u(),g!==sb?(h=kb(),h!==sb?(a.substr(ke,2)===ec?(i=ec,ke+=2):(i=sb,0===qe&&d(fc)),i!==sb?(le=b,c=gc(c,g),b=c):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb),re[j]={nextPos:ke,result:b},b)}function u(){var a,b,c,d,e,f,g=63*ke+15,h=re[g];if(h)return ke=h.nextPos,h.result;if(a=ke,b=v(),b===sb&&(b=wb),b!==sb){for(c=[],d=ke,e=jb(),e!==sb?(f=v(),f!==sb?(e=[e,f],d=e):(ke=d,d=vb)):(ke=d,d=vb);d!==sb;)c.push(d),d=ke,e=jb(),e!==sb?(f=v(),f!==sb?(e=[e,f],d=e):(ke=d,d=vb)):(ke=d,d=vb);c!==sb?(d=jb(),d!==sb?(e=gb(),e===sb&&(e=wb),e!==sb?(le=a,b=hc(b,c,e),a=b):(ke=a,a=vb)):(ke=a,a=vb)):(ke=a,a=vb)}else ke=a,a=vb;return re[g]={nextPos:ke,result:a},a}function v(){var b,c,e,f,g,h,i,j,k=63*ke+16,m=re[k];return m?(ke=m.nextPos,m.result):(b=ke,c=N(),c===sb&&(c=wb),c!==sb?(e=ab(),e!==sb?(f=kb(),f!==sb?(58===a.charCodeAt(ke)?(g=Vb,ke++):(g=sb,0===qe&&d(Wb)),g!==sb?(63===a.charCodeAt(ke)?(h=ic,ke++):(h=sb,0===qe&&d(jc)),h===sb&&(h=wb),h!==sb?(i=kb(),i!==sb?(j=l(),j!==sb?(le=b,c=kc(c,e,h,j),b=c):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb),re[k]={nextPos:ke,result:b},b)}function w(){var a,b=63*ke+17,c=re[b];return c?(ke=c.nextPos,c.result):(a=x(),a===sb&&(a=y(),a===sb&&(a=z(),a===sb&&(a=A()))),re[b]={nextPos:ke,result:a},a)}function x(){var b,c,e,f,g,h,i,j=63*ke+18,k=re[j];return k?(ke=k.nextPos,k.result):(b=ke,c=N(),c===sb&&(c=wb),c!==sb?(123===a.charCodeAt(ke)?(e=Zb,ke++):(e=sb,0===qe&&d($b)),e!==sb?(f=kb(),f!==sb?(g=l(),g!==sb?(h=kb(),h!==sb?(125===a.charCodeAt(ke)?(i=_b,ke++):(i=sb,0===qe&&d(ac)),i!==sb?(le=b,c=lc(c,g),b=c):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb),re[j]={nextPos:ke,result:b},b)}function y(){var b,c,e,f,g,h,i,j=63*ke+19,k=re[j];return k?(ke=k.nextPos,k.result):(b=ke,c=N(),c===sb&&(c=wb),c!==sb?(91===a.charCodeAt(ke)?(e=mc,ke++):(e=sb,0===qe&&d(nc)),e!==sb?(f=kb(),f!==sb?(g=l(),g!==sb?(h=kb(),h!==sb?(93===a.charCodeAt(ke)?(i=oc,ke++):(i=sb,0===qe&&d(pc)),i!==sb?(le=b,c=qc(c,g),b=c):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb),re[j]={nextPos:ke,result:b},b)}function z(){var b,c,e,f,g,h,i,j,k=63*ke+20,m=re[k];if(m)return ke=m.nextPos,m.result;if(b=ke,c=N(),c===sb&&(c=wb),c!==sb)if(60===a.charCodeAt(ke)?(e=rc,ke++):(e=sb,0===qe&&d(sc)),e!==sb)if(f=l(),f!==sb){for(g=[],h=ke,i=jb(),i!==sb?(j=l(),j!==sb?(i=[i,j],h=i):(ke=h,h=vb)):(ke=h,h=vb);h!==sb;)g.push(h),h=ke,i=jb(),i!==sb?(j=l(),j!==sb?(i=[i,j],h=i):(ke=h,h=vb)):(ke=h,h=vb);g!==sb?(h=jb(),h!==sb?(62===a.charCodeAt(ke)?(i=tc,ke++):(i=sb,0===qe&&d(uc)),i!==sb?(le=b,c=vc(c,f,g),b=c):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)}else ke=b,b=vb;else ke=b,b=vb;else ke=b,b=vb;return re[k]={nextPos:ke,result:b},b}function A(){var a,b=63*ke+21,c=re[b];return c?(ke=c.nextPos,c.result):(a=B(),a===sb&&(a=H(),a===sb&&(a=G(),a===sb&&(a=I()))),re[b]={nextPos:ke,result:a},a)}function B(){var a,b,c,d,e=63*ke+22,f=re[e];return f?(ke=f.nextPos,f.result):(a=ke,b=C(),b===sb&&(b=wb),b!==sb?(c=kb(),c!==sb?(d=D(),d!==sb?(le=a,b=wc(b,d),a=b):(ke=a,a=vb)):(ke=a,a=vb)):(ke=a,a=vb),re[e]={nextPos:ke,result:a},a)}function C(){var b,c,e,f,g,h=63*ke+23,i=re[h];return i?(ke=i.nextPos,i.result):(b=ke,c=N(),c===sb&&(c=wb),c!==sb?(e=ke,46===a.charCodeAt(ke)?(f=xc,ke++):(f=sb,0===qe&&d(yc)),f!==sb?(g=eb(),g!==sb?(f=[f,g],e=f):(ke=e,e=vb)):(ke=e,e=vb),e!==sb?(le=b,c=zc(c,e),b=c):(ke=b,b=vb)):(ke=b,b=vb),re[h]={nextPos:ke,result:b},b)}function D(){var a,b,c,d,e,f,g=63*ke+24,h=re[g];if(h)return ke=h.nextPos,h.result;if(a=ke,b=E(),b!==sb){for(c=[],d=ke,e=jb(),e!==sb?(f=E(),f!==sb?(e=[e,f],d=e):(ke=d,d=vb)):(ke=d,d=vb);d!==sb;)c.push(d),d=ke,e=jb(),e!==sb?(f=E(),f!==sb?(e=[e,f],d=e):(ke=d,d=vb)):(ke=d,d=vb);c!==sb?(d=jb(),d!==sb?(le=a,b=yb(b,c),a=b):(ke=a,a=vb)):(ke=a,a=vb)}else ke=a,a=vb;return re[g]={nextPos:ke,result:a},a}function E(){var b,c,e,f,g,h,i,j,k=63*ke+25,l=re[k];return l?(ke=l.nextPos,l.result):(b=ke,c=F(),c!==sb?(e=kb(),e!==sb?(92===a.charCodeAt(ke)?(f=Ac,ke++):(f=sb,0===qe&&d(Bc)),f!==sb?(g=J(),g!==sb?(h=kb(),h!==sb?(92===a.charCodeAt(ke)?(i=Ac,ke++):(i=sb,0===qe&&d(Bc)),i!==sb?(j=J(),j!==sb?(le=b,c=Cc(c,g,j),b=c):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb),b===sb&&(b=ke,c=F(),c!==sb?(e=kb(),e!==sb?(46===a.charCodeAt(ke)?(f=xc,ke++):(f=sb,0===qe&&d(yc)),f!==sb?(g=eb(),g!==sb?(le=b,c=Dc(c,g),b=c):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb),b===sb&&(b=F())),re[k]={nextPos:ke,result:b},b)}function F(){var b,c,e,f,g,h,i,j=63*ke+26,k=re[j];return k?(ke=k.nextPos,k.result):(b=ke,c=N(),c===sb&&(c=wb),c!==sb?(60===a.charCodeAt(ke)?(e=rc,ke++):(e=sb,0===qe&&d(sc)),e!==sb?(f=$(),f!==sb?(62===a.charCodeAt(ke)?(g=tc,ke++):(g=sb,0===qe&&d(uc)),g!==sb?(h=kb(),h!==sb?(i=l(),i!==sb?(le=b,c=Ec(c,f,i),b=c):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb),re[j]={nextPos:ke,result:b},b)}function G(){var b,c,e,f=63*ke+27,g=re[f];return g?(ke=g.nextPos,g.result):(b=ke,c=N(),c===sb&&(c=wb),c!==sb?(46===a.charCodeAt(ke)?(e=xc,ke++):(e=sb,0===qe&&d(yc)),e!==sb?(le=b,c=Fc(c),b=c):(ke=b,b=vb)):(ke=b,b=vb),re[f]={nextPos:ke,result:b},b)}function H(){var b,c,e,f,g=63*ke+28,h=re[g];return h?(ke=h.nextPos,h.result):(b=ke,c=N(),c===sb&&(c=wb),c!==sb?(46===a.charCodeAt(ke)?(e=xc,ke++):(e=sb,0===qe&&d(yc)),e!==sb?(f=eb(),f!==sb?(le=b,c=Gc(c,f),b=c):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb),re[g]={nextPos:ke,result:b},b)}function I(){var a,b,c=63*ke+29,d=re[c];return d?(ke=d.nextPos,d.result):(a=ke,b=db(),b!==sb&&(le=a,b=Hc(b)),a=b,re[c]={nextPos:ke,result:a},a)}function J(){var b,c,e,f,g,h,i,j,k,l,m=63*ke+30,n=re[m];return n?(ke=n.nextPos,n.result):(b=ke,40===a.charCodeAt(ke)?(c=Kb,ke++):(c=sb,0===qe&&d(Lb)),c!==sb?(e=kb(),e!==sb?(f=Z(),f!==sb?(g=kb(),g!==sb?(124===a.charCodeAt(ke)?(h=Ic,ke++):(h=sb,0===qe&&d(Jc)),h!==sb?(i=kb(),i!==sb?(j=K(),j!==sb?(k=kb(),k!==sb?(41===a.charCodeAt(ke)?(l=Mb,ke++):(l=sb,0===qe&&d(Nb)),l!==sb?(le=b,c=Kc(f,j),b=c):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb),re[m]={nextPos:ke,result:b},b)}function K(){var b,c,d,e=63*ke+31,f=re[e];if(f)return ke=f.nextPos,f.result;if(b=ke,c=[],d=L(),d===sb&&(d=M()),d!==sb)for(;d!==sb;)c.push(d),d=L(),d===sb&&(d=M());else c=vb;return c!==sb&&(c=a.substring(b,ke)),b=c,re[e]={nextPos:ke,result:b},b}function L(){var b,c,e,f,g,h=63*ke+32,i=re[h];return i?(ke=i.nextPos,i.result):(b=ke,a.substr(ke,2)===Lc?(c=Lc,ke+=2):(c=sb,0===qe&&d(Mc)),c===sb&&(c=ke,40===a.charCodeAt(ke)?(e=Kb,ke++):(e=sb,0===qe&&d(Lb)),e!==sb?(f=K(),f!==sb?(41===a.charCodeAt(ke)?(g=Mb,ke++):(g=sb,0===qe&&d(Nb)),g!==sb?(e=[e,f,g],c=e):(ke=c,c=vb)):(ke=c,c=vb)):(ke=c,c=vb)),c!==sb&&(c=a.substring(b,ke)),b=c,re[h]={nextPos:ke,result:b},b)}function M(){var b,c,e,f,g,h=63*ke+33,i=re[h];if(i)return ke=i.nextPos,i.result;if(b=ke,c=[],e=ke,f=ke,qe++,Oc.test(a.charAt(ke))?(g=a.charAt(ke),ke++):(g=sb,0===qe&&d(Pc)),qe--,g===sb?f=Nc:(ke=f,f=vb),f!==sb?(a.length>ke?(g=a.charAt(ke),ke++):(g=sb,0===qe&&d(Qc)),g!==sb?(f=[f,g],e=f):(ke=e,e=vb)):(ke=e,e=vb),e!==sb)for(;e!==sb;)c.push(e),e=ke,f=ke,qe++,Oc.test(a.charAt(ke))?(g=a.charAt(ke),ke++):(g=sb,0===qe&&d(Pc)),qe--,g===sb?f=Nc:(ke=f,f=vb),f!==sb?(a.length>ke?(g=a.charAt(ke),ke++):(g=sb,0===qe&&d(Qc)),g!==sb?(f=[f,g],e=f):(ke=e,e=vb)):(ke=e,e=vb);else c=vb;return c!==sb&&(c=a.substring(b,ke)),b=c,re[h]={nextPos:ke,result:b},b}function N(){var b,c,e,f,g,h,i,j,k=63*ke+34,l=re[k];if(l)return ke=l.nextPos,l.result;if(b=ke,a.substr(ke,2)===Rc?(c=Rc,ke+=2):(c=sb,0===qe&&d(Sc)),c!==sb)if(e=kb(),e!==sb)if(f=O(),f!==sb){for(g=[],h=ke,i=jb(),i!==sb?(j=O(),j!==sb?(i=[i,j],h=i):(ke=h,h=vb)):(ke=h,h=vb);h!==sb;)g.push(h),h=ke,i=jb(),i!==sb?(j=O(),j!==sb?(i=[i,j],h=i):(ke=h,h=vb)):(ke=h,h=vb);g!==sb?(h=kb(),h!==sb?(a.substr(ke,2)===Tc?(i=Tc,ke+=2):(i=sb,0===qe&&d(Uc)),i!==sb?(j=kb(),j!==sb?(le=b,c=Vc(f,g),b=c):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)}else ke=b,b=vb;else ke=b,b=vb;else ke=b,b=vb;if(b===sb)if(b=ke,a.substr(ke,2)===Rc?(c=Rc,ke+=2):(c=sb,0===qe&&d(Sc)),c!==sb){if(e=ke,f=[],g=ke,h=ke,qe++,a.substr(ke,2)===Tc?(i=Tc,ke+=2):(i=sb,0===qe&&d(Uc)),qe--,i===sb?h=Nc:(ke=h,h=vb),h!==sb?(a.length>ke?(i=a.charAt(ke),ke++):(i=sb,0===qe&&d(Qc)),i!==sb?(h=[h,i],g=h):(ke=g,g=vb)):(ke=g,g=vb),g!==sb)for(;g!==sb;)f.push(g),g=ke,h=ke,qe++,a.substr(ke,2)===Tc?(i=Tc,ke+=2):(i=sb,0===qe&&d(Uc)),qe--,i===sb?h=Nc:(ke=h,h=vb),h!==sb?(a.length>ke?(i=a.charAt(ke),ke++):(i=sb,0===qe&&d(Qc)),i!==sb?(h=[h,i],g=h):(ke=g,g=vb)):(ke=g,g=vb);else f=vb;f!==sb&&(f=a.substring(e,ke)),e=f,e!==sb?(a.substr(ke,2)===Tc?(f=Tc,ke+=2):(f=sb,0===qe&&d(Uc)),f!==sb?(g=kb(),g!==sb?(le=b,c=Wc(e),b=c):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)}else ke=b,b=vb;return re[k]={nextPos:ke,result:b},b}function O(){var b,c,e,f,g,h,i=63*ke+35,j=re[i];return j?(ke=j.nextPos,j.result):(b=ke,c=ab(),c!==sb?(e=mb(),e===sb&&(e=wb),e!==sb?(58===a.charCodeAt(ke)?(f=Vb,ke++):(f=sb,0===qe&&d(Wb)),f!==sb?(g=mb(),g===sb&&(g=wb),g!==sb?(h=P(),h!==sb?(le=b,c=Xc(c,h),b=c):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb),re[i]={nextPos:ke,result:b},b)}function P(){var a,b=63*ke+36,c=re[b];return c?(ke=c.nextPos,c.result):(a=Q(),a===sb&&(a=R(),a===sb&&(a=V(),a===sb&&(a=U(),a===sb&&(a=W(),a===sb&&(a=X(),a===sb&&(a=Y(),a===sb&&(a=S()))))))),re[b]={nextPos:ke,result:a},a)}function Q(){var b,c,e,f,g,h,i,j,k=63*ke+37,l=re[k];if(l)return ke=l.nextPos,l.result;if(b=ke,c=ke,e=ke,Yc.test(a.charAt(ke))?(f=a.charAt(ke),ke++):(f=sb,0===qe&&d(Zc)),f!==sb){for(g=[],h=ke,$c.test(a.charAt(ke))?(i=a.charAt(ke),ke++):(i=sb,0===qe&&d(_c)),i!==sb?(Yc.test(a.charAt(ke))?(j=a.charAt(ke),ke++):(j=sb,0===qe&&d(Zc)),j!==sb?(i=[i,j],h=i):(ke=h,h=vb)):(ke=h,h=vb),h===sb&&(h=ke,i=ke,qe++,Yc.test(a.charAt(ke))?(j=a.charAt(ke),ke++):(j=sb,0===qe&&d(Zc)),qe--,j===sb?i=Nc:(ke=i,i=vb),i!==sb?(a.length>ke?(j=a.charAt(ke),ke++):(j=sb,0===qe&&d(Qc)),j!==sb?(i=[i,j],h=i):(ke=h,h=vb)):(ke=h,h=vb));h!==sb;)g.push(h),h=ke,$c.test(a.charAt(ke))?(i=a.charAt(ke),ke++):(i=sb,0===qe&&d(_c)),i!==sb?(Yc.test(a.charAt(ke))?(j=a.charAt(ke),ke++):(j=sb,0===qe&&d(Zc)),j!==sb?(i=[i,j],h=i):(ke=h,h=vb)):(ke=h,h=vb),h===sb&&(h=ke,i=ke,qe++,Yc.test(a.charAt(ke))?(j=a.charAt(ke),ke++):(j=sb,0===qe&&d(Zc)),qe--,j===sb?i=Nc:(ke=i,i=vb),i!==sb?(a.length>ke?(j=a.charAt(ke),ke++):(j=sb,0===qe&&d(Qc)),j!==sb?(i=[i,j],h=i):(ke=h,h=vb)):(ke=h,h=vb));g!==sb?(Yc.test(a.charAt(ke))?(h=a.charAt(ke),ke++):(h=sb,0===qe&&d(Zc)),h!==sb?(f=[f,g,h],e=f):(ke=e,e=vb)):(ke=e,e=vb)}else ke=e,e=vb;return e!==sb&&(e=a.substring(c,ke)),c=e,c!==sb&&(le=b,c=ad(c)),b=c,re[k]={nextPos:ke,result:b},b}function R(){var b,c,e,f,g=63*ke+38,h=re[g];return h?(ke=h.nextPos,h.result):(b=ke,c=U(),c!==sb?(a.substr(ke,2)===bd?(e=bd,ke+=2):(e=sb,0===qe&&d(cd)),e!==sb?(f=U(),f!==sb?(le=b,c=dd(c,f),b=c):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb),b===sb&&(b=ke,c=U(),c!==sb?(a.substr(ke,3)===ed?(e=ed,ke+=3):(e=sb,0===qe&&d(fd)),e!==sb?(f=U(),f!==sb?(le=b,c=gd(c,f),b=c):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb),b===sb&&(b=ke,c=U(),c!==sb?(a.substr(ke,2)===bd?(e=bd,ke+=2):(e=sb,0===qe&&d(cd)),e!==sb?(f=kb(),f!==sb?(le=b,c=hd(c),b=c):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb))),re[g]={nextPos:ke,result:b},b)}function S(){var b,c,e,f,g=63*ke+39,h=re[g];return h?(ke=h.nextPos,h.result):(b=ke,38===a.charCodeAt(ke)?(c=id,ke++):(c=sb,0===qe&&d(jd)),c!==sb?(e=ke,f=T(),f!==sb&&(f=a.substring(e,ke)),e=f,e!==sb?(le=b,c=kd(e),b=c):(ke=b,b=vb)):(ke=b,b=vb),re[g]={nextPos:ke,result:b},b)}function T(){var b,c,e,f,g,h,i,j,k,l=63*ke+40,m=re[l];if(m)return ke=m.nextPos,m.result;if(b=ke,c=ke,e=ke,ld.test(a.charAt(ke))?(f=a.charAt(ke),ke++):(f=sb,0===qe&&d(md)),f!==sb){for(g=[],nd.test(a.charAt(ke))?(h=a.charAt(ke),ke++):(h=sb,0===qe&&d(od));h!==sb;)g.push(h),nd.test(a.charAt(ke))?(h=a.charAt(ke),ke++):(h=sb,0===qe&&d(od));if(g!==sb){for(h=[],i=ke,46===a.charCodeAt(ke)?(j=xc,ke++):(j=sb,0===qe&&d(yc)),j!==sb?(k=T(),k!==sb?(j=[j,k],i=j):(ke=i,i=vb)):(ke=i,i=vb);i!==sb;)h.push(i),i=ke,46===a.charCodeAt(ke)?(j=xc,ke++):(j=sb,0===qe&&d(yc)),j!==sb?(k=T(),k!==sb?(j=[j,k],i=j):(ke=i,i=vb)):(ke=i,i=vb);h!==sb?(f=[f,g,h],e=f):(ke=e,e=vb)}else ke=e,e=vb}else ke=e,e=vb;return e!==sb&&(e=a.substring(c,ke)),c=e,c!==sb&&(le=b,c=pd(c)),b=c,re[l]={nextPos:ke,result:b},b}function U(){var b,c,e,f,g,h,i=63*ke+41,j=re[i];if(j)return ke=j.nextPos,j.result;if(b=ke,c=ke,e=ke,qd.test(a.charAt(ke))?(f=a.charAt(ke),ke++):(f=sb,0===qe&&d(rd)),f!==sb){for(g=[],sd.test(a.charAt(ke))?(h=a.charAt(ke),ke++):(h=sb,0===qe&&d(td));h!==sb;)g.push(h),sd.test(a.charAt(ke))?(h=a.charAt(ke),ke++):(h=sb,0===qe&&d(td));g!==sb?(f=[f,g],e=f):(ke=e,e=vb)}else ke=e,e=vb;return e===sb&&(ud.test(a.charAt(ke))?(e=a.charAt(ke),ke++):(e=sb,0===qe&&d(vd)),e===sb&&(e=ke,wd.test(a.charAt(ke))?(f=a.charAt(ke),ke++):(f=sb,0===qe&&d(xd)),f!==sb?(g=U(),g!==sb?(f=[f,g],e=f):(ke=e,e=vb)):(ke=e,e=vb))),e!==sb&&(e=a.substring(c,ke)),c=e,c!==sb&&(le=b,c=yd(c)),b=c,re[i]={nextPos:ke,result:b},b}function V(){var b,c,e,f,g,h,i,j=63*ke+42,k=re[j];if(k)return ke=k.nextPos,k.result;if(b=ke,c=ke,e=ke,f=U(),f===sb&&(f=wb),f!==sb)if(46===a.charCodeAt(ke)?(g=xc,ke++):(g=sb,0===qe&&d(yc)),g!==sb){if(h=[],sd.test(a.charAt(ke))?(i=a.charAt(ke),ke++):(i=sb,0===qe&&d(td)),i!==sb)for(;i!==sb;)h.push(i),sd.test(a.charAt(ke))?(i=a.charAt(ke),ke++):(i=sb,0===qe&&d(td));else h=vb;h!==sb?(f=[f,g,h],e=f):(ke=e,e=vb)}else ke=e,e=vb;else ke=e,e=vb;return e!==sb&&(e=a.substring(c,ke)),c=e,c!==sb&&(le=b,c=zd(c)),b=c,re[j]={nextPos:ke,result:b},b}function W(){var b,c,e=63*ke+43,f=re[e];return f?(ke=f.nextPos,f.result):(b=ke,a.substr(ke,4)===Ad?(c=Ad,ke+=4):(c=sb,0===qe&&d(Bd)),c!==sb&&(le=b,c=Cd()),b=c,b===sb&&(b=ke,a.substr(ke,5)===Dd?(c=Dd,ke+=5):(c=sb,0===qe&&d(Ed)),c!==sb&&(le=b,c=Fd()),b=c),re[e]={nextPos:ke,result:b},b)}function X(){var b,c,e,f,g,h,i,j,k=63*ke+44,l=re[k];if(l)return ke=l.nextPos,l.result;if(b=ke,91===a.charCodeAt(ke)?(c=mc,ke++):(c=sb,0===qe&&d(nc)),c!==sb)if(e=kb(),e!==sb)if(f=P(),f!==sb){for(g=[],h=ke,i=jb(),i!==sb?(j=P(),j!==sb?(i=[i,j],h=i):(ke=h,h=vb)):(ke=h,h=vb);h!==sb;)g.push(h),h=ke,i=jb(),i!==sb?(j=P(),j!==sb?(i=[i,j],h=i):(ke=h,h=vb)):(ke=h,h=vb);g!==sb?(h=kb(),h!==sb?(93===a.charCodeAt(ke)?(i=oc,ke++):(i=sb,0===qe&&d(pc)),i!==sb?(le=b,c=yb(f,g),b=c):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)}else ke=b,b=vb;else ke=b,b=vb;else ke=b,b=vb;return b===sb&&(b=ke,91===a.charCodeAt(ke)?(c=mc,ke++):(c=sb,0===qe&&d(nc)),c!==sb?(e=kb(),e!==sb?(93===a.charCodeAt(ke)?(f=oc,ke++):(f=sb,0===qe&&d(pc)),f!==sb?(le=b,c=Gd(),b=c):(ke=b,b=vb)):(ke=b,b=vb)):(ke=b,b=vb)),re[k]={nextPos:ke,result:b},b
}function Y(){var b,c,e,f,g,h=63*ke+45,i=re[h];if(i)return ke=i.nextPos,i.result;if(b=ke,47===a.charCodeAt(ke)?(c=Hd,ke++):(c=sb,0===qe&&d(Id)),c!==sb){if(e=ke,f=[],Jd.test(a.charAt(ke))?(g=a.charAt(ke),ke++):(g=sb,0===qe&&d(Kd)),g!==sb)for(;g!==sb;)f.push(g),Jd.test(a.charAt(ke))?(g=a.charAt(ke),ke++):(g=sb,0===qe&&d(Kd));else f=vb;f!==sb&&(f=a.substring(e,ke)),e=f,e!==sb?(47===a.charCodeAt(ke)?(f=Hd,ke++):(f=sb,0===qe&&d(Id)),f!==sb?(le=b,c=Ld(e),b=c):(ke=b,b=vb)):(ke=b,b=vb)}else ke=b,b=vb;return re[h]={nextPos:ke,result:b},b}function Z(){var b,c,e,f=63*ke+46,g=re[f];if(g)return ke=g.nextPos,g.result;if(b=ke,c=[],Md.test(a.charAt(ke))?(e=a.charAt(ke),ke++):(e=sb,0===qe&&d(Nd)),e!==sb)for(;e!==sb;)c.push(e),Md.test(a.charAt(ke))?(e=a.charAt(ke),ke++):(e=sb,0===qe&&d(Nd));else c=vb;return c!==sb&&(c=a.substring(b,ke)),b=c,re[f]={nextPos:ke,result:b},b}function $(){var b,c,e,f,g,h=63*ke+47,i=re[h];if(i)return ke=i.nextPos,i.result;if(b=ke,c=ke,Md.test(a.charAt(ke))?(e=a.charAt(ke),ke++):(e=sb,0===qe&&d(Nd)),e!==sb){for(f=[],Od.test(a.charAt(ke))?(g=a.charAt(ke),ke++):(g=sb,0===qe&&d(Pd));g!==sb;)f.push(g),Od.test(a.charAt(ke))?(g=a.charAt(ke),ke++):(g=sb,0===qe&&d(Pd));f!==sb?(e=[e,f],c=e):(ke=c,c=vb)}else ke=c,c=vb;return c!==sb&&(c=a.substring(b,ke)),b=c,re[h]={nextPos:ke,result:b},b}function _(){var b,c,e,f,g,h=63*ke+48,i=re[h];if(i)return ke=i.nextPos,i.result;if(b=ke,c=ke,Md.test(a.charAt(ke))?(e=a.charAt(ke),ke++):(e=sb,0===qe&&d(Nd)),e!==sb){for(f=[],Qd.test(a.charAt(ke))?(g=a.charAt(ke),ke++):(g=sb,0===qe&&d(Rd));g!==sb;)f.push(g),Qd.test(a.charAt(ke))?(g=a.charAt(ke),ke++):(g=sb,0===qe&&d(Rd));f!==sb?(e=[e,f],c=e):(ke=c,c=vb)}else ke=c,c=vb;return c!==sb&&(c=a.substring(b,ke)),b=c,re[h]={nextPos:ke,result:b},b}function ab(){var b,c,e,f,g,h=63*ke+49,i=re[h];if(i)return ke=i.nextPos,i.result;if(b=ke,c=ke,Sd.test(a.charAt(ke))?(e=a.charAt(ke),ke++):(e=sb,0===qe&&d(Td)),e!==sb){for(f=[],Ud.test(a.charAt(ke))?(g=a.charAt(ke),ke++):(g=sb,0===qe&&d(Vd));g!==sb;)f.push(g),Ud.test(a.charAt(ke))?(g=a.charAt(ke),ke++):(g=sb,0===qe&&d(Vd));f!==sb?(e=[e,f],c=e):(ke=c,c=vb)}else ke=c,c=vb;return c!==sb&&(c=a.substring(b,ke)),b=c,re[h]={nextPos:ke,result:b},b}function bb(){var b,c,e,f,g,h,i=63*ke+50,j=re[i];if(j)return ke=j.nextPos,j.result;if(b=ke,c=ke,e=ke,f=cb(),f!==sb?(46===a.charCodeAt(ke)?(g=xc,ke++):(g=sb,0===qe&&d(yc)),g!==sb?(f=[f,g],e=f):(ke=e,e=vb)):(ke=e,e=vb),e===sb&&(e=wb),e!==sb)if(Wd.test(a.charAt(ke))?(f=a.charAt(ke),ke++):(f=sb,0===qe&&d(Xd)),f!==sb){for(g=[],Yd.test(a.charAt(ke))?(h=a.charAt(ke),ke++):(h=sb,0===qe&&d(Zd));h!==sb;)g.push(h),Yd.test(a.charAt(ke))?(h=a.charAt(ke),ke++):(h=sb,0===qe&&d(Zd));g!==sb?(e=[e,f,g],c=e):(ke=c,c=vb)}else ke=c,c=vb;else ke=c,c=vb;return c!==sb&&(c=a.substring(b,ke)),b=c,re[i]={nextPos:ke,result:b},b}function cb(){var b,c,e,f,g,h=63*ke+51,i=re[h];if(i)return ke=i.nextPos,i.result;if(b=ke,c=ke,Md.test(a.charAt(ke))?(e=a.charAt(ke),ke++):(e=sb,0===qe&&d(Nd)),e!==sb){for(f=[],Od.test(a.charAt(ke))?(g=a.charAt(ke),ke++):(g=sb,0===qe&&d(Pd));g!==sb;)f.push(g),Od.test(a.charAt(ke))?(g=a.charAt(ke),ke++):(g=sb,0===qe&&d(Pd));f!==sb?(e=[e,f],c=e):(ke=c,c=vb)}else ke=c,c=vb;return c!==sb&&(c=a.substring(b,ke)),b=c,re[h]={nextPos:ke,result:b},b}function db(){var b,c,e,f,g,h,i,j,k=63*ke+52,l=re[k];if(l)return ke=l.nextPos,l.result;if(b=ke,c=ke,e=bb(),e!==sb){if(f=[],g=ke,47===a.charCodeAt(ke)?(h=Hd,ke++):(h=sb,0===qe&&d(Id)),h!==sb){if(i=[],Ud.test(a.charAt(ke))?(j=a.charAt(ke),ke++):(j=sb,0===qe&&d(Vd)),j!==sb)for(;j!==sb;)i.push(j),Ud.test(a.charAt(ke))?(j=a.charAt(ke),ke++):(j=sb,0===qe&&d(Vd));else i=vb;i!==sb?(h=[h,i],g=h):(ke=g,g=vb)}else ke=g,g=vb;for(;g!==sb;)if(f.push(g),g=ke,47===a.charCodeAt(ke)?(h=Hd,ke++):(h=sb,0===qe&&d(Id)),h!==sb){if(i=[],Ud.test(a.charAt(ke))?(j=a.charAt(ke),ke++):(j=sb,0===qe&&d(Vd)),j!==sb)for(;j!==sb;)i.push(j),Ud.test(a.charAt(ke))?(j=a.charAt(ke),ke++):(j=sb,0===qe&&d(Vd));else i=vb;i!==sb?(h=[h,i],g=h):(ke=g,g=vb)}else ke=g,g=vb;f!==sb?(e=[e,f],c=e):(ke=c,c=vb)}else ke=c,c=vb;return c!==sb&&(c=a.substring(b,ke)),b=c,re[k]={nextPos:ke,result:b},b}function eb(){var b,c,e,f=63*ke+53,g=re[f];if(g)return ke=g.nextPos,g.result;if(b=ke,c=[],$d.test(a.charAt(ke))?(e=a.charAt(ke),ke++):(e=sb,0===qe&&d(_d)),e!==sb)for(;e!==sb;)c.push(e),$d.test(a.charAt(ke))?(e=a.charAt(ke),ke++):(e=sb,0===qe&&d(_d));else c=vb;return c!==sb&&(c=a.substring(b,ke)),b=c,re[f]={nextPos:ke,result:b},b}function fb(){var b,c,e,f,g,h=63*ke+54,i=re[h];if(i)return ke=i.nextPos,i.result;if(b=ke,c=[],e=ke,f=ke,qe++,ae.test(a.charAt(ke))?(g=a.charAt(ke),ke++):(g=sb,0===qe&&d(be)),qe--,g===sb?f=Nc:(ke=f,f=vb),f!==sb?(a.length>ke?(g=a.charAt(ke),ke++):(g=sb,0===qe&&d(Qc)),g!==sb?(f=[f,g],e=f):(ke=e,e=vb)):(ke=e,e=vb),e!==sb)for(;e!==sb;)c.push(e),e=ke,f=ke,qe++,ae.test(a.charAt(ke))?(g=a.charAt(ke),ke++):(g=sb,0===qe&&d(be)),qe--,g===sb?f=Nc:(ke=f,f=vb),f!==sb?(a.length>ke?(g=a.charAt(ke),ke++):(g=sb,0===qe&&d(Qc)),g!==sb?(f=[f,g],e=f):(ke=e,e=vb)):(ke=e,e=vb);else c=vb;return c!==sb&&(c=a.substring(b,ke)),b=c,re[h]={nextPos:ke,result:b},b}function gb(){var b,c,e,f,g,h=63*ke+55,i=re[h];return i?(ke=i.nextPos,i.result):(b=ke,c=ke,e=kb(),e!==sb?(a.substr(ke,3)===ed?(f=ed,ke+=3):(f=sb,0===qe&&d(fd)),f!==sb?(g=kb(),g!==sb?(e=[e,f,g],c=e):(ke=c,c=vb)):(ke=c,c=vb)):(ke=c,c=vb),c!==sb&&(c=a.substring(b,ke)),b=c,re[h]={nextPos:ke,result:b},b)}function hb(){var b,c,e,f,g,h=63*ke+56,i=re[h];return i?(ke=i.nextPos,i.result):(b=ke,c=ke,e=kb(),e!==sb?(124===a.charCodeAt(ke)?(f=Ic,ke++):(f=sb,0===qe&&d(Jc)),f!==sb?(g=kb(),g!==sb?(e=[e,f,g],c=e):(ke=c,c=vb)):(ke=c,c=vb)):(ke=c,c=vb),c!==sb&&(c=a.substring(b,ke)),b=c,re[h]={nextPos:ke,result:b},b)}function ib(){var b,c,e,f,g,h=63*ke+57,i=re[h];return i?(ke=i.nextPos,i.result):(b=ke,c=ke,e=kb(),e!==sb?(44===a.charCodeAt(ke)?(f=ce,ke++):(f=sb,0===qe&&d(de)),f!==sb?(g=kb(),g!==sb?(e=[e,f,g],c=e):(ke=c,c=vb)):(ke=c,c=vb)):(ke=c,c=vb),c!==sb&&(c=a.substring(b,ke)),b=c,re[h]={nextPos:ke,result:b},b)}function jb(){var b,c,d=63*ke+58,e=re[d];return e?(ke=e.nextPos,e.result):(b=ke,c=ib(),c===sb&&(c=kb()),c!==sb&&(c=a.substring(b,ke)),b=c,re[d]={nextPos:ke,result:b},b)}function kb(){var b,c,d,e=63*ke+59,f=re[e];if(f)return ke=f.nextPos,f.result;for(b=ke,c=[],d=mb(),d===sb&&(d=lb());d!==sb;)c.push(d),d=mb(),d===sb&&(d=lb());return c!==sb&&(c=a.substring(b,ke)),b=c,re[e]={nextPos:ke,result:b},b}function lb(){var b,c,e,f,g,h,i,j=63*ke+60,k=re[j];if(k)return ke=k.nextPos,k.result;if(b=ke,c=ke,35===a.charCodeAt(ke)?(e=ee,ke++):(e=sb,0===qe&&d(fe)),e!==sb){for(f=[],g=ke,h=ke,qe++,ge.test(a.charAt(ke))?(i=a.charAt(ke),ke++):(i=sb,0===qe&&d(he)),qe--,i===sb?h=Nc:(ke=h,h=vb),h!==sb?(a.length>ke?(i=a.charAt(ke),ke++):(i=sb,0===qe&&d(Qc)),i!==sb?(h=[h,i],g=h):(ke=g,g=vb)):(ke=g,g=vb);g!==sb;)f.push(g),g=ke,h=ke,qe++,ge.test(a.charAt(ke))?(i=a.charAt(ke),ke++):(i=sb,0===qe&&d(he)),qe--,i===sb?h=Nc:(ke=h,h=vb),h!==sb?(a.length>ke?(i=a.charAt(ke),ke++):(i=sb,0===qe&&d(Qc)),i!==sb?(h=[h,i],g=h):(ke=g,g=vb)):(ke=g,g=vb);f!==sb?(ge.test(a.charAt(ke))?(g=a.charAt(ke),ke++):(g=sb,0===qe&&d(he)),g===sb&&(g=wb),g!==sb?(e=[e,f,g],c=e):(ke=c,c=vb)):(ke=c,c=vb)}else ke=c,c=vb;return c!==sb&&(c=a.substring(b,ke)),b=c,re[j]={nextPos:ke,result:b},b}function mb(){var b,c,e,f=63*ke+61,g=re[f];if(g)return ke=g.nextPos,g.result;if(b=ke,c=[],ie.test(a.charAt(ke))?(e=a.charAt(ke),ke++):(e=sb,0===qe&&d(je)),e!==sb)for(;e!==sb;)c.push(e),ie.test(a.charAt(ke))?(e=a.charAt(ke),ke++):(e=sb,0===qe&&d(je));else c=vb;return c!==sb&&(c=a.substring(b,ke)),b=c,re[f]={nextPos:ke,result:b},b}function nb(){var b,c,e,f=63*ke+62,g=re[f];return g?(ke=g.nextPos,g.result):(b=ke,c=ke,qe++,a.length>ke?(e=a.charAt(ke),ke++):(e=sb,0===qe&&d(Qc)),qe--,e===sb?c=Nc:(ke=c,c=vb),c!==sb&&(c=a.substring(b,ke)),b=c,re[f]={nextPos:ke,result:b},b)}function ob(a,b){for(var c=a?[a]:[],d=0;d<b.length;d++)c[d+1]=b[d][b[d].length-1];return c}function pb(a,b){return b&&(a.metadata=b),a}var qb,rb=arguments.length>1?arguments[1]:{},sb={},tb={system:f,type:k,heading:u,attribute:v,contract:E,constraint:n,literal:P,metadata:N,lambda_expr:J,type_def:j,import_def:h},ub=f,vb=sb,wb=null,xb=function(a,b,c,d){var e={types:b};return a&&a.length>0&&(e.imports=a),d&&(d={name:"Main",type:d},c&&(d.metadata=c),e.types.push(d)),e},yb=function(a,b){return ob(a,b)},zb="@import",Ab={type:"literal",value:"@import",description:'"@import"'},Bb="as",Cb={type:"literal",value:"as",description:'"as"'},Db=function(a,b){return{qualifier:b,from:a}},Eb=function(a){return{from:a}},Fb="=",Gb={type:"literal",value:"=",description:'"="'},Hb=function(a,b,c){return pb({name:b,type:c},a)},Ib=function(a,b,c){var d=ob(b,c);return{union:pb({candidates:d})}},Jb=function(a,b,c){return{sub:pb({superType:b,constraints:c},a)}},Kb="(",Lb={type:"literal",value:"(",description:'"("'},Mb=")",Nb={type:"literal",value:")",description:'")"'},Ob=function(a,b){for(var c=0;c<b.length;c++)b[c].native=[a,b[c].native];return b},Pb="::",Qb={type:"literal",value:"::",description:'"::"'},Rb=function(a){return[{regexp:a}]},Sb=function(a){return[{range:a}]},Tb=function(a){return[{"function":a}]},Ub=function(a){return[a]},Vb=":",Wb={type:"literal",value:":",description:'":"'},Xb=function(a,b,c){return pb({name:b,"native":c.trim()},a)},Yb=function(a){return{"native":a.trim()}},Zb="{",$b={type:"literal",value:"{",description:'"{"'},_b="}",ac={type:"literal",value:"}",description:'"}"'},bc=function(a,b){return{tuple:pb({heading:b},a)}},cc="{{",dc={type:"literal",value:"{{",description:'"{{"'},ec="}}",fc={type:"literal",value:"}}",description:'"}}"'},gc=function(a,b){return{relation:pb({heading:b},a)}},hc=function(a,b,c){var d=ob(a,b),e={attributes:d};return c&&(e.options={allowExtra:!0}),e},ic="?",jc={type:"literal",value:"?",description:'"?"'},kc=function(a,b,c,d){var e={name:b,type:d};return c&&(e.required=!1),pb(e,a)},lc=function(a,b){return{set:pb({elmType:b},a)}},mc="[",nc={type:"literal",value:"[",description:'"["'},oc="]",pc={type:"literal",value:"]",description:'"]"'},qc=function(a,b){return{seq:pb({elmType:b},a)}},rc="<",sc={type:"literal",value:"<",description:'"<"'},tc=">",uc={type:"literal",value:">",description:'">"'},vc=function(a,b,c){var d=ob(b,c);return{struct:pb({componentTypes:d},a)}},wc=function(a,b){a||(a={});for(var c,d=[],e=0;e<b.length;e++)c=b[e],c.external||c.explicit||(a.jsType?c.internal=a.jsType:c.identity={}),d[e]=c;return a.contracts=d,{adt:a}},xc=".",yc={type:"literal",value:".",description:'"."'},zc=function(a,b){var c={};return b&&(c.jsType=b[1]),pb(c,a)},Ac="\\",Bc={type:"literal",value:"\\",description:'"\\\\"'},Cc=function(a,b,c){return a.explicit={dress:b,undress:c},a},Dc=function(a,b){return a.external=b,a},Ec=function(a,b,c){return pb({name:b,infoType:c},a)},Fc=function(a){return{any:pb({},a)}},Gc=function(a,b){return{builtin:pb({jsType:b},a)}},Hc=function(a){return{ref:{typeName:a}}},Ic="|",Jc={type:"literal",value:"|",description:'"|"'},Kc=function(a,b){return[a.trim(),b.trim()]},Lc="()",Mc={type:"literal",value:"()",description:'"()"'},Nc=void 0,Oc=/^[(,)]/,Pc={type:"class",value:"[(,)]",description:"[(,)]"},Qc={type:"any",description:"any character"},Rc="/-",Sc={type:"literal",value:"/-",description:'"/-"'},Tc="-/",Uc={type:"literal",value:"-/",description:'"-/"'},Vc=function(a,b){for(var c=ob(a,b),d={},e=0;e<c.length;e++)d[c[e][0]]=c[e][1];return d},Wc=function(a){return{description:a.toString().trim()}},Xc=function(a,b){return[a,b]},Yc=/^["]/,Zc={type:"class",value:'["]',description:'["]'},$c=/^[\\]/,_c={type:"class",value:"[\\\\]",description:"[\\\\]"},ad=function(a){return a.substring(1,a.length-1).replace(/\\"/,'"')},bd="..",cd={type:"literal",value:"..",description:'".."'},dd=function(a,b){return{min:a,min_inclusive:!0,max:b,max_inclusive:!0}},ed="...",fd={type:"literal",value:"...",description:'"..."'},gd=function(a,b){return{min:a,min_inclusive:!0,max:b,max_inclusive:!1}},hd=function(a){return{min:a,min_inclusive:!0}},id="&",jd={type:"literal",value:"&",description:'"&"'},kd=function(a){return{"function":a}},ld=/^[a-zA-Z_$]/,md={type:"class",value:"[a-zA-Z_$]",description:"[a-zA-Z_$]"},nd=/^[a-zA-Z0-9_$]/,od={type:"class",value:"[a-zA-Z0-9_$]",description:"[a-zA-Z0-9_$]"},pd=function(a){return a},qd=/^[1-9]/,rd={type:"class",value:"[1-9]",description:"[1-9]"},sd=/^[0-9]/,td={type:"class",value:"[0-9]",description:"[0-9]"},ud=/^[0]/,vd={type:"class",value:"[0]",description:"[0]"},wd=/^[\-]/,xd={type:"class",value:"[\\-]",description:"[\\-]"},yd=function(a){return parseInt(a)},zd=function(a){return parseFloat(a)},Ad="true",Bd={type:"literal",value:"true",description:'"true"'},Cd=function(){return!0},Dd="false",Ed={type:"literal",value:"false",description:'"false"'},Fd=function(){return!1},Gd=function(){return[]},Hd="/",Id={type:"literal",value:"/",description:'"/"'},Jd=/^[^\/]/,Kd={type:"class",value:"[^\\/]",description:"[^\\/]"},Ld=function(a){return a},Md=/^[a-z]/,Nd={type:"class",value:"[a-z]",description:"[a-z]"},Od=/^[a-z0-9]/,Pd={type:"class",value:"[a-z0-9]",description:"[a-z0-9]"},Qd=/^[a-zA-Z_]/,Rd={type:"class",value:"[a-zA-Z_]",description:"[a-zA-Z_]"},Sd=/^[a-z$_]/,Td={type:"class",value:"[a-z$_]",description:"[a-z$_]"},Ud=/^[a-zA-Z0-9_]/,Vd={type:"class",value:"[a-zA-Z0-9_]",description:"[a-zA-Z0-9_]"},Wd=/^[A-Z]/,Xd={type:"class",value:"[A-Z]",description:"[A-Z]"},Yd=/^[a-zA-Z:]/,Zd={type:"class",value:"[a-zA-Z:]",description:"[a-zA-Z:]"},$d=/^[a-zA-Z0-9:.]/,_d={type:"class",value:"[a-zA-Z0-9:.]",description:"[a-zA-Z0-9:.]"},ae=/^[ \n\t]/,be={type:"class",value:"[ \\n\\t]",description:"[ \\n\\t]"},ce=",",de={type:"literal",value:",",description:'","'},ee="#",fe={type:"literal",value:"#",description:'"#"'},ge=/^[\n]/,he={type:"class",value:"[\\n]",description:"[\\n]"},ie=/^[ \t\n]/,je={type:"class",value:"[ \\t\\n]",description:"[ \\t\\n]"},ke=0,le=0,me=0,ne={line:1,column:1,seenCR:!1},oe=0,pe=[],qe=0,re={};if("startRule"in rb){if(!(rb.startRule in tb))throw new Error("Can't start parsing from rule \""+rb.startRule+'".');ub=tb[rb.startRule]}if(qb=ub(),qb!==sb&&ke===a.length)return qb;throw qb!==sb&&ke<a.length&&d({type:"end",description:"end of input"}),e(null,pe,oe)}return a(b,Error),{SyntaxError:b,parse:c}}()},{}],11:[function(a,b){(function(c){b.exports=function(){var b=(a("./stdlib/data"),function(a,b){return function(c,d){for(var e=0;e<a.length;e++)if(!a[e](c,d))return null;return b(c,d)}}),d=function(a,b,c){try{var f=a+(b||"");return e.statSync(f),[f,b||f.match(/(\.[a-z]{3,4})$/)[1]]}catch(g){if(0==c.length)throw new Error("No such file: `"+a+"`");return d(a,c[0],c.slice(1))}},e=a("fs"),f=b([function(){return!!e}],function(a,b){var c=a.match(/^file:\/\/(.*?)$/);if(!c)return null;var f=d(c[1],null,[".fio",".json"]),g=f[0],h=f[1],i=e.readFileSync(g).toString(),j=null;switch(h){case".fio":j=b.Finitio.parse(i);break;case".json":j=JSON.parse(i);break;default:throw new Error("Unrecognized extension: `"+h+"`")}return[a,j]}),g=b([],function(a,b){var c=a.match(/^(\.\/)|^(\.\.\/)/);if(!c)return null;var d=b.sourceUrl;if(!d)throw new Error("Unable to resolve relative path: `"+a+"`");return d=d.replace(/\/[^\/]+$/,""),c[2]&&(d=d.replace(/\/[^\/]+$/,"")),d=d+"/"+a.slice(c[0].length),b.importResolver(d,b,{raw:!0})}),h=b([function(){return!!c}],function(b,c){var d=b.match(/^finitio\/(.*)$/);if(!d)return null;var e=d[1];try{return a("./stdlib/"+e)(c,{raw:!0})}catch(f){throw new Error("No such stdlib system: `"+b+"`",f)}}),i=function(a,b,c){for(var d,e,f=Object.keys(i),g=0;g<f.length;g++)if(d=i[f[g]],e=d(a,b)){if(c&&c.raw)return e;var h=b.Finitio.world(b,{sourceUrl:e[0]});return b.Finitio.system(e[1],h)}throw new Error("Unable to resolve: `"+a+"`")};return i.File=f,i.StdLib=h,i.Relative=g,i}()}).call(this,"/finitio")},{"./stdlib/data":12,fs:38}],12:[function(a,b){b.exports=function(){var b={"http://finitio.io/0.4/stdlib/data":{types:[{name:"Any",type:{any:{}},metadata:{description:"Recognizes everything"}},{name:"Nil",type:{sub:{superType:{any:{}},constraints:[{"native":["v","v === null"]}]}},metadata:{description:"Recognizes JavaScript's null"}},{name:"Boolean",type:{builtin:{jsType:"Boolean"}},metadata:{description:"Recognizes true and false"}},{name:"True",type:{sub:{superType:{builtin:{jsType:"Boolean"}},constraints:[{"native":["b","b === true"]}]}},metadata:{description:"Only true"}},{name:"False",type:{sub:{superType:{builtin:{jsType:"Boolean"}},constraints:[{"native":["b","b === false"]}]}},metadata:{description:"Only false"}},{name:"Numeric",type:{builtin:{jsType:"Number"}},metadata:{description:"Recognizes any number"}},{name:"Real",type:{sub:{superType:{builtin:{jsType:"Number"}},constraints:[{"native":["n","(n===0.0) || !(n % 1 === 0)"]}]}},metadata:{description:"Recognizes only real numbers"}},{name:"Integer",type:{sub:{superType:{builtin:{jsType:"Number"}},constraints:[{"native":["n","n % 1 === 0"]}]}},metadata:{description:"Recognizes only integer numbers"}},{name:"String",type:{builtin:{jsType:"String"}},metadata:{description:"Recognizes every string"}},{name:"Date",type:{adt:{jsType:"Date",contracts:[{name:"iso8601",infoType:{builtin:{jsType:"String"}},external:"Finitio.Contracts.Date.iso8601"},{name:"milliseconds",infoType:{builtin:{jsType:"Number"}},external:"Finitio.Contracts.Date.milliseconds"}]}},metadata:{description:"Recognizes valid dates"}},{name:"Time",type:{adt:{jsType:"Date",contracts:[{name:"iso8601",infoType:{builtin:{jsType:"String"}},external:"Finitio.Contracts.Time.iso8601"},{name:"milliseconds",infoType:{builtin:{jsType:"Number"}},external:"Finitio.Contracts.Time.milliseconds"}]}},metadata:{description:"Recognizes valid times"}}]}},c=function(a){return function(c,d,e){var f=b[c];if(f)return e&&e.raw?[c,f]:d.Finitio.system(f,d);if(a)return a(c,d,e);throw new Error("Unable to resolve: `"+c+"`")}};return function(b,d){return b||(b=a("finitio.js").World),b=b.Finitio.world(b,{importResolver:c(b.importResolver)}),b.importResolver("http://finitio.io/0.4/stdlib/data",b,d)}}()},{}],13:[function(a,b){(function(){var c,d,e,f;c=a("./utils"),e=a("./ic").ObjectType,f=a("../type"),d=function(){function a(a,b,d,e){this.name=a,this.type=b,this.required=d,this.metadata=e,"string"!=typeof this.name&&c.argumentError("String expected for attribute name, got:",this.name),this.type instanceof f||c.argumentError("Type expected for attribute domain, got:",this.type),null==this.required&&(this.required=!0),"boolean"!=typeof this.required&&c.argumentError("Boolean expected for required, got:",this.required)}return e(a,["name","type","required","metadata"]),a.prototype.fetchType=function(){return this.type},a.prototype.fetchOn=function(a,b){if("object"!=typeof a&&c.argumentError("Object expected, got:",a),null==a[this.name]){if(null!=b)return b();throw new Error("Key `"+this.name+"` not found")}return a[this.name]},a.prototype.isSuperAttributeOf=function(a){return this===a||this.name===a.name&&(!this.required||a.required)&&this.type.isSuperTypeOf(a.type)},a.prototype.equals=function(b){return this===b||b instanceof a&&this.name===b.name&&this.required===b.required&&this.type.equals(b.type)},a.prototype.low=function(){return new a(this.name,this.type.low(),this.required)},a.prototype.resolveProxies=function(a){return this.type.resolveProxies(a)},a.prototype.toString=function(){return this.required?""+this.name+" : "+this.type:""+this.name+" :? "+this.type},a}(),b.exports=d}).call(this)},{"../type":25,"./ic":20,"./utils":23}],14:[function(a,b){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("./utils"),e=a("../type"),d=function(a){function b(a,d,f){this.elmType=a,this.name=d,this.metadata=f,this.elmType instanceof e||c.argumentError("Finitio.Type expected, got:",this.elmType),b.__super__.constructor.call(this,this.name,this.metadata)}return g(b,a),b.prototype._equals=function(a){return this===a||a instanceof this.constructor&&this.elmType.equals(a.elmType)||b.__super__._equals.apply(this,arguments)},b.prototype._isSuperTypeOf=function(a){return this===a||a instanceof this.constructor&&this.elmType.isSuperTypeOf(a.elmType)||b.__super__._isSuperTypeOf.apply(this,arguments)},b.prototype._undress=function(a,b){var d,e;return d=this.elmType,e=b.elmType,e.isSuperTypeOf(d)?a:c.map(a,function(a){return d.undress(a,e)})},b}(e),b.exports=d}).call(this)},{"../type":25,"./utils":23}],15:[function(a,b){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=a("./utils"),d=a("./ic").AbstractType,e=function(){function a(a,b,d){this.name=a,this["native"]=b,this.metadata=d,null!=this.name&&"string"!=typeof this.name&&c.argumentError("String expected for constraint name, got: ",this.name)}return a.prototype.isAnonymous=function(){return null==this.name},a.prototype.accept=function(){throw new Error("Constraint is an abstract class")},a.prototype.equals=function(b){return this===b||b instanceof a&&this["native"]===b["native"]},a.prototype.toString=function(){var a;return a=this.nativeToString(),this.isAnonymous()||(a=this.name+": "+a),a},a.prototype.nativeToString=function(){return this["native"].toString()},a}(),e.Native=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.kind="native",b.prototype.accept=function(a){return this["native"](a)},b.prototype.nativeToString=function(){return this["native"].finitioSourceCode||"..."},b}(e),e.Regexp=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.kind="regexp",b.prototype.accept=function(a){return this["native"].test(a)},b}(e),e.Range=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.kind="range",b.prototype.accept=function(a){return(this["native"].min_inclusive?a>=this["native"].min:a>this["native"].min)&&(void 0===this["native"].max||(this["native"].max_inclusive?a<=this["native"].max:a<this["native"].max))},b.prototype.equals=function(a){return this===a?!0:a instanceof e.Range?this["native"].min===a["native"].min&&this["native"].min_inclusive===a["native"].min_inclusive&&(void 0===this["native"].max&&void 0===a["native"].max||this["native"].max===a["native"].max&&this["native"].max_inclusive===a["native"].max_inclusive):!1},b.prototype.nativeToString=function(){return this["native"].max?this["native"].max_inclusive?""+this["native"].min+".."+this["native"].max:""+this["native"].min+"..."+this["native"].max:""+this["native"].min+".."},b}(e),d(e,[e.Native,e.Regexp,e.Range],["name","native","metadata"],1),b.exports=e}).call(this)},{"./ic":20,"./utils":23}],16:[function(a,b){(function(){var c,d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("./ic").AbstractType,c=a("./utils"),f=a("../type"),e=function(){function a(a,b,d,e){this.name=a,this.infoType=b,this["native"]=d,this.metadata=e,c.isString(this.name)||c.argumentError("String expected, got:",this.name),this.infoType instanceof f||c.argumentError("Finitio.Type expected, got:",this.infoType)}return a.prototype.fetchType=function(){return this.infoType},a.prototype.resolveProxies=function(a){return this.infoType.resolveProxies(a)},a.prototype.toString=function(){return"<"+this.name+"> "+this.infoType.toString()},a}(),e.Explicit=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.kind="explicit",b.prototype.dress=function(a,b){return this["native"].dress(a,b)},b.prototype.undress=function(a){return this["native"].undress(a)},b}(e),e.External=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.kind="external",b.prototype.dress=function(a,b){return this["native"].dress(a,b)},b.prototype.undress=function(a){return this["native"].undress(a)},b}(e),e.Internal=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.kind="internal",b.prototype.dress=function(a,b){return this["native"][this.name](a,b)},b.prototype.undress=function(a){return a["to"+c.capitalize(this.name)]()},b}(e),e.Identity=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.kind="identity",b.prototype.dress=function(a){return a},b.prototype.undress=function(a){return a},b}(e),d(e,[e.Explicit,e.External,e.Internal,e.Identity],["name","infoType","native","metadata"],2),b.exports=e}).call(this)},{"../type":25,"./ic":20,"./utils":23}],17:[function(a,b){(function(){var a,c;a=function(){function a(a,b,c){this.world=a,this.result=b,this.error=c}return a.prototype.success=function(b){return new a(this.world,b,void 0)},a.prototype.failure=function(b,c,d){return c={error:c},null!=d&&(c.children=d),new a(this.world,void 0,c)},a.prototype.find=function(a,b,d){var e,f,g,h,i,j;for(e=[],g=i=0,j=a.length;j>=0?j>i:i>j;g=j>=0?++i:--i){if(f=a[g],h=b(f,g),h.isSuccess())return h;null==h.error.location&&c(h.error,f,g),e.push(h.error)}return d(e)},a.prototype.refine=function(a,b,d,e){var f,g,h,i,j,k;if(a.isSuccess()){for(f=[],h=j=0,k=b.length;(k>=0?k>j:j>k)&&(g=b[h],i=d(a,g,h),!i.isFailure()||(null==i.error.location&&c(i.error,g,h),f.push(i.error),!this.isFailfast()));h=k>=0?++j:--j);return 0===f.length?a:e(f)}return e([a.error])},a.prototype.map=function(a,b,c){var d,e,f;return e=[],f=this.success(e),d=function(a,c,d){var f;return f=b(c,d),f.onSuccess(function(a){return e.push(a),f})},this.refine(f,a,d,c)},a.prototype.isFailfast=function(){return this.world&&this.world.failfast},a.prototype.isSuccess=function(){return void 0===this.error},a.prototype.isFailure=function(){return!this.isSuccess()},a.prototype.onSuccess=function(a){return this.isSuccess()?a(this.result):this},a.prototype.onFailure=function(a){return this.isSuccess()?this:a(this.error)},a}(),c=function(a,b,c){var d;return d=b.name,null==d&&(d=c),a.location=d},b.exports=a}).call(this)},{}],18:[function(a,b){(function(){var c;c=a("./utils"),b.exports=function(a,b,d,e){return null==d&&(d=b.slice(0,b.length-1)),null==e&&(e=function(a){return this[b][a]}),a.prototype.fetch=function(a,b){var c;if(c=e.bind(this)(a),null!=c)return c;if(null!=b)return b(this,a);throw new Error("No such "+d+" `"+a+"`")},a.prototype.fetchPath=function(a,b){var e;if(e=c.inject(a.split("/"),this,function(a,b){return a&&a.fetch&&a.fetch(b,function(){return null})}),null!=e)return e;if(null!=b)return b();throw new Error("No such "+d+" `"+a+"`")}}}).call(this)},{"./utils":23}],19:[function(a,b){(function(){var c,d,e,f,g;g=a("./ic").ObjectType,c=a("./utils"),e=a("./fetchable"),d=a("./attribute"),f=function(){function a(a,e){var f;this.attributes=a,this.options=e,c.isArray(this.attributes)&&c.every(this.attributes,function(a){return a instanceof d})||c.argumentError("Array of Attribute expected"),f={},c.each(this.attributes,function(){return function(a){return null!=f[a.name]&&c.argumentError("Attribute names must be unique"),f[a.name]=a}}(this)),null==this.options&&(this.options={}),c.isObject(this.options)||c.argumentError("Hash of options expected"),this.options=c.extend({},b,this.options)}var b,f;return g(a,["attributes","options"]),e(a,"attributes","attribute",function(a){return this.getAttr(a)}),b={allowExtra:!1},a.prototype.getAttr=function(a){return c.find(this.attributes,function(b){return b.name===a})},a.prototype.size=function(){return this.attributes.length},a.prototype.isEmpty=function(){return 0===this.size()},a.prototype.allowExtra=function(){return this.options.allowExtra},a.prototype.multi=function(){return this.options.allowExtra||c.any(this.attributes,function(a){return!a.required})},a.prototype.each=function(a){return c.each(this.attributes,a)},a.prototype.toString=function(){var a;return a=c.map(this.attributes,function(a){return a.toString()}).join(", "),this.allowExtra()&&(this.isEmpty()||(a+=", "),a+="..."),a},a.prototype.names=function(){return c.map(this.attributes,function(a){return a.name})},a.prototype.isSuperHeadingOf=function(b){var d,e,g,h;return this===b?!0:b instanceof a?(h=c.triSplit(f(this),f(b)),g=h[0],d=h[1],e=h[2],c.every(g,function(a){return a[0].isSuperAttributeOf(a[1])})&&c.every(d,function(a){return!a.required})&&(this.allowExtra()||!b.allowExtra())&&(this.allowExtra()||c.isEmpty(e))):!1},a.prototype.equals=function(b){return this===b||b instanceof a&&this.attributesEquals(b)&&this.optionsEquals(b)},a.prototype.attributesEquals=function(a){return this.attributes.length===a.attributes.length&&c.every(this.attributes,function(b){return b.equals(a.getAttr(b.name))})},a.prototype.optionsEquals=function(a){return c.size(this.options)===c.size(a.options)&&c.every(this.options,function(b,c){return b===a.options[c]})},a.prototype.low=function(){var b,d;return b=c.map(this.attributes,function(a){return a.low()}),d=this.options,new a(b,d)},f=function(a){var b;return b={},c.each(a.attributes,function(a){return b[a.name]=a}),b},a.prototype.resolveProxies=function(a){return c.each(this.attributes,function(b){return b.resolveProxies(a)})},a}(),b.exports=f}).call(this)},{"./attribute":13,"./fetchable":18,"./ic":20,"./utils":23}],20:[function(a,b){b.exports=function(){function b(a,b){var c=function(){};c.prototype=a.prototype;var d=new c,e=a.apply(d,b);return Object(e)===e?e:d}var c=a("./utils"),d={};return d.AbstractType=function(a,d,e,f){a.info=function(g){var h=c.find(d,function(a){return!!g[a.prototype.kind]});if(h){for(var i=[],j=0;j<e.length;j++){var k=j==f?h.prototype.kind:e[j],l=g[k];l&&(i[j]=l)}return b(h,i)}dump=JSON.stringify(g),c.argumentError("Unrecognized "+a.name+" info: ",dump)},a.prototype.toInfo=function(){for(var a={},b=0;b<e.length;b++){var c=b==f?this.kind:e[b],d=this[e[b]];void 0!=d&&(a[c]=d)}return a}},d.ObjectType=function(a,c,d){a.info=function(e,f){for(var g=[],h=0;h<c.length;h++){var i=e[c[h]];void 0!=i&&(g[h]=i)}var j=b(a,g);return d&&d(j,f),j},a.prototype.toInfo=function(){for(var a={},b=0;b<c.length;b++){var d=c[b],e=this[d];void 0!=e&&(a[d]=e)}return a}},d.TypeType=function(a,b,c){a.prototype.generator=b,d.ObjectType(a,c)},d}()},{"./utils":23}],21:[function(a,b){(function(){var c,d;d=a("../support/ic").ObjectType,c=function(){function a(a,b){this.from=a,this.qualifier=b}return d(a,["from","qualifier"],function(a,b){return a.system=b.importResolver(a.from,b)}),a}(),b.exports=c}).call(this)},{"../support/ic":20}],22:[function(a,b){b.exports=function(){var b=(a("../support/utils"),a("../support/attribute")),c=a("../support/heading"),d=a("../support/contract"),e=a("../support/constraint"),f=a("../support/import"),g=a("../contracts"),h=a("../type"),i=a("../type/ad_type"),j=a("../type/builtin_type"),l=a("../type/tuple_type"),m=a("../type/relation_type"),n=a("../type/union_type"),o=a("../type/seq_type"),p=a("../type/set_type"),q=a("../type/any_type"),r=a("../type/struct_type"),s=a("../type/sub_type"),t=a("../type/type_ref"),u=a("../type/type_def"),v=a("../system"),w={},x={Js:w};w.Object=j.info({jsType:Object}),w.String=j.info({jsType:String}),w.Boolean=j.info({jsType:Boolean}),w.Number=j.info({jsType:Number}),w.Type=i.info({jsType:Function,contracts:[d.info({name:"jsTypeName",infoType:w.String,explicit:{dress:function(a,b){return g.JsType.name.dress(a,b.JsTypes)},undress:g.JsType.name.undress}})]}),w.Empty=s.info({superType:q.info({}),constraints:[e.info({name:"default","native":function(a){if(null===a||void 0===a)return!1;for(k in a)return!1;return!0}})]}),w.FunctionDefn=o.info({elmType:w.String}),w.Function=i.info({jsType:Function,contracts:[d.info({name:"defn",infoType:w.FunctionDefn,external:g.Expression.defn})]}),w.RegExp=i.info({jsType:RegExp,contracts:[d.info({name:"src",infoType:w.String,explicit:{dress:function(a){return new RegExp(a)},undress:function(a){return a.source}}})]});var y=b.info({name:"metadata",type:w.Object,required:!1}),z=function(a,b,c,e){return i.info({jsType:b,contracts:[d.info({name:e,infoType:c,internal:b})]})
},A=function(a,b,d){d.push(y);var e=l.info({heading:c.info({attributes:d})}),f=z(a,b,e,"info");return f},B=[j.info({jsType:h})];x.Type=z("Type",h,n.info({candidates:B}),"factor"),x.Types=o.info({elmType:x.Type});var C=function(a,d,e){var f=l.info({heading:c.info({attributes:e.concat([y])})}),g=z(a,d,f,"info"),h=l.info({heading:c.info({attributes:[b.info({name:a.toLowerCase(),type:g})]})});return B.push(h),g};x.Attribute=A("Attribute",b,[b.info({name:"name",type:w.String}),b.info({name:"type",type:x.Type}),b.info({name:"required",type:w.Boolean,required:!1})]),x.Attributes=o.info({elmType:x.Attribute}),x.HeadingOptions=l.info({heading:c.info({attributes:[b.info({name:"allowExtra",type:w.Boolean})]})}),x.Heading=A("Heading",c,[b.info({name:"attributes",type:x.Attributes}),b.info({name:"options",type:x.HeadingOptions,required:!1})]),x.Contract=n.info({candidates:[],name:"Contract"}),x.Contracts=o.info({elmType:x.Contract});var D=function(a,c,e){var f=A(a,d,e.concat([b.info({name:"name",type:w.String}),b.info({name:"infoType",type:x.Type})]));return x.Contract.candidates.push(f),f};x.Contract.Explicit=D("Explicit",d.Explicit,[b.info({name:"explicit",type:l.info({heading:c.info({attributes:[b.info({name:"dress",type:w.Function}),b.info({name:"undress",type:w.Function})]})})})]),x.Contract.Internal=D("Internal",d.Internal,[b.info({name:"internal",type:w.Type})]),x.Contract.External=D("External",d.External,[b.info({name:"external",type:w.Type})]),x.Contract.Identity=D("Identity",d.Identity,[b.info({name:"identity",type:w.Empty})]),x.Constraint=n.info({candidates:[],name:"Constraint"}),x.Constraints=o.info({elmType:x.Constraint});var E=function(a,c,d){var f=A(a,e,d.concat([b.info({name:"name",type:w.String,required:!1})]));return x.Constraint.candidates.push(f),f};x.Constraint.Native=E("Native",e.Native,[b.info({name:"native",type:w.Function})]),x.Constraint.Regexp=E("RegExp",e.Regexp,[b.info({name:"regexp",type:w.RegExp})]),x.Range=n.info({candidates:[l.info({heading:c.info({attributes:[b.info({name:"min",type:w.Number}),b.info({name:"min_inclusive",type:w.Boolean}),b.info({name:"max",type:w.Number}),b.info({name:"max_inclusive",type:w.Boolean})]})}),l.info({heading:c.info({attributes:[b.info({name:"min",type:w.Number}),b.info({name:"min_inclusive",type:w.Boolean})]})})],name:"Range"}),x.Constraint.Range=E("Range",e.Range,[b.info({name:"range",type:x.Range})]),x.AnyType=C("Any",q,[]),x.AdType=C("Adt",i,[b.info({name:"jsType",type:w.Type,required:!1}),b.info({name:"contracts",type:x.Contracts})]),x.BuiltinType=C("Builtin",j,[b.info({name:"jsType",type:w.Type})]),x.SubType=C("Sub",s,[b.info({name:"superType",type:x.Type}),b.info({name:"constraints",type:x.Constraints})]),x.RelationType=C("Relation",m,[b.info({name:"heading",type:x.Heading})]),x.TupleType=C("Tuple",l,[b.info({name:"heading",type:x.Heading})]),x.SeqType=C("Seq",o,[b.info({name:"elmType",type:x.Type})]),x.SetType=C("Set",p,[b.info({name:"elmType",type:x.Type})]),x.StructType=C("Struct",r,[b.info({name:"componentTypes",type:x.Types})]),x.UnionType=C("Union",n,[b.info({name:"candidates",type:x.Types})]),x.TypeRef=C("Ref",t,[b.info({name:"typeName",type:w.String})]),x.TypeDef=A("TypeDef",u,[b.info({name:"name",type:w.String}),b.info({name:"type",type:x.Type})]),x.TypeDefs=o.info({elmType:x.TypeDef});var F=[b.info({name:"types",type:x.TypeDefs})];return x.System=A("System",v,F),x.Systems=o.info({elmType:x.System}),x.Import=A("Import",f,[b.info({name:"qualifier",type:w.String,required:!1}),b.info({name:"from",type:w.String})]),x.Imports=o.info({elmType:x.Import}),F.push(b.info({name:"imports",type:x.Imports,required:!1})),x}()},{"../contracts":4,"../support/attribute":13,"../support/constraint":15,"../support/contract":16,"../support/heading":19,"../support/import":21,"../support/utils":23,"../system":24,"../type":25,"../type/ad_type":26,"../type/any_type":27,"../type/builtin_type":28,"../type/relation_type":29,"../type/seq_type":30,"../type/set_type":31,"../type/struct_type":32,"../type/sub_type":33,"../type/tuple_type":34,"../type/type_def":35,"../type/type_ref":36,"../type/union_type":37}],23:[function(a,b){b.exports=function(){var b={};return b.isArray=function(a){return Array.isArray?Array.isArray(a):"[object Array]"==toString.call(a)},b.isBrowser=function(){return"object"==typeof window},b.isObject=function(a){return Object(a)===a},b.isString=function(a){return"[object String]"==Object.prototype.toString.call(a)},b.isFunction=function(a){return"[object Function]"==Object.prototype.toString.call(a)},b.deepClone=function(a){if((null===a||void 0===a)&&b.argumentError("Object expected, got",a),b.isObject(a)){if(a instanceof Function)return a;if(b.isArray(a))return a.slice();var c={};return b.each(a,function(a,d){c[d]=b.deepClone(a)}),c}return a},b.clone=function(a){return(null===a||void 0===a)&&b.argumentError("Object expected, got",a),b.isObject(a)?b.isArray(a)?a.slice():b.extend({},a):a},b.extend=function(a){var c=Array.prototype.slice.call(arguments,1);return b.each(c,function(b){if(b)for(var c in b)a[c]=b[c]}),a},b.triSplit=function(a,c){var d=null,e={},f={},g={},h=null;d=b.keys(a);for(var i=0;i<d.length;i++)h=d[i],void 0===c[h]?f[h]=a[h]:e[h]=[a[h],c[h]];for(d=b.keys(c),i=0;i<d.length;i++)h=d[i],void 0===e[h]&&(g[h]=c[h]);return[e,f,g]},b.zip=function(a){b.isArray(a)||b.argumentError("Array expected, got",a);var c=Array.prototype.slice.call(arguments,1);b.each(c,function(c){b.isArray(c)||b.argumentError("Array expected, got",c),b.size(c)!=b.size(a)&&b.argumentError("Source(s) and destination Arrays must have same size")});var d=b.map(a,function(a,d){var e=[];return e.push(a),b.each(c,function(a){e.push(a[d])}),e});return d},b.difference=function(a,c){return b.isArray(a)||b.argumentError("Array expected, got",a),b.isArray(c)||b.argumentError("Array expected, got",c),b.filter(a,function(a){return!b.contains(c,a)})},b.uniq=function(a,c){b.isArray(a)||b.argumentError("Array expected, got",a),"undefined"==typeof c&&(c=!1);for(var d=[],e=[],f=0,g=a.length;g>f;f++){var h=a[f];(c?f&&e===h:b.contains(e,h))||(c?e=h:e.push(h),d.push(a[f]))}return d},b.inject=function(a,c,d){a instanceof Array||b.argumentError("Array expected, got",a),res=c;for(var e=0;e<a.length;e++)res=d(res,a[e]);return res},b.isEnumerable=function(a){return void 0===a||null===a||a instanceof RegExp||a instanceof Date||"boolean"==typeof a?!1:!0},b.each=function(a,c){if(null===c)throw new Error("Function expected, got null");if(void 0===c&&(c=function(){}),!b.isEnumerable(a))throw new Error("Enumerable (Array, Object, String) expected, got "+a);if("string"==typeof a)return b.each(a.split(""),c);if(a instanceof Array)for(var d=0;d<a.length;d++)c(a[d],d);else for(var e in a)a.hasOwnProperty(e)&&c(a[e],e)},b.every=function(a,c){(null===c||void 0===c)&&b.argumentError("Function expected, got",c);try{b.each(a,function(a,b){var d=c(a,b);if(d!==!0)throw"fail"})}catch(d){if("fail"!=d)throw d;return!1}return!0},b.find=function(a,c){(null===c||void 0===c)&&b.argumentError("Function expected, got",c);try{b.each(a,function(a,b){var d=c(a,b);if(d)throw{found:a}})}catch(d){if("undefined"==typeof d.found)throw d;return d.found}return null},b.any=function(a,c){(null===c||void 0===c)&&b.argumentError("Function expected, got",c);try{b.each(a,function(a,b){var d=c(a,b);if(d===!0)throw"gotcha"})}catch(d){if("gotcha"!=d)throw d;return!0}return!1},b.filter=function(a,c){(null===c||void 0===c)&&b.argumentError("Function expected, got",c);var d=[];return b.each(a,function(a){c(a)&&d.push(a)}),d},b.reject=function(a,c){(null===c||void 0===c)&&b.argumentError("Function expected, got",c);var d=[];return b.each(a,function(a){c(a)||d.push(a)}),d},b.map=function(a,c){(null===c||void 0===c)&&b.argumentError("Function expected, got",c);var d=[];return b.each(a,function(a,b){d.push(c(a,b))}),d},b.values=function(a){if(a instanceof Array)return a;var c=[];return b.each(a,function(a){c.push(a)}),c},b.keys=function(a){var c=[];return b.each(a,function(a,b){c.push(b)}),c},b.size=function(a){var c=b.values(a);return c.length},b.isEmpty=function(a){return 0===b.size(a)},b.contains=b.include=function(a,c){b.isEnumerable(a)||b.argumentError("Enumerable (Array, Object, String) expected, got",a);var d=Array.prototype.indexOf;if(d&&a.indexOf===d)return-1!=a.indexOf(c);var e=b.find(a,function(a){return a===c});return null!=e},b.capitalize=function(a){if("string"!=typeof a&&b.argumentError("String expected, got",a),""===a.trim())return a;var c=a,d=null,e=null;if(-1!=c.indexOf("_")){for(d=c.split("_"),e=0;e<d.length;e++)d[e]=b.capitalize(d[e]);c=d.join("")}if(-1!=c.indexOf(" ")){for(d=c.split(" "),e=0;e<d.length;e++)d[e]=b.capitalize(d[e]);c=d.join("")}return c=c[0].toUpperCase()+c.slice(1)},b.toString=function(a){if(void 0===a)return"undefined";if(null===a)return"null";var b=a.toString();return"[object Object]"==b&&(b=JSON.stringify(a)),b.length>30&&(b=b.substring(0,30)+"..."),a instanceof Array&&(b="["+b+"]"),b},b.argumentError=function(){var a="",c=function(a){return null===a?"null":void 0===a?"undefined":a.toString()};throw b.each(arguments,function(b){0!==a.length&&(a+=" "),a+=c(b)}),new Error(a)},b.notImplemented=function(a,b){throw new Error(a.constructor.name+"#"+b)},b.dressError=function(b){var c=a("../errors").TypeError;throw new c(b)},b.undressError=function(a,b,c){throw new Error(a,b,c)},b}()},{"../errors":9}],24:[function(a,b){(function(){var c,d,e,f,g;e=a("./support/ic").ObjectType,c=a("./support/utils"),d=a("./support/fetchable"),g=a("./type"),f=function(){function a(a,b){this.imports=a,this.types=b,null==this.imports&&(this.imports=[]),null==this.types&&(this.types=[]),c.each(this.types,function(a){return function(b){return a[b.name]=b.trueOne()}}(this))}return e(a,["imports","types"],function(a){return c.each(a.types,function(b){return b.resolveProxies(a)})}),a.REF_RGX=/^(?:([a-z][a-z0-9]*)\.)?(.*?)$/,d(a,"types","type",function(a){return c.find(this.types,function(b){return b.name===a})}),a.prototype.resolve=function(b,d){var e,f;return e=b.match(a.REF_RGX),e[1]?this._resolveQualified(e,d):(f=c.filter(this.imports,function(a){return!a.qualifier}),this._resolveImported([{system:this}].concat(f),b,d))},a.prototype.dress=function(a,b){if(!this.Main)throw new Error("No main on System");return this.Main.dress(a,b)},a.prototype.undress=function(a){if(!this.Main)throw new Error("No main on System");return this.Main.undress(a,this.Main.low())},a.prototype.clone=function(){return new a(c.clone(this.imports),c.clone(this.types))},a.prototype._resolveQualified=function(a,b){var d,e;return null==b&&(b=this._onResolveFailure(a[0])),d=c.find(this.imports,function(b){return b.qualifier===a[1]}),(e=d&&d.system)?this._resolveSingle(e,a[2],b):this._onResolveFailure(a[0])()},a.prototype._resolveImported=function(a,b,c){return null==c&&(c=this._onResolveFailure(b)),a[0].system.fetchPath(b,function(d){return function(){return a.length>1?d._resolveImported(a.slice(1),b,c):c()}}(this))},a.prototype._resolveSingle=function(a,b,c){return a.fetchPath(b,c)},a.prototype._onResolveFailure=function(a){return function(){throw new Error("No such type `"+a+"`")}},a}(),b.exports=f}).call(this)},{"./support/fetchable":18,"./support/ic":20,"./support/utils":23,"./type":25}],25:[function(a,b){(function(){var c,d,e;c=a("./support/utils"),d=a("./support/dress_monad"),e=function(){function a(a){this.metadata=a}return a.factor=function(a){return a[Object.keys(a)[0]]},a.prototype.toFactor=function(){var a;return a={},a[this.generator]=this,a},a.prototype.include=function(a){return this._include(a)},a.prototype._include=function(){return c.notImplemented(this,"include")},a.prototype.dress=function(a,b){var e;return e=this.mDress(a,new d(b)),e.isSuccess()?e.result:c.dressError(e.error)},a.prototype.mDress=function(a,b){return this._mDress(a,b)},a.prototype._mDress=function(){return c.notImplemented(this,"_mDress")},a.prototype.undress=function(a,b){return this._undress(a,b.trueOne())},a.prototype._undress=function(a,b){return b.isSuperTypeOf(this)?a:b.include(a)?a:c.undressError("Unable to undress `"+a+"` from "+this+" to `"+b+"`")},a.prototype.isSuperTypeOf=function(a){return this._isSuperTypeOf(a.trueOne())},a.prototype._isSuperTypeOf=function(a){return this.equals(a)||a._isSubTypeOf(this)},a.prototype._isSubTypeOf=function(){return!1},a.prototype.fetchType=function(){return this},a.prototype.isFake=function(){return!1},a.prototype.trueOne=function(){return this},a.prototype.equals=function(b){return b instanceof a&&this._equals(b.trueOne())},a.prototype._equals=function(a){return this===a},a}(),b.exports=e}).call(this)},{"./support/dress_monad":17,"./support/utils":23}],26:[function(a,b){(function(){var c,d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};h=a("../support/ic").TypeType,c=a("../support/utils"),f=a("../support/fetchable"),e=a("../support/contract"),g=a("../type"),d=function(a){function b(a,d,f){this.jsType=a,this.contracts=d,this.metadata=f,!this.jsType||this.jsType instanceof Function||c.argumentError("Constructor (function) expected, got:",this.jsType),c.isArray(this.contracts)||c.argumentError("[Contract] expected, got:",this.contracts),c.every(this.contracts,function(a){return a instanceof e})||c.argumentError("[Contract] expected, got:",this.contracts),b.__super__.constructor.call(this,this.metadata)}return j(b,a),h(b,"adt",["jsType","contracts","metadata"]),f(b,"contracts","contract",function(a){return c.find(this.contracts,function(b){return b.name===a})}),b.prototype.contractNames=function(){return c.map(this.contracts,function(a){return a.name})},b.prototype._include=function(a){return a.constructor===this.jsType},b.prototype._mDress=function(a,b){var c,d;return this.jsType&&a instanceof this.jsType?b.success(a):(c=function(c){var d;return d=c.infoType.mDress(a,b),d.onSuccess(function(a){return function(d){var e;try{return b.success(c.dress(d,b.world))}catch(f){return e=f,b.failure(a,"Dresser failed: "+e.message,[e])}}}(this))},d=function(c){return function(d){var e;return e=[c.jsType&&c.jsType.name||"value",a],b.failure(c,["Invalid ${typeName}: `${value}`",e],d)}}(this),b.find(this.contracts,c,d))},b.prototype._undress=function(a,d){var e;return this.jsType?(e=null,e=1===c.size(this.contracts)?this.contracts[0]:c.find(this.contracts,function(a){return a.infoType.isSuperTypeOf(d)}),null!=e?e.infoType.undress(e.undress(a),d):b.__super__._undress.apply(this,arguments)):a},b.prototype.low=function(){return this.contracts[0].infoType.low()},b.prototype.resolveProxies=function(a){return c.each(this.contracts,function(b){return b.resolveProxies(a)})},b.prototype.toString=function(){return c.map(this.contracts,function(a){return a.toString()}).join(", ")},b}(g),b.exports=d}).call(this)},{"../support/contract":16,"../support/fetchable":18,"../support/ic":20,"../support/utils":23,"../type":25}],27:[function(a,b){(function(){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=a("../support/ic").TypeType,d=a("../type"),c=function(a){function b(a){this.metadata=a,b.__super__.constructor.call(this,this.metadata)}return g(b,a),e(b,"any",["metadata"]),b.prototype._mDress=function(a,b){return b.success(a)},b.prototype._include=function(){return!0},b.prototype._isSuperTypeOf=function(){return!0},b.prototype._equals=function(a){return a instanceof b||b.__super__._equals.apply(this,arguments)},b.prototype.low=function(){return this},b.prototype.resolveProxies=function(){},b.prototype.toString=function(){return"."},b}(d),b.exports=c}).call(this)},{"../support/ic":20,"../type":25}],28:[function(a,b){(function(){var c,d,e,f=function(a,b){return function(){return a.apply(b,arguments)}},g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=a("../support/ic").TypeType,d=a("../type"),c=function(a){function b(a,c){this.jsType=a,this.metadata=c,this._equals=f(this._equals,this),b.__super__.constructor.call(this,this.metadata)}return h(b,a),e(b,"builtin",["jsType","metadata"]),b.prototype._mDress=function(a,b){var c;return this.include(a)?b.success(a):(c=[this.jsType.name,a],b.failure(this,["Invalid ${typeName}: `${value}`",c]))},b.prototype._include=function(a){return a instanceof this.jsType||null!=a&&a.constructor===this.jsType},b.prototype._equals=function(a){return this===a||a instanceof b&&a.jsType===this.jsType||b.__super__._equals.apply(this,arguments)},b.prototype.low=function(){return this},b.prototype.toString=function(){return"."+this.jsType.name.toString()},b.prototype.resolveProxies=function(){},b}(d),b.exports=c}).call(this)},{"../support/ic":20,"../type":25}],29:[function(a,b){(function(){var c,d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};i=a("../support/ic").TypeType,h=a("../type"),d=a("../support/collection_type"),g=a("../type/tuple_type"),e=a("../support/heading"),c=a("../support/utils"),f=function(a){function b(a,d){this.heading=a,this.metadata=d,b.__super__.constructor.call(this,this.metadata),this.heading instanceof e||c.argumentError("Heading expected, got:",this.heading)}return k(b,a),i(b,"relation",["heading","metadata"]),b.prototype.fetch=function(){return this.heading.fetch.apply(this.heading,arguments)},b.prototype.tupleType=function(){return null!=this.tupleTypeCache?this.tupleTypeCache:this.tupleTypeCache=new g(this.heading)},b.prototype._include=function(a){return a instanceof Array&&c.every(a,function(a){return function(b){return a.tupleType().include(b)}}(this))},b.prototype._mDress=function(a,b){var c,d,e,f;return a instanceof Array?(f=this.tupleType(),c={},d=function(a){var d;return d=f.mDress(a,b),d.onSuccess(function(a){return function(e){var f;return f=JSON.stringify(e),c[f]?b.failure(a,["Duplicate Tuple: `${value}`",[e]]):(c[f]=e,d)}}(this))},e=function(a){return function(c){return b.failure(a,["Invalid ${typeName}",["Relation"]],c)}}(this),b.map(a,d,e)):b.failure(this,["Array expected, got: `${value}`",[a]])},b.prototype._undress=function(a,e){var f,g;return e instanceof b||e instanceof d||c.undressError("Unable to undress `"+a+"` to `"+e+"`"),f=this.tupleType(),g=e instanceof b?e.tupleType():e.elmType,c.map(a,function(a){return f.undress(a,g)})},b.prototype._isSuperTypeOf=function(a){return this===a||a instanceof b&&this.heading.isSuperHeadingOf(a.heading)},b.prototype._equals=function(a){return this===a||a instanceof b&&this.heading.equals(a.heading)||b.__super__._equals.apply(this,arguments)},b.prototype.low=function(){return new b(this.heading.low())},b.prototype.resolveProxies=function(a){return this.heading.resolveProxies(a)},b.prototype.toString=function(){return"{{ "+this.heading.toString()+" }}"},b}(h),b.exports=f}).call(this)},{"../support/collection_type":14,"../support/heading":19,"../support/ic":20,"../support/utils":23,"../type":25,"../type/tuple_type":34}],30:[function(a,b){(function(){var c,d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};g=a("../support/ic").TypeType,c=a("../support/utils"),f=a("../type"),d=a("../support/collection_type"),e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return i(b,a),g(b,"seq",["elmType","metadata"]),b.prototype._include=function(a){return a instanceof Array&&c.every(a,function(a){return function(b){return a.elmType.include(b)}}(this))},b.prototype._mDress=function(a,b){var c,d;return a instanceof Array?(c=function(a){return function(c){return a.elmType.mDress(c,b)}}(this),d=function(a){return function(c){return b.failure(a,["Invalid ${typeName}",["Sequence"]],c)}}(this),b.map(a,c,d)):b.failure(this,["Array expected, got: `${value}`",[a]])},b.prototype._undress=function(a,d){return d instanceof b||c.undressError("Unable to undress `"+a+"` to `"+d+"`"),b.__super__._undress.apply(this,arguments)},b.prototype.low=function(){return new b(this.elmType.low())},b.prototype.resolveProxies=function(a){return this.elmType.resolveProxies(a)},b.prototype.toString=function(){return"["+this.elmType.toString()+"]"},b}(d),b.exports=e}).call(this)},{"../support/collection_type":14,"../support/ic":20,"../support/utils":23,"../type":25}],31:[function(a,b){(function(){var c,d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};g=a("../support/ic").TypeType,c=a("../support/utils"),f=a("../type"),d=a("../support/collection_type"),e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return i(b,a),g(b,"set",["elmType","metadata"]),b.prototype._include=function(a){return a instanceof Array&&c.every(a,function(a){return function(b){return a.elmType.include(b)}}(this))?c.uniq(a).length===a.length:!1},b.prototype._mDress=function(a,b){var d,e,f,g;return a instanceof Array?(f=function(a){return function(c){return a.elmType.mDress(c,b)}}(this),g=function(a){return function(c){return b.failure(a,["Invalid ${typeName}",["Set"]],c)}}(this),e=b.map(a,f,g),d=function(a){return c.find(a,function(b,c){return a.indexOf(b)!==c})},e.onSuccess(function(a){return function(c){var f,g;return(f=d(c))?(g=b.failure(a,["Duplicate value: `${value}`",[f]]),g.onFailure(function(c){return b.failure(a,"Invalid Set",[c])})):e}}(this))):b.failure(this,["Array expected, got: `${value}`",[a]])},b.prototype._undress=function(a,e){return e instanceof d||c.undressError("Unable to undress `"+a+"` to `"+e+"`"),b.__super__._undress.apply(this,arguments)},b.prototype.low=function(){return new b(this.elmType.low())},b.prototype.resolveProxies=function(a){return this.elmType.resolveProxies(a)},b.prototype.toString=function(){return"{"+this.elmType.toString()+"}"},b}(d),b.exports=e}).call(this)},{"../support/collection_type":14,"../support/ic":20,"../support/utils":23,"../type":25}],32:[function(a,b){(function(){var c,d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};g=a("../support/ic").TypeType,c=a("../support/utils"),f=a("../type"),d=a("../support/collection_type"),e=function(a){function b(a,d){var e;this.componentTypes=a,this.metadata=d,b.__super__.constructor.call(this,this.metadata),c.isArray(this.componentTypes)||c.argumentError("[Finitio::Type] expected, got:",this.componentTypes),e=c.find(this.componentTypes,function(a){return!(a instanceof f)}),null!=e&&c.argumentError("[Finitio::Type] expected, got:",e)}return i(b,a),g(b,"struct",["componentTypes","metadata"]),b.prototype.size=function(){return c.size(this.componentTypes)},b.prototype._include=function(a){return c.isArray(a)&&c.size(a)===c.size(this.componentTypes)&&c.every(c.zip(a,this.componentTypes),function(b){var c;return a=b[0],c=b[1],c.include(a)})},b.prototype._mDress=function(a,b){var c,d;return a instanceof Array?a.length!==this.size()?b.failure(this,["Struct size mismatch: ${a} for ${b}",[a.length,this.size()]]):(c=function(){return function(c,d){return c.mDress(a[d],b)}}(this),d=function(c){return function(d){var e;return e=["Struct",a],b.failure(c,["Invalid ${typeName}: `${value}`",e],d)}}(this),b.map(this.componentTypes,c,d)):b.failure(this,["Array expected, got: `${value}`",[a]])},b.prototype._undress=function(a,d){var e,f;return d instanceof b||c.undressError("Unable to undress `"+a+"` to `"+d+"`"),d.size()!==this.size()&&c.undressError("Unable to undress `"+a+"` to `"+d+"`"),e=this.componentTypes,f=d.componentTypes,c.map(a,function(a,b){return e[b].undress(a,f[b])})},b.prototype._isSuperTypeOf=function(a){return this===a||a instanceof b&&c.size(this.componentTypes)===c.size(a.componentTypes)&&c.every(c.zip(this.componentTypes,a.componentTypes),function(a){return a[0].isSuperTypeOf(a[1])})},b.prototype._equals=function(a){return this===a||a instanceof b&&this.headingEquals(a)||b.__super__._equals.apply(this,arguments)},b.prototype.headingEquals=function(a){return c.size(this.componentTypes)===c.size(a.componentTypes)&&c.every(this.componentTypes,function(b,c){return a.componentTypes[c].equals(b)})},b.prototype.low=function(){var a;return a=c.map(this.componentTypes,function(a){return a.low()}),new b(a)},b.prototype.resolveProxies=function(a){return c.each(this.componentTypes,function(b){return b.resolveProxies(a)})},b.prototype.toString=function(){return"<"+c.map(this.componentTypes,function(a){return a.toString()}).join(",")+">"},b}(f),b.exports=e}).call(this)},{"../support/collection_type":14,"../support/ic":20,"../support/utils":23,"../type":25}],33:[function(a,b){(function(){var c,d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};h=a("../support/ic").TypeType,c=a("../support/utils"),e=a("../support/fetchable"),g=a("../type"),d=a("../support/constraint"),f=function(a){function b(a,e,f){this.superType=a,this.constraints=e,this.metadata=f,this.superType instanceof g||c.argumentError("Finitio.Type expected, got",this.superType),this.constraints.constructor!==Array&&c.argumentError("Array expected for constraints, got",this.constraints),this.constraints.length>0||c.argumentError("Empty constraints not allowed on SubType"),c.every(this.constraints,function(a){return a instanceof d})||c.argumentError("Array of constraints expected, got",this.constraints),b.__super__.constructor.call(this,this.metadata)}return j(b,a),h(b,"sub",["superType","constraints","metadata"]),e(b,"constraints","constraint",function(a){return c.find(this.constraints,function(b){return b.name===a})}),b.prototype._mDress=function(a,b){var c,d,e;return e=this.superType.mDress(a,b),c=function(c,d){var f,g;return d.accept(e.result)?e:(null!=d.name?(f="Invalid ${typeName} (not ${cName}): `${value}`",g=["value",d.name,a]):(f="Invalid ${typeName}: `${value}`",g=["value",a]),b.failure(d,[f,g]))},d=function(a){return function(c){return b.failure(a,c[0].error)}}(this),b.refine(e,this.constraints,c,d)},b.prototype._include=function(a){return this.superType.include(a)&&c.every(this.constraints,function(b){return b.accept(a)})},b.prototype._isSubTypeOf=function(a){return a.isSuperTypeOf(this.superType)},b.prototype._equals=function(a){return this===a||a instanceof b&&this.superTypeEquals(a)&&this.constraintsEquals(a)||b.__super__._equals.apply(this,arguments)},b.prototype.low=function(){return this.superType.low()},b.prototype.toString=function(){return this.superType.toString()+"( x | ... )"},b.prototype.superTypeEquals=function(a){return this.superType.equals(a.superType)},b.prototype.constraintsEquals=function(a){return this.constraints.length===a.constraints.length&&c.every(c.zip(this.constraints,a.constraints),function(a){return a[0].equals(a[1])})},b.prototype.resolveProxies=function(a){return this.superType.resolveProxies(a)},b}(g),b.exports=f}).call(this)},{"../support/constraint":15,"../support/fetchable":18,"../support/ic":20,"../support/utils":23,"../type":25}],34:[function(a,b){(function(){var c,d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};h=a("../support/ic").TypeType,c=a("../support/utils"),g=a("../type"),e=a("../support/heading"),d=a("../support/collection_type"),f=function(a){function b(a,d){this.heading=a,this.metadata=d,this.heading instanceof e||c.argumentError("Heading expected, got:",this.heading),b.__super__.constructor.call(this,this.metadata)}var d;return j(b,a),h(b,"tuple",["heading","metadata"]),b.prototype.fetch=function(){return this.heading.fetch.apply(this.heading,arguments)},b.prototype._include=function(a){return"object"!=typeof a?!1:this.areAttributesValid(a)?c.every(this.heading.attributes,function(b){var c;return null!=a[b.name]?(c=a[b.name],b.type.include(c)):!0}):!1},b.prototype._mDress=function(a,b){var e,f,g,h,i;return a instanceof Object?(h={},i=b.success(h),f=function(c){return function(d,e){var f,g,j,k;return f=c.heading.getAttr(e)||null,g=a[e],void 0===g&&null!=f&&f.required?(j=b.failure(e,["Missing attribute `${attrName}`",[e]]),j.onFailure(function(a){return a.location=e,j})):null!=f||c.heading.allowExtra()?null!=f&&void 0!==g?(k=f.type.mDress(g,b),k.onFailure(function(a){return a.location=e,k}),k.onSuccess(function(a){return h[e]=a,i})):void 0!==g?(h[e]=g,i):i:(j=b.failure(e,["Unrecognized attribute `${attrName}`",[e]]),j.onFailure(function(a){return a.location=e,j}))}}(this),g=function(c){return function(d){var e;return e=["Tuple",a],b.failure(c,["Invalid ${typeName}",e],d)}}(this),e=d(this.heading),c.extend(e,a),e=Object.keys(e),b.refine(i,e,f,g)):b.failure(this,["Invalid Tuple: `${value}`",[a]])},b.prototype._undress=function(a,e){var f,g,h,i,j;return e instanceof b||c.undressError("Tuple cannot undress to `"+e+"` ("+e.constructor+")."),j=c.triSplit(d(this.heading),d(e.heading)),h=j[0],f=j[1],g=j[2],c.find(f,function(a){return a.required})&&c.undressError("Tuple undress does not allow projecting "+f),c.isEmpty(g)||c.undressError("Tuple undress does not support missing "+g),c.every(h,function(a){return a[0].required===a[1].required})||c.undressError("Tuple undress requires optional attributes to agree"),i={},this.heading.each(function(b){var c,d,f,g;return c=b.name,d=b.type,f=a[c],void 0!==f?(g=e.heading.getAttr(c).type,i[b.name]=d.undress(f,g)):void 0}),i},b.prototype._isSuperTypeOf=function(a){return this===a||a instanceof b&&this.heading.isSuperHeadingOf(a.heading)},b.prototype._equals=function(a){return this===a||a instanceof b&&this.heading.equals(a.heading)||b.__super__._equals.apply(this,arguments)},b.prototype.low=function(){return new b(this.heading.low())},b.prototype.toString=function(){return"{ "+this.heading.toString()+" }"},d=function(a){var b;return b={},a.each(function(a){return b[a.name]=a}),b},b.prototype.attributeNames=function(){return c.map(this.heading.attributes,function(a){return a.name})},b.prototype.requiredAttributeNames=function(){return c.map(c.values(c.filter(this.heading.attributes,function(a){return a.required})),function(a){return a.name})},b.prototype.extraAttributes=function(a){return c.difference(c.keys(a),this.attributeNames())},b.prototype.missingAttributes=function(a){return c.difference(this.requiredAttributeNames(),c.keys(a))},b.prototype.areAttributesValid=function(a){return(this.heading.allowExtra()||c.isEmpty(this.extraAttributes(a)))&&c.isEmpty(this.missingAttributes(a))},b.prototype.resolveProxies=function(a){return this.heading.resolveProxies(a)},b}(g),b.exports=f}).call(this)},{"../support/collection_type":14,"../support/heading":19,"../support/ic":20,"../support/utils":23,"../type":25}],35:[function(a,b){(function(){var c,d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=a("../support/ic").ObjectType,e=a("../type"),c=a("../support/utils"),f=function(a){function b(a,d,e){this.type=a,this.name=d,this.metadata=e,this.name||c.argumentError("Name cannot be null on TypeDef"),b.__super__.constructor.call(this,this.metadata),this.generator=this.type.generator}return h(b,a),d(b,["type","name","metadata"]),b.prototype.fetch=function(){return this.type.fetch.apply(this.type,arguments)},b.prototype._include=function(a){return this.type.include(a)
},b.prototype._mDress=function(a,b){var c;return c=this.type.mDress(a,b),c.onFailure(function(a){return function(b){return b.typeName="Main"===a.name?"Data":a.name,c}}(this))},b.prototype._undress=function(a,b){return this.type.undress(a,b)},b.prototype._isSuperTypeOf=function(a){return this.type.isSuperTypeOf(a)},b.prototype._isSubTypeOf=function(a){return this.type._isSubTypeOf(a)},b.prototype._equals=function(a){return this.type.equals(a)},b.prototype.isFake=function(){return!0},b.prototype.trueOne=function(){return this.type},b.prototype.low=function(){return this.type.low()},b.prototype.resolveProxies=function(a){return this.type.resolveProxies(a)},b.prototype.toString=function(){return this.name},b}(e),b.exports=f}).call(this)},{"../support/ic":20,"../support/utils":23,"../type":25}],36:[function(a,b){(function(){var c,d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};f=a("../support/ic").TypeType,c=a("../support/utils"),d=a("../type"),e=function(a){function b(a,d,e){this.typeName=a,this.metadata=d,this.target=e,this.typeName||c.argumentError("Proxied ref cannot be null on TypeRef"),b.__super__.constructor.call(this,this.metadata)}return h(b,a),f(b,"ref",["typeName","metadata"]),b.prototype.fetch=function(){var a;return a=this.resolved(),a.fetch.apply(a,arguments)},b.prototype._include=function(a){return this.resolved().include(a)},b.prototype._mDress=function(a,b){return this.resolved().mDress(a,b)},b.prototype._undress=function(a,b){return this.resolved().undress(a,b)},b.prototype._isSuperTypeOf=function(a){return this.resolved().isSuperTypeOf(a)},b.prototype._isSubTypeOf=function(a){return this.resolved()._isSubTypeOf(a)},b.prototype._equals=function(a){return this.resolved().equals(a)},b.prototype.isFake=function(){return!0},b.prototype.trueOne=function(){return this.resolved().trueOne()},b.prototype.low=function(){return this.resolved().low()},b.prototype.resolve=function(a){return null!=this.target?this.target:this.target=a.resolve(this.typeName).fetchType()},b.prototype.resolveProxies=function(a){return this.resolve(a)},b.prototype.resolved=function(){if(!this.target)throw new Error("Proxy is not resolved");return this.target},b.prototype.toString=function(){return this.typeName},b}(d),b.exports=e}).call(this)},{"../support/ic":20,"../support/utils":23,"../type":25}],37:[function(a,b){(function(){var c,d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=a("../support/ic").TypeType,c=a("../support/utils"),d=a("../type"),f=function(a){function b(a,e){this.candidates=a,this.metadata=e,c.each(this.candidates,function(a){return a instanceof d?void 0:c.argumentError("Finitio.Type expected, got:",a)}),b.__super__.constructor.call(this,this.metadata)}return h(b,a),e(b,"union",["candidates","metadata"]),b.prototype._mDress=function(a,b){var c,d;return c=function(c){return c.mDress(a,b)},d=function(c){return function(d){var e;return e=["value",a],b.failure(c,["Invalid ${typeName}: `${value}`",e],d)}}(this),b.find(this.candidates,c,d)},b.prototype._undress=function(a,b){var d;return this===b?a:(d=c.find(this.candidates,function(a){return b.isSuperTypeOf(a)}))?d.undress(a,b):(d=c.find(this.candidates,function(b){return b.include(a)}))?d.undress(a,b):c.undressError("Unable to undress `"+a+"` to `"+b+"`")},b.prototype._include=function(a){var b;return b=c.find(this.candidates,function(b){return b.include(a)}),null!=b},b.prototype._isSuperTypeOf=function(a){return this===a||c.any(this.candidates,function(b){return b.isSuperTypeOf(a)})||a instanceof b&&c.every(a.candidates,function(a){return function(b){return c.any(a.candidates,function(a){return a.isSuperTypeOf(b)})}}(this))||b.__super__._isSuperTypeOf.apply(this,arguments)},b.prototype._equals=function(a){return this===a||a instanceof b&&this.candidatesEquals(a,!0)||b.__super__._equals.apply(this,arguments)},b.prototype.candidatesEquals=function(a,b){var d;return d=c.every(this.candidates,function(b){return c.any(a.candidates,function(a){return b.equals(a)})}),d&&(!b||a.candidatesEquals(this,!1))},b.prototype.low=function(){throw"UnionType#low is not defined yet, sorry!"},b.prototype.resolveProxies=function(a){return c.each(this.candidates,function(b){return b.resolveProxies(a)})},b.prototype.toString=function(){return c.map(this.candidates,function(a){return a.toString()}).join("|")},b}(d),b.exports=f}).call(this)},{"../support/ic":20,"../support/utils":23,"../type":25}],38:[function(){},{}]},{},[2]);